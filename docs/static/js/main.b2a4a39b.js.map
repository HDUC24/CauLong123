{"version":3,"file":"static/js/main.b2a4a39b.js","mappings":"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","sources":["src/utils/expenseUtils.ts","src/services/storageService.ts","src/screens/HomeScreen.tsx","src/models/types.ts","src/components/ExpenseDistribution.tsx","src/components/ShareButton.tsx","src/screens/SessionDetailScreen.tsx","src/screens/NewSessionScreen.tsx","src/screens/EditSessionScreen.tsx","src/screens/PlayersScreen.tsx","src/screens/AddPlayerScreen.tsx","src/screens/StatsScreen.tsx","src/navigation/AppNavigator.tsx","App.js","index.js","webpack/bootstrap","webpack/runtime/chunk loaded","webpack/runtime/compat get default export","webpack/runtime/create fake namespace object","webpack/runtime/define property getters","webpack/runtime/ensure chunk","webpack/runtime/get javascript chunk filename","webpack/runtime/get mini-css chunk filename","webpack/runtime/global","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/load script","webpack/runtime/make namespace object","webpack/runtime/publicPath","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["import { Expense, ExpenseCalculation, Player, Session } from '../models/types';\r\n\r\n/**\r\n * Tính toán và chia chi phí cho một buổi đánh cầu\r\n * @param session Thông tin buổi đánh cầu\r\n * @returns Kết quả tính toán chi phí\r\n */\r\nexport const calculateExpenses = (session: Session): ExpenseCalculation => {\r\n  const result: ExpenseCalculation = {\r\n    totalAmount: 0,\r\n    splitByPlayer: {},\r\n  };\r\n\r\n  // Khởi tạo số tiền cần trả cho mỗi người chơi là 0\r\n  session.players.forEach((player) => {\r\n    result.splitByPlayer[player.id] = 0;\r\n  });\r\n\r\n  // Tính tổng chi phí\r\n  session.expenses.forEach((expense) => {\r\n    result.totalAmount += expense.amount;\r\n\r\n    // Xác định những người cần chia chi phí này\r\n    const playersToSplit = expense.divideAmong \r\n      ? session.players.filter(p => expense.divideAmong?.includes(p.id))\r\n      : session.players;\r\n\r\n    if (playersToSplit.length === 0) return;\r\n\r\n    // Chia đều chi phí\r\n    const amountPerPlayer = expense.amount / playersToSplit.length;\r\n\r\n    // Cập nhật chi phí cho mỗi người chơi\r\n    playersToSplit.forEach((player) => {\r\n      result.splitByPlayer[player.id] += amountPerPlayer;\r\n    });\r\n  });\r\n\r\n  return result;\r\n};\r\n\r\n/**\r\n * Định dạng số thành chuỗi tiền tệ VND\r\n * @param amount Số tiền\r\n * @returns Chuỗi đã định dạng\r\n */\r\nexport const formatCurrency = (amount: number): string => {\r\n  return new Intl.NumberFormat('vi-VN', {\r\n    style: 'currency',\r\n    currency: 'VND',\r\n  }).format(amount);\r\n};\r\n\r\n/**\r\n * Tạo ID ngẫu nhiên\r\n * @returns Chuỗi ID\r\n */\r\nexport const generateId = (): string => {\r\n  return Math.random().toString(36).substring(2) + Date.now().toString(36);\r\n};\r\n","import AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { Session, Player } from '../models/types';\r\nimport { generateId } from '../utils/expenseUtils';\r\n\r\n// Keys for AsyncStorage\r\nconst SESSIONS_KEY = 'badminton_sessions';\r\nconst PLAYERS_KEY = 'badminton_players';\r\n\r\n/**\r\n * Lưu danh sách buổi đánh cầu vào bộ nhớ\r\n */\r\nexport const saveSessions = async (sessions: Session[]): Promise<void> => {\r\n  try {\r\n    await AsyncStorage.setItem(SESSIONS_KEY, JSON.stringify(sessions));\r\n  } catch (error) {\r\n    console.error('Lỗi khi lưu sessions:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Lấy danh sách buổi đánh cầu từ bộ nhớ\r\n */\r\nexport const getSessions = async (): Promise<Session[]> => {\r\n  try {\r\n    const sessions = await AsyncStorage.getItem(SESSIONS_KEY);\r\n    return sessions ? JSON.parse(sessions) : [];\r\n  } catch (error) {\r\n    console.error('Lỗi khi đọc sessions:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * Thêm một buổi đánh cầu mới\r\n */\r\nexport const addSession = async (session: Omit<Session, 'id'>): Promise<Session> => {\r\n  try {\r\n    const sessions = await getSessions();\r\n    const newSession: Session = {\r\n      ...session,\r\n      id: generateId(),\r\n    };\r\n    \r\n    sessions.push(newSession);\r\n    await saveSessions(sessions);\r\n    return newSession;\r\n  } catch (error) {\r\n    console.error('Lỗi khi thêm session:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Cập nhật một buổi đánh cầu\r\n */\r\nexport const updateSession = async (updatedSession: Session): Promise<void> => {\r\n  try {\r\n    const sessions = await getSessions();\r\n    const index = sessions.findIndex(s => s.id === updatedSession.id);\r\n    \r\n    if (index !== -1) {\r\n      sessions[index] = updatedSession;\r\n      await saveSessions(sessions);\r\n    } else {\r\n      throw new Error('Không tìm thấy buổi đánh cầu để cập nhật');\r\n    }\r\n  } catch (error) {\r\n    console.error('Lỗi khi cập nhật session:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Xóa một buổi đánh cầu\r\n */\r\nexport const deleteSession = async (sessionId: string): Promise<void> => {\r\n  try {\r\n    const sessions = await getSessions();\r\n    const updatedSessions = sessions.filter(s => s.id !== sessionId);\r\n    await saveSessions(updatedSessions);\r\n  } catch (error) {\r\n    console.error('Lỗi khi xóa session:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Lưu danh sách người chơi vào bộ nhớ\r\n */\r\nexport const savePlayers = async (players: Player[]): Promise<void> => {\r\n  try {\r\n    await AsyncStorage.setItem(PLAYERS_KEY, JSON.stringify(players));\r\n  } catch (error) {\r\n    console.error('Lỗi khi lưu players:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Lấy danh sách người chơi từ bộ nhớ\r\n */\r\nexport const getPlayers = async (): Promise<Player[]> => {\r\n  try {\r\n    const players = await AsyncStorage.getItem(PLAYERS_KEY);\r\n    return players ? JSON.parse(players) : [];\r\n  } catch (error) {\r\n    console.error('Lỗi khi đọc players:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * Thêm người chơi mới\r\n */\r\nexport const addPlayer = async (name: string): Promise<Player> => {\r\n  try {\r\n    const players = await getPlayers();\r\n    const newPlayer: Player = {\r\n      id: generateId(),\r\n      name,\r\n    };\r\n    \r\n    players.push(newPlayer);\r\n    await savePlayers(players);\r\n    return newPlayer;\r\n  } catch (error) {\r\n    console.error('Lỗi khi thêm người chơi:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Xóa người chơi\r\n */\r\nexport const deletePlayer = async (playerId: string): Promise<void> => {\r\n  try {\r\n    const players = await getPlayers();\r\n    const updatedPlayers = players.filter(p => p.id !== playerId);\r\n    await savePlayers(updatedPlayers);\r\n  } catch (error) {\r\n    console.error('Lỗi khi xóa người chơi:', error);\r\n    throw error;\r\n  }\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  FlatList,\r\n  StyleSheet,\r\n  TouchableOpacity,\r\n  TextInput,\r\n  Modal,\r\n  ScrollView,\r\n} from \"react-native\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { format, subDays, isWithinInterval } from \"date-fns\";\r\nimport { vi } from \"date-fns/locale\";\r\nimport { getSessions } from \"../services/storageService\";\r\nimport { Session } from \"../models/types\";\r\nimport { formatCurrency } from \"../utils/expenseUtils\";\r\nimport Ionicons from \"@expo/vector-icons/Ionicons\";\r\n\r\nconst HomeScreen = () => {\r\n  const navigation = useNavigation<any>();\r\n  const [sessions, setSessions] = useState<Session[]>([]);\r\n  const [filteredSessions, setFilteredSessions] = useState<Session[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  const [isFilterModalVisible, setIsFilterModalVisible] = useState(false);\r\n  const [filterOptions, setFilterOptions] = useState({\r\n    timeRange: \"all\", // all, week, month, custom\r\n    location: \"\",\r\n  });\r\n  const [sortOption, setSortOption] = useState(\"dateDesc\"); // dateDesc, durationDesc, costDesc\r\n\r\n  useEffect(() => {\r\n    loadSessions();\r\n\r\n    // Theo dõi thay đổi từ màn hình khác và cập nhật lại danh sách\r\n    const unsubscribe = navigation.addListener(\"focus\", () => {\r\n      loadSessions();\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, [navigation]);\r\n\r\n  // Apply filters when sessions or filter criteria change\r\n  useEffect(() => {\r\n    applyFilters();\r\n  }, [sessions, searchText, filterOptions, sortOption]);\r\n  const loadSessions = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const data = await getSessions();\r\n      // Sắp xếp theo ngày mới nhất\r\n      const sortedSessions = [...data].sort(\r\n        (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()\r\n      );\r\n      setSessions(sortedSessions);\r\n      setFilteredSessions(sortedSessions);\r\n    } catch (error) {\r\n      console.error(\"Lỗi khi tải sessions:\", error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const applyFilters = () => {\r\n    let result = [...sessions];\r\n\r\n    // Filter by search text (location or notes)\r\n    if (searchText) {\r\n      const lowerSearchText = searchText.toLowerCase();\r\n      result = result.filter(\r\n        (session) =>\r\n          session.location.toLowerCase().includes(lowerSearchText) ||\r\n          (session.notes &&\r\n            session.notes.toLowerCase().includes(lowerSearchText))\r\n      );\r\n    }\r\n\r\n    // Filter by time range\r\n    if (filterOptions.timeRange !== \"all\") {\r\n      const today = new Date();\r\n      const startDate =\r\n        filterOptions.timeRange === \"week\"\r\n          ? subDays(today, 7)\r\n          : subDays(today, 30); // month\r\n\r\n      result = result.filter((session) => {\r\n        const sessionDate = new Date(session.date);\r\n        return isWithinInterval(sessionDate, { start: startDate, end: today });\r\n      });\r\n    }\r\n\r\n    // Filter by specific location\r\n    if (filterOptions.location) {\r\n      result = result.filter((session) =>\r\n        session.location\r\n          .toLowerCase()\r\n          .includes(filterOptions.location.toLowerCase())\r\n      );\r\n    }\r\n\r\n    // Sort the results based on the selected sort option\r\n    result.sort((a, b) => {\r\n      switch (sortOption) {\r\n        case \"dateDesc\":\r\n          return new Date(b.date).getTime() - new Date(a.date).getTime();\r\n        case \"dateAsc\":\r\n          return new Date(a.date).getTime() - new Date(b.date).getTime();\r\n        case \"durationDesc\":\r\n          return (b.duration || 0) - (a.duration || 0);\r\n        case \"durationAsc\":\r\n          return (a.duration || 0) - (b.duration || 0);\r\n        case \"costDesc\":\r\n          const totalCostB = b.expenses.reduce(\r\n            (sum, expense) => sum + expense.amount,\r\n            0\r\n          );\r\n          const totalCostA = a.expenses.reduce(\r\n            (sum, expense) => sum + expense.amount,\r\n            0\r\n          );\r\n          return totalCostB - totalCostA;\r\n        case \"costAsc\":\r\n          const totalCostAAsc = a.expenses.reduce(\r\n            (sum, expense) => sum + expense.amount,\r\n            0\r\n          );\r\n          const totalCostBAsc = b.expenses.reduce(\r\n            (sum, expense) => sum + expense.amount,\r\n            0\r\n          );\r\n          return totalCostAAsc - totalCostBAsc;\r\n        default:\r\n          return 0;\r\n      }\r\n    });\r\n\r\n    setFilteredSessions(result);\r\n  };\r\n\r\n  const renderFilterModal = () => (\r\n    <Modal\r\n      visible={isFilterModalVisible}\r\n      animationType=\"slide\"\r\n      transparent={true}\r\n      onRequestClose={() => setIsFilterModalVisible(false)}\r\n    >\r\n      <View style={styles.modalOverlay}>\r\n        <View style={styles.modalContainer}>\r\n          <View style={styles.modalHeader}>\r\n            <Text style={styles.modalTitle}>\r\n              {\" \"}\r\n              <Text>Lọc buổi đánh cầu</Text>\r\n            </Text>\r\n            <TouchableOpacity onPress={() => setIsFilterModalVisible(false)}>\r\n              <Ionicons name=\"close\" size={24} color=\"#333\" />\r\n            </TouchableOpacity>\r\n          </View>\r\n\r\n          <ScrollView style={styles.modalContent}>\r\n            <Text style={styles.filterLabel}>\r\n              {\" \"}\r\n              <Text>Khoảng thời gian:</Text>\r\n            </Text>\r\n            <View style={styles.timeRangeButtons}>\r\n              {[\r\n                { value: \"all\", label: \"Tất cả\" },\r\n                { value: \"week\", label: \"Tuần này\" },\r\n                { value: \"month\", label: \"Tháng này\" },\r\n              ].map((option) => (\r\n                <TouchableOpacity\r\n                  key={option.value}\r\n                  style={[\r\n                    styles.timeRangeButton,\r\n                    filterOptions.timeRange === option.value &&\r\n                      styles.timeRangeButtonActive,\r\n                  ]}\r\n                  onPress={() =>\r\n                    setFilterOptions({\r\n                      ...filterOptions,\r\n                      timeRange: option.value,\r\n                    })\r\n                  }\r\n                >\r\n                  <Text\r\n                    style={\r\n                      filterOptions.timeRange === option.value\r\n                        ? styles.timeRangeTextActive\r\n                        : styles.timeRangeText\r\n                    }\r\n                  >\r\n                    <Text>{option.label}</Text>\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              ))}\r\n            </View>{\" \"}\r\n            <Text style={styles.filterLabel}>\r\n              <Text>Địa điểm:</Text>\r\n            </Text>\r\n            <TextInput\r\n              style={styles.filterInput}\r\n              value={filterOptions.location}\r\n              onChangeText={(text) =>\r\n                setFilterOptions({ ...filterOptions, location: text })\r\n              }\r\n              placeholder=\"Nhập tên địa điểm\"\r\n            />\r\n            <Text style={styles.filterLabel}>\r\n              <Text>Sắp xếp theo:</Text>\r\n            </Text>\r\n            <View style={styles.sortOptions}>\r\n              {[\r\n                { value: \"dateDesc\", label: \"Mới nhất\" },\r\n                { value: \"dateAsc\", label: \"Cũ nhất\" },\r\n                { value: \"durationDesc\", label: \"Thời lượng\" },\r\n                { value: \"costDesc\", label: \"Chi phí\" },\r\n              ].map((option) => (\r\n                <TouchableOpacity\r\n                  key={option.value}\r\n                  style={[\r\n                    styles.sortOption,\r\n                    sortOption === option.value && styles.sortOptionActive,\r\n                  ]}\r\n                  onPress={() => setSortOption(option.value)}\r\n                >\r\n                  <Text\r\n                    style={\r\n                      sortOption === option.value\r\n                        ? styles.sortOptionTextActive\r\n                        : styles.sortOptionText\r\n                    }\r\n                  >\r\n                    {option.label}\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              ))}{\" \"}\r\n            </View>\r\n            <Text style={styles.filterLabel}>\r\n              <Text>Sắp xếp theo:</Text>\r\n            </Text>\r\n            <View style={styles.sortOptions}>\r\n              {[\r\n                { value: \"dateDesc\", label: \"Ngày (mới nhất trước)\" },\r\n                { value: \"dateAsc\", label: \"Ngày (cũ nhất trước)\" },\r\n                { value: \"durationDesc\", label: \"Thời gian (giảm dần)\" },\r\n                { value: \"durationAsc\", label: \"Thời gian (tăng dần)\" },\r\n                { value: \"costDesc\", label: \"Chi phí (cao đến thấp)\" },\r\n                { value: \"costAsc\", label: \"Chi phí (thấp đến cao)\" },\r\n              ].map((option) => (\r\n                <TouchableOpacity\r\n                  key={option.value}\r\n                  style={[\r\n                    styles.sortOption,\r\n                    sortOption === option.value && styles.sortOptionActive,\r\n                  ]}\r\n                  onPress={() => setSortOption(option.value)}\r\n                >\r\n                  <Text\r\n                    style={\r\n                      sortOption === option.value\r\n                        ? styles.sortOptionTextActive\r\n                        : styles.sortOptionText\r\n                    }\r\n                  >\r\n                    {option.label}\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              ))}\r\n            </View>\r\n            <View style={styles.filterActions}>\r\n              <TouchableOpacity\r\n                style={styles.resetButton}\r\n                onPress={() => {\r\n                  setFilterOptions({ timeRange: \"all\", location: \"\" });\r\n                  setSearchText(\"\");\r\n                  setSortOption(\"dateDesc\");\r\n                }}\r\n              >\r\n                <Text style={styles.resetButtonText}>\r\n                  <Text>Đặt lại</Text>\r\n                </Text>\r\n              </TouchableOpacity>\r\n\r\n              <TouchableOpacity\r\n                style={styles.applyButton}\r\n                onPress={() => setIsFilterModalVisible(false)}\r\n              >\r\n                <Text style={styles.applyButtonText}>\r\n                  <Text>Áp dụng</Text>\r\n                </Text>\r\n              </TouchableOpacity>\r\n            </View>\r\n          </ScrollView>\r\n        </View>\r\n      </View>\r\n    </Modal>\r\n  );\r\n\r\n  const renderItem = ({ item }: { item: Session }) => {\r\n    // Tính tổng chi phí của buổi đánh cầu\r\n    const totalExpense = item.expenses.reduce(\r\n      (sum, expense) => sum + expense.amount,\r\n      0\r\n    );\r\n\r\n    return (\r\n      <TouchableOpacity\r\n        style={styles.sessionItem}\r\n        onPress={() =>\r\n          navigation.navigate(\"SessionDetail\", { sessionId: item.id })\r\n        }\r\n      >\r\n        <View style={styles.sessionHeader}>\r\n          {\" \"}\r\n          <Text style={styles.sessionDate}>\r\n            <Text>\r\n              {format(new Date(item.date), \"EEEE, dd/MM/yyyy\", { locale: vi })}\r\n            </Text>\r\n          </Text>\r\n          <Text style={styles.sessionLocation}>\r\n            <Text>{item.location}</Text>\r\n          </Text>\r\n        </View>\r\n        <View style={styles.sessionInfo}>\r\n          <View style={styles.sessionInfoLeft}>\r\n            <Text style={styles.playerCount}>\r\n              {item.players.length} <Text>người tham gia</Text>\r\n            </Text>\r\n            {item.duration && (\r\n              <Text style={styles.sessionDuration}>\r\n                <Text>\r\n                  {Math.floor(item.duration / 60) > 0\r\n                    ? `${Math.floor(item.duration / 60)} giờ ${\r\n                        item.duration % 60\r\n                      } phút`\r\n                    : `${item.duration} phút`}\r\n                </Text>\r\n              </Text>\r\n            )}\r\n          </View>{\" \"}\r\n          <Text style={styles.expenseAmount}>\r\n            <Text>{formatCurrency(totalExpense)}</Text>\r\n          </Text>\r\n        </View>\r\n      </TouchableOpacity>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.searchContainer}>\r\n        <View style={styles.searchBar}>\r\n          <Ionicons\r\n            name=\"search\"\r\n            size={20}\r\n            color=\"#666\"\r\n            style={styles.searchIcon}\r\n          />\r\n          <TextInput\r\n            style={styles.searchInput}\r\n            placeholder=\"Tìm kiếm theo địa điểm...\"\r\n            value={searchText}\r\n            onChangeText={setSearchText}\r\n          />\r\n          {searchText ? (\r\n            <TouchableOpacity onPress={() => setSearchText(\"\")}>\r\n              <Ionicons name=\"close-circle\" size={18} color=\"#666\" />\r\n            </TouchableOpacity>\r\n          ) : null}\r\n        </View>\r\n\r\n        <TouchableOpacity\r\n          style={styles.filterButton}\r\n          onPress={() => setIsFilterModalVisible(true)}\r\n        >\r\n          <Ionicons name=\"options\" size={20} color=\"#4caf50\" />\r\n        </TouchableOpacity>\r\n      </View>\r\n\r\n      <FlatList\r\n        data={filteredSessions}\r\n        renderItem={renderItem}\r\n        keyExtractor={(item) => item.id}\r\n        contentContainerStyle={styles.listContainer}\r\n        ListEmptyComponent={\r\n          <Text style={styles.emptyText}>\r\n            {isLoading\r\n              ? \"Đang tải...\"\r\n              : filteredSessions.length === 0 && sessions.length > 0\r\n              ? \"Không tìm thấy kết quả nào.\"\r\n              : \"Chưa có buổi đánh cầu nào. Thêm buổi đánh cầu mới!\"}\r\n          </Text>\r\n        }\r\n      />\r\n\r\n      {renderFilterModal()}\r\n\r\n      <TouchableOpacity\r\n        style={styles.addButton}\r\n        onPress={() => navigation.navigate(\"NewSession\")}\r\n      >\r\n        <Text style={styles.addButtonText}>+</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: \"#f5f5f5\",\r\n  },\r\n  searchContainer: {\r\n    flexDirection: \"row\",\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 10,\r\n    backgroundColor: \"white\",\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: \"#eee\",\r\n  },\r\n  searchBar: {\r\n    flex: 1,\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#f0f0f0\",\r\n    borderRadius: 20,\r\n    paddingHorizontal: 12,\r\n    marginRight: 8,\r\n  },\r\n  searchIcon: {\r\n    marginRight: 8,\r\n  },\r\n  searchInput: {\r\n    flex: 1,\r\n    height: 36,\r\n    fontSize: 14,\r\n  },\r\n  filterButton: {\r\n    width: 36,\r\n    height: 36,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    borderWidth: 1,\r\n    borderColor: \"#4caf50\",\r\n    borderRadius: 18,\r\n  },\r\n  listContainer: {\r\n    padding: 16,\r\n    paddingBottom: 80,\r\n  },\r\n  // ... existing session item styles ...\r\n\r\n  // Modal styles\r\n  modalOverlay: {\r\n    flex: 1,\r\n    backgroundColor: \"rgba(0,0,0,0.5)\",\r\n    justifyContent: \"flex-end\",\r\n  },\r\n  modalContainer: {\r\n    backgroundColor: \"white\",\r\n    borderTopLeftRadius: 16,\r\n    borderTopRightRadius: 16,\r\n    maxHeight: \"80%\",\r\n  },\r\n  modalHeader: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 12,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: \"#eee\",\r\n  },\r\n  modalTitle: {\r\n    fontSize: 18,\r\n    fontWeight: \"bold\",\r\n    color: \"#333\",\r\n  },\r\n  modalContent: {\r\n    padding: 16,\r\n  },\r\n  filterLabel: {\r\n    fontSize: 16,\r\n    fontWeight: \"500\",\r\n    marginBottom: 8,\r\n    marginTop: 12,\r\n    color: \"#333\",\r\n  },\r\n  timeRangeButtons: {\r\n    flexDirection: \"row\",\r\n    marginBottom: 16,\r\n  },\r\n  timeRangeButton: {\r\n    flex: 1,\r\n    paddingVertical: 8,\r\n    paddingHorizontal: 12,\r\n    borderRadius: 20,\r\n    borderWidth: 1,\r\n    borderColor: \"#ddd\",\r\n    marginRight: 8,\r\n    alignItems: \"center\",\r\n  },\r\n  timeRangeButtonActive: {\r\n    backgroundColor: \"#4caf50\",\r\n    borderColor: \"#4caf50\",\r\n  },\r\n  timeRangeText: {\r\n    color: \"#555\",\r\n  },\r\n  timeRangeTextActive: {\r\n    color: \"white\",\r\n    fontWeight: \"500\",\r\n  },\r\n  filterInput: {\r\n    borderWidth: 1,\r\n    borderColor: \"#ddd\",\r\n    borderRadius: 8,\r\n    padding: 10,\r\n    marginBottom: 16,\r\n  },\r\n  sortOptions: {\r\n    flexDirection: \"row\",\r\n    flexWrap: \"wrap\",\r\n    marginBottom: 16,\r\n  },\r\n  sortOption: {\r\n    flex: 1,\r\n    paddingVertical: 8,\r\n    paddingHorizontal: 12,\r\n    borderRadius: 20,\r\n    borderWidth: 1,\r\n    borderColor: \"#ddd\",\r\n    marginRight: 8,\r\n    marginBottom: 8,\r\n    alignItems: \"center\",\r\n  },\r\n  sortOptionActive: {\r\n    backgroundColor: \"#4caf50\",\r\n    borderColor: \"#4caf50\",\r\n  },\r\n  sortOptionText: {\r\n    color: \"#555\",\r\n    fontSize: 13,\r\n  },\r\n  sortOptionTextActive: {\r\n    color: \"white\",\r\n    fontWeight: \"500\",\r\n    fontSize: 13,\r\n  },\r\n  filterActions: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"flex-end\",\r\n    marginTop: 16,\r\n  },\r\n  resetButton: {\r\n    paddingVertical: 10,\r\n    paddingHorizontal: 16,\r\n    marginRight: 12,\r\n  },\r\n  resetButtonText: {\r\n    color: \"#666\",\r\n    fontSize: 16,\r\n  },\r\n  applyButton: {\r\n    backgroundColor: \"#4caf50\",\r\n    paddingVertical: 10,\r\n    paddingHorizontal: 20,\r\n    borderRadius: 8,\r\n  },\r\n  applyButtonText: {\r\n    color: \"white\",\r\n    fontWeight: \"500\",\r\n    fontSize: 16,\r\n  },\r\n  emptyText: {\r\n    textAlign: \"center\",\r\n    marginTop: 40,\r\n    fontSize: 16,\r\n    color: \"#666\",\r\n  },\r\n\r\n  // Keep existing styles\r\n  sessionItem: {\r\n    backgroundColor: \"white\",\r\n    borderRadius: 10,\r\n    padding: 16,\r\n    marginBottom: 16,\r\n    elevation: 2,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 1 },\r\n    shadowOpacity: 0.22,\r\n    shadowRadius: 2.22,\r\n  },\r\n  sessionHeader: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    marginBottom: 8,\r\n  },\r\n  sessionDate: {\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n    color: \"#333\",\r\n  },\r\n  sessionLocation: {\r\n    fontSize: 14,\r\n    color: \"#666\",\r\n  },\r\n  sessionInfo: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    marginTop: 8,\r\n  },\r\n  sessionInfoLeft: {\r\n    flexDirection: \"column\",\r\n  },\r\n  playerCount: {\r\n    fontSize: 14,\r\n    color: \"#555\",\r\n  },\r\n  sessionDuration: {\r\n    fontSize: 13,\r\n    color: \"#666\",\r\n    marginTop: 2,\r\n  },\r\n  expenseAmount: {\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n    color: \"#2e7d32\",\r\n  },\r\n  addButton: {\r\n    position: \"absolute\",\r\n    bottom: 20,\r\n    right: 20,\r\n    width: 56,\r\n    height: 56,\r\n    borderRadius: 28,\r\n    backgroundColor: \"#4caf50\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    elevation: 5,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.25,\r\n    shadowRadius: 3.84,\r\n  },\r\n  addButtonText: {\r\n    fontSize: 24,\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n  },\r\n});\r\n\r\nexport default HomeScreen;\r\n","// Định nghĩa các kiểu dữ liệu cho ứng dụng\r\n\r\n// Người tham gia chơi cầu\r\nexport interface Player {\r\n  id: string;\r\n  name: string;\r\n}\r\n\r\n// Loại chi phí\r\nexport enum ExpenseType {\r\n  COURT_FEE = 'court_fee', // Tiền sân\r\n  SHUTTLE = 'shuttle',     // Tiền cầu\r\n  DRINK = 'drink',         // Tiền nước\r\n  EQUIPMENT = 'equipment', // Tiền quấn cán, phụ kiện\r\n  OTHER = 'other',         // Chi phí khác\r\n}\r\n\r\n// Chi phí đơn lẻ\r\nexport interface Expense {\r\n  id: string;\r\n  type: ExpenseType;\r\n  amount: number;\r\n  description: string;\r\n  divideAmong?: string[]; // ID của các người chơi cần chia đều chi phí này. Nếu không có, mặc định chia cho tất cả\r\n}\r\n\r\n// Buổi đánh cầu\r\nexport interface Session {\r\n  id: string;\r\n  date: string; // ISO string\r\n  endTime?: string; // Thời gian kết thúc (ISO string)\r\n  duration?: number; // Thời lượng tính bằng phút\r\n  courtFeePerHour?: number; // Giá thuê sân mỗi giờ\r\n  players: Player[];\r\n  expenses: Expense[];\r\n  location: string;\r\n  notes?: string;\r\n  paymentStatus?: Record<string, boolean>; // Trạng thái thanh toán theo player ID\r\n}\r\n\r\n// Kết quả tính chi phí\r\nexport interface ExpenseCalculation {\r\n  totalAmount: number;\r\n  splitByPlayer: Record<string, number>; // Map player ID -> số tiền cần trả\r\n}\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  TouchableOpacity,\r\n  Modal,\r\n  ScrollView,\r\n  Switch,\r\n  Alert,\r\n} from \"react-native\";\r\nimport { formatCurrency } from \"../utils/expenseUtils\";\r\nimport Ionicons from \"@expo/vector-icons/Ionicons\";\r\n\r\ntype ExpenseDistributionProps = {\r\n  totalAmount: number;\r\n  playerAmounts: {\r\n    id: string;\r\n    name: string;\r\n    amount: number;\r\n  }[];\r\n  onShowPaymentStatus?: () => void;\r\n};\r\n\r\n/**\r\n * Component hiển thị phân bổ chi phí với biểu đồ trực quan\r\n * Cho phép theo dõi trạng thái thanh toán của từng người chơi\r\n */\r\nconst ExpenseDistribution = ({\r\n  totalAmount,\r\n  playerAmounts,\r\n  onShowPaymentStatus,\r\n}: ExpenseDistributionProps) => {\r\n  const [showPaymentModal, setShowPaymentModal] = useState(false);\r\n  const [paymentStatus, setPaymentStatus] = useState<Record<string, boolean>>(\r\n    {}\r\n  );\r\n\r\n  // Sắp xếp người chơi theo số tiền giảm dần\r\n  const sortedPlayers = [...playerAmounts].sort((a, b) => b.amount - a.amount);\r\n\r\n  // Tìm số tiền lớn nhất để tính tỷ lệ\r\n  const maxAmount = Math.max(...playerAmounts.map((p) => p.amount), 1);\r\n  // Toggle payment status for a player\r\n  const togglePaymentStatus = (playerId: string) => {\r\n    setPaymentStatus((prev) => ({\r\n      ...prev,\r\n      [playerId]: !prev[playerId],\r\n    }));\r\n  };\r\n\r\n  // Check if all players have paid\r\n  const allPaid = sortedPlayers.every((player) => paymentStatus[player.id]);\r\n\r\n  // Calculate total amount paid\r\n  const totalPaid = sortedPlayers.reduce((sum, player) => {\r\n    return sum + (paymentStatus[player.id] ? player.amount : 0);\r\n  }, 0);\r\n\r\n  // Calculate remaining amount\r\n  const remainingAmount = totalAmount - totalPaid;\r\n\r\n  // Payment status modal\r\n  const renderPaymentModal = () => (\r\n    <Modal\r\n      visible={showPaymentModal}\r\n      animationType=\"slide\"\r\n      transparent={true}\r\n      onRequestClose={() => setShowPaymentModal(false)}\r\n    >\r\n      <View style={styles.modalOverlay}>\r\n        <View style={styles.modalContainer}>\r\n          <View style={styles.modalHeader}>\r\n            <Text style={styles.modalTitle}>Theo dõi thanh toán</Text>\r\n            <TouchableOpacity onPress={() => setShowPaymentModal(false)}>\r\n              <Ionicons name=\"close\" size={24} color=\"#333\" />\r\n            </TouchableOpacity>\r\n          </View>\r\n\r\n          <ScrollView style={styles.modalContent}>\r\n            {sortedPlayers.map((player) => (\r\n              <View key={player.id} style={styles.paymentRow}>\r\n                <View style={styles.paymentInfo}>\r\n                  <Text style={styles.paymentName}>{player.name}</Text>\r\n                  <Text style={styles.paymentAmount}>\r\n                    {formatCurrency(player.amount)}\r\n                  </Text>\r\n                </View>\r\n\r\n                <Switch\r\n                  value={paymentStatus[player.id] || false}\r\n                  onValueChange={() => togglePaymentStatus(player.id)}\r\n                  trackColor={{ false: \"#e0e0e0\", true: \"#b9dfbb\" }}\r\n                  thumbColor={paymentStatus[player.id] ? \"#4caf50\" : \"#f4f3f4\"}\r\n                />\r\n              </View>\r\n            ))}\r\n\r\n            <View style={styles.paymentSummary}>\r\n              <Text style={styles.summaryTitle}>Tổng quan</Text>\r\n\r\n              <View style={styles.summaryRow}>\r\n                <Text>Tổng chi phí:</Text>\r\n                <Text style={styles.summaryTotal}>\r\n                  {formatCurrency(totalAmount)}\r\n                </Text>\r\n              </View>\r\n\r\n              <View style={styles.summaryRow}>\r\n                <Text>Đã thu:</Text>\r\n                <Text style={styles.summaryPaid}>\r\n                  {formatCurrency(totalPaid)}\r\n                </Text>\r\n              </View>\r\n\r\n              <View style={styles.summaryRow}>\r\n                <Text>Còn lại:</Text>\r\n                <Text style={styles.summaryRemaining}>\r\n                  {formatCurrency(remainingAmount)}\r\n                </Text>\r\n              </View>\r\n            </View>\r\n          </ScrollView>\r\n        </View>\r\n      </View>\r\n    </Modal>\r\n  );\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.header}>\r\n        <Text style={styles.title}>Phân bổ chi phí</Text>\r\n        <TouchableOpacity\r\n          style={styles.paymentButton}\r\n          onPress={() => setShowPaymentModal(true)}\r\n        >\r\n          <Text style={styles.paymentButtonText}>Theo dõi thanh toán</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n\r\n      <Text style={styles.totalText}>\r\n        Tổng chi phí: {formatCurrency(totalAmount)}\r\n        {remainingAmount > 0 && totalPaid > 0 && (\r\n          <Text style={styles.remainingText}>\r\n            {\" \"}\r\n            (Còn thiếu: {formatCurrency(remainingAmount)})\r\n          </Text>\r\n        )}\r\n      </Text>\r\n\r\n      <View style={styles.chartContainer}>\r\n        {sortedPlayers.map((player) => {\r\n          // Calculate percentage for visual reference\r\n          const barWidthPercent = Math.max(\r\n            (player.amount / maxAmount) * 100,\r\n            5\r\n          );\r\n          // Use flex to control the width instead of percentage string\r\n          const barWidthFlex = barWidthPercent / 100;\r\n\r\n          // Check payment status\r\n          const isPaid = paymentStatus[player.id] || false;\r\n\r\n          return (\r\n            <TouchableOpacity\r\n              key={player.id}\r\n              style={styles.barRow}\r\n              onPress={() => togglePaymentStatus(player.id)}\r\n            >\r\n              <View style={styles.nameContainer}>\r\n                {isPaid && (\r\n                  <Ionicons\r\n                    name=\"checkmark-circle\"\r\n                    size={16}\r\n                    color=\"#4caf50\"\r\n                    style={styles.paidIcon}\r\n                  />\r\n                )}\r\n                <Text\r\n                  style={[styles.nameText, isPaid && styles.paidText]}\r\n                  numberOfLines={1}\r\n                  ellipsizeMode=\"tail\"\r\n                >\r\n                  {player.name}\r\n                </Text>\r\n              </View>\r\n\r\n              <View style={styles.barContainer}>\r\n                <View\r\n                  style={[\r\n                    styles.bar,\r\n                    { flex: barWidthFlex },\r\n                    isPaid && styles.paidBar,\r\n                  ]}\r\n                />\r\n                <Text style={[styles.amountText, isPaid && styles.paidAmount]}>\r\n                  {formatCurrency(player.amount)}\r\n                </Text>\r\n              </View>\r\n            </TouchableOpacity>\r\n          );\r\n        })}\r\n      </View>\r\n\r\n      <Text style={styles.note}>\r\n        Nhấn vào người chơi để đánh dấu đã thanh toán\r\n      </Text>\r\n\r\n      {renderPaymentModal()}\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    backgroundColor: \"#fff\",\r\n    borderRadius: 12,\r\n    padding: 16,\r\n    marginVertical: 8,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.1,\r\n    shadowRadius: 4,\r\n    elevation: 3,\r\n  },\r\n  header: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    marginBottom: 8,\r\n  },\r\n  title: {\r\n    fontSize: 18,\r\n    fontWeight: \"bold\",\r\n    color: \"#333\",\r\n  },\r\n  paymentButton: {\r\n    backgroundColor: \"#4caf50\",\r\n    paddingVertical: 6,\r\n    paddingHorizontal: 12,\r\n    borderRadius: 16,\r\n  },\r\n  paymentButtonText: {\r\n    color: \"white\",\r\n    fontSize: 12,\r\n    fontWeight: \"500\",\r\n  },\r\n  totalText: {\r\n    fontSize: 16,\r\n    color: \"#555\",\r\n    marginBottom: 16,\r\n  },\r\n  remainingText: {\r\n    color: \"#e53935\",\r\n  },\r\n  chartContainer: {\r\n    marginVertical: 12,\r\n  },\r\n  barRow: {\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    marginBottom: 12,\r\n  },\r\n  nameContainer: {\r\n    width: \"28%\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n  },\r\n  paidIcon: {\r\n    marginRight: 4,\r\n  },\r\n  nameText: {\r\n    fontSize: 14,\r\n    color: \"#444\",\r\n    marginRight: 8,\r\n    flex: 1,\r\n  },\r\n  barContainer: {\r\n    flex: 1,\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n  },\r\n  bar: {\r\n    height: 20,\r\n    backgroundColor: \"#4caf50\",\r\n    borderRadius: 4,\r\n    marginRight: 8,\r\n  },\r\n  amountText: {\r\n    fontSize: 14,\r\n    fontWeight: \"500\",\r\n    color: \"#333\",\r\n  },\r\n  paidText: {\r\n    color: \"#4caf50\",\r\n    textDecorationLine: \"line-through\",\r\n    textDecorationStyle: \"solid\",\r\n  },\r\n  paidBar: {\r\n    backgroundColor: \"#a5d6a7\", // lighter green\r\n    opacity: 0.7,\r\n  },\r\n  paidAmount: {\r\n    color: \"#4caf50\",\r\n  },\r\n  note: {\r\n    fontSize: 12,\r\n    color: \"#888\",\r\n    marginTop: 8,\r\n    fontStyle: \"italic\",\r\n  },\r\n  // Modal styles\r\n  modalOverlay: {\r\n    flex: 1,\r\n    backgroundColor: \"rgba(0,0,0,0.5)\",\r\n    justifyContent: \"flex-end\",\r\n  },\r\n  modalContainer: {\r\n    backgroundColor: \"white\",\r\n    borderTopLeftRadius: 16,\r\n    borderTopRightRadius: 16,\r\n    maxHeight: \"80%\",\r\n  },\r\n  modalHeader: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 12,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: \"#eee\",\r\n  },\r\n  modalTitle: {\r\n    fontSize: 18,\r\n    fontWeight: \"bold\",\r\n    color: \"#333\",\r\n  },\r\n  modalContent: {\r\n    padding: 16,\r\n  },\r\n  paymentRow: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    paddingVertical: 12,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: \"#eee\",\r\n  },\r\n  paymentInfo: {\r\n    flex: 1,\r\n  },\r\n  paymentName: {\r\n    fontSize: 16,\r\n    fontWeight: \"500\",\r\n    color: \"#333\",\r\n  },\r\n  paymentAmount: {\r\n    fontSize: 14,\r\n    color: \"#666\",\r\n    marginTop: 2,\r\n  },\r\n  paymentSummary: {\r\n    marginTop: 24,\r\n    paddingTop: 16,\r\n    borderTopWidth: 1,\r\n    borderTopColor: \"#eee\",\r\n  },\r\n  summaryTitle: {\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n    marginBottom: 12,\r\n    color: \"#333\",\r\n  },\r\n  summaryRow: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    paddingVertical: 8,\r\n  },\r\n  summaryTotal: {\r\n    fontWeight: \"500\",\r\n    color: \"#333\",\r\n  },\r\n  summaryPaid: {\r\n    color: \"#4caf50\",\r\n    fontWeight: \"500\",\r\n  },\r\n  summaryRemaining: {\r\n    color: \"#e53935\",\r\n    fontWeight: \"500\",\r\n  },\r\n});\r\n\r\nexport default ExpenseDistribution;\r\n","import React from \"react\";\r\nimport { TouchableOpacity, Text, StyleSheet, Share, View } from \"react-native\";\r\nimport Ionicons from \"@expo/vector-icons/Ionicons\";\r\nimport { Session } from \"../models/types\";\r\nimport { formatCurrency } from \"../utils/expenseUtils\";\r\nimport { format } from \"date-fns\";\r\n\r\ntype ShareButtonProps = {\r\n  session: Session;\r\n  calculatedExpenses: {\r\n    totalAmount: number;\r\n    splitByPlayer: Record<string, number>;\r\n  };\r\n};\r\n\r\nconst ShareButton = ({ session, calculatedExpenses }: ShareButtonProps) => {\r\n  const handleShare = async () => {\r\n    try {\r\n      // Chuẩn bị nội dung tin nhắn\r\n      const date = format(new Date(session.date), \"dd/MM/yyyy\");\r\n      const time = format(new Date(session.date), \"HH:mm\");\r\n\r\n      let message = `📋 BÁO CÁO CHI PHÍ CẦU LÔNG\\n\\n`;\r\n      message += `🗓️ Ngày: ${date}\\n`;\r\n      message += `🕒 Giờ: ${time}\\n`;\r\n      message += `📍 Địa điểm: ${session.location}\\n`;\r\n      message += `👥 Số người tham gia: ${session.players.length} người\\n`;\r\n\r\n      if (session.notes) {\r\n        message += `📝 Ghi chú: ${session.notes}\\n`;\r\n      }\r\n\r\n      message += `\\n----------------------\\n\\n`;\r\n\r\n      // Thêm danh sách chi tiết chi phí\r\n      message += `🧾 CHI TIẾT CÁC KHOẢN CHI:\\n\\n`;\r\n      session.expenses.forEach((expense, index) => {\r\n        const expenseType = getExpenseTypeLabel(expense.type);\r\n        message += `${index + 1}. ${expenseType}: ${formatCurrency(\r\n          expense.amount\r\n        )}`;\r\n        if (expense.description) {\r\n          message += ` (${expense.description})`;\r\n        }\r\n\r\n        // Thêm thông tin về người chia sẻ chi phí này\r\n        if (\r\n          expense.divideAmong &&\r\n          expense.divideAmong.length > 0 &&\r\n          expense.divideAmong.length < session.players.length\r\n        ) {\r\n          const playerNames = expense.divideAmong\r\n            .map((id) => session.players.find((p) => p.id === id)?.name || \"\")\r\n            .filter((name) => name)\r\n            .join(\", \");\r\n          message += `\\n   → Chia cho: ${playerNames}`;\r\n        }\r\n\r\n        message += \"\\n\\n\";\r\n      });\r\n\r\n      message += `----------------------\\n\\n`;\r\n      message += `💰 TỔNG CHI PHÍ: ${formatCurrency(\r\n        calculatedExpenses.totalAmount\r\n      )}\\n\\n`;\r\n\r\n      // Thêm chi phí mỗi người cần trả\r\n      message += `💸 CHI PHÍ MỖI NGƯỜI:\\n\\n`;\r\n\r\n      // Sắp xếp theo tên người chơi\r\n      const sortedPlayers = [...session.players].sort((a, b) =>\r\n        a.name.localeCompare(b.name)\r\n      );\r\n\r\n      sortedPlayers.forEach((player) => {\r\n        const amount = calculatedExpenses.splitByPlayer[player.id] || 0;\r\n        message += `• ${player.name}: ${formatCurrency(amount)}\\n`;\r\n      });\r\n\r\n      // Chia sẻ tin nhắn\r\n      await Share.share({\r\n        message,\r\n        title: `Chi phí đánh cầu lông ngày ${date}`,\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Lỗi khi chia sẻ:\", error);\r\n    }\r\n  };\r\n\r\n  // Hàm lấy tên loại chi phí\r\n  const getExpenseTypeLabel = (type: string): string => {\r\n    switch (type) {\r\n      case \"court_fee\":\r\n        return \"Tiền sân\";\r\n      case \"shuttle\":\r\n        return \"Tiền cầu\";\r\n      case \"drink\":\r\n        return \"Tiền nước\";\r\n      case \"equipment\":\r\n        return \"Tiền phụ kiện\";\r\n      case \"other\":\r\n        return \"Chi phí khác\";\r\n      default:\r\n        return \"Chi phí\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TouchableOpacity style={styles.shareButton} onPress={handleShare}>\r\n      <Ionicons name=\"share-social-outline\" size={20} color=\"white\" />\r\n      <Text style={styles.shareText}>Chia sẻ chi phí</Text>\r\n    </TouchableOpacity>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  shareButton: {\r\n    backgroundColor: \"#2196f3\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    paddingVertical: 12,\r\n    paddingHorizontal: 16,\r\n    borderRadius: 8,\r\n    marginVertical: 8,\r\n  },\r\n  shareText: {\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n    fontSize: 16,\r\n    marginLeft: 8,\r\n  },\r\n});\r\n\r\nexport default ShareButton;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  TouchableOpacity,\r\n  Alert,\r\n  ScrollView,\r\n  ActivityIndicator,\r\n} from \"react-native\";\r\nimport { useNavigation, useRoute, RouteProp } from \"@react-navigation/native\";\r\nimport { format } from \"date-fns\";\r\nimport { vi } from \"date-fns/locale\";\r\nimport { getSessions, deleteSession } from \"../services/storageService\";\r\nimport { Session, Player, Expense, ExpenseType } from \"../models/types\";\r\nimport { calculateExpenses, formatCurrency } from \"../utils/expenseUtils\";\r\nimport ExpenseDistribution from \"../components/ExpenseDistribution\";\r\nimport ShareButton from \"../components/ShareButton\";\r\n\r\ntype RouteParams = {\r\n  SessionDetail: {\r\n    sessionId: string;\r\n  };\r\n};\r\n\r\nconst SessionDetailScreen = () => {\r\n  const navigation = useNavigation<any>();\r\n  const route = useRoute<RouteProp<RouteParams, \"SessionDetail\">>();\r\n  const { sessionId } = route.params;\r\n\r\n  const [session, setSession] = useState<Session | null>(null);\r\n  const [calculatedExpenses, setCalculatedExpenses] = useState<{\r\n    totalAmount: number;\r\n    splitByPlayer: Record<string, number>;\r\n  } | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadSessionDetails();\r\n  }, [sessionId]);\r\n\r\n  const loadSessionDetails = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const sessions = await getSessions();\r\n      const currentSession = sessions.find((s) => s.id === sessionId);\r\n\r\n      if (currentSession) {\r\n        setSession(currentSession);\r\n        const calculated = calculateExpenses(currentSession);\r\n        setCalculatedExpenses(calculated);\r\n      } else {\r\n        Alert.alert(\"Lỗi\", \"Không tìm thấy thông tin buổi đánh cầu\");\r\n        navigation.goBack();\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Lỗi khi tải chi tiết buổi đánh cầu:\", error);\r\n      Alert.alert(\"Lỗi\", \"Không thể tải thông tin buổi đánh cầu\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    Alert.alert(\r\n      \"Xác nhận xóa\",\r\n      \"Bạn có chắc chắn muốn xóa buổi đánh cầu này không?\",\r\n      [\r\n        { text: \"Hủy\", style: \"cancel\" },\r\n        {\r\n          text: \"Xóa\",\r\n          style: \"destructive\",\r\n          onPress: async () => {\r\n            try {\r\n              await deleteSession(sessionId);\r\n              navigation.goBack();\r\n            } catch (error) {\r\n              Alert.alert(\"Lỗi\", \"Không thể xóa buổi đánh cầu\");\r\n            }\r\n          },\r\n        },\r\n      ]\r\n    );\r\n  };\r\n\r\n  const getExpenseTypeLabel = (type: ExpenseType): string => {\r\n    switch (type) {\r\n      case ExpenseType.COURT_FEE:\r\n        return \"Tiền sân\";\r\n      case ExpenseType.SHUTTLE:\r\n        return \"Tiền cầu\";\r\n      case ExpenseType.DRINK:\r\n        return \"Tiền nước\";\r\n      case ExpenseType.EQUIPMENT:\r\n        return \"Tiền phụ kiện\";\r\n      case ExpenseType.OTHER:\r\n        return \"Chi phí khác\";\r\n      default:\r\n        return \"Chi phí\";\r\n    }\r\n  };\r\n  const getExpenseTypeColor = (type: ExpenseType): string => {\r\n    switch (type) {\r\n      case ExpenseType.COURT_FEE:\r\n        return \"#4caf50\"; // Xanh lá\r\n      case ExpenseType.SHUTTLE:\r\n        return \"#2196f3\"; // Xanh dương\r\n      case ExpenseType.DRINK:\r\n        return \"#ff9800\"; // Cam\r\n      case ExpenseType.EQUIPMENT:\r\n        return \"#9c27b0\"; // Tím\r\n      case ExpenseType.OTHER:\r\n        return \"#e91e63\"; // Hồng đậm - màu nổi bật hơn cho chi phí khác\r\n      default:\r\n        return \"#607d8b\"; // Xám xanh\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <View style={[styles.container, styles.center]}>\r\n        <ActivityIndicator size=\"large\" color=\"#4caf50\" />\r\n      </View>\r\n    );\r\n  }\r\n\r\n  if (!session || !calculatedExpenses) {\r\n    return (\r\n      <View style={[styles.container, styles.center]}>\r\n        <Text>Không tìm thấy thông tin</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <ScrollView contentContainerStyle={styles.scrollContent}>\r\n        {\" \"}\r\n        <View style={styles.header}>\r\n          <Text style={styles.dateText}>\r\n            {format(new Date(session.date), \"EEEE, dd/MM/yyyy\", { locale: vi })}\r\n          </Text>\r\n          <View style={styles.timeInfo}>\r\n            <Text style={styles.timeText}>\r\n              Thời gian: {format(new Date(session.date), \"HH:mm\")}\r\n              {session.endTime\r\n                ? ` - ${format(new Date(session.endTime), \"HH:mm\")}`\r\n                : \"\"}\r\n            </Text>\r\n            {session.duration && (\r\n              <Text style={styles.durationText}>\r\n                Thời lượng:{\" \"}\r\n                {Math.floor(session.duration / 60) > 0\r\n                  ? `${Math.floor(session.duration / 60)} giờ ${\r\n                      session.duration % 60\r\n                    } phút`\r\n                  : `${session.duration} phút`}\r\n              </Text>\r\n            )}\r\n          </View>\r\n          <Text style={styles.locationText}>{session.location}</Text>\r\n          {session.notes && (\r\n            <Text style={styles.notesText}>{session.notes}</Text>\r\n          )}\r\n        </View>\r\n        <View style={styles.section}>\r\n          <Text style={styles.sectionTitle}>Danh sách chi phí</Text>{\" \"}\r\n          {session.expenses.map((expense) => {\r\n            // Xác định màu sắc theo loại chi phí\r\n            const expenseTypeColor = getExpenseTypeColor(expense.type);\r\n            const hasCustomDivision =\r\n              expense.divideAmong && expense.divideAmong.length > 0;\r\n\r\n            return (\r\n              <View\r\n                key={expense.id}\r\n                style={[\r\n                  styles.expenseItem,\r\n                  { borderLeftColor: expenseTypeColor, borderLeftWidth: 4 },\r\n                ]}\r\n              >\r\n                <View style={styles.expenseHeader}>\r\n                  <View style={styles.expenseTypeContainer}>\r\n                    <Text\r\n                      style={[styles.expenseType, { color: expenseTypeColor }]}\r\n                    >\r\n                      {getExpenseTypeLabel(expense.type)}\r\n                    </Text>\r\n                    {hasCustomDivision && (\r\n                      <View\r\n                        style={[\r\n                          styles.customBadge,\r\n                          { backgroundColor: expenseTypeColor },\r\n                        ]}\r\n                      >\r\n                        <Text style={styles.customBadgeText}>Tùy chỉnh</Text>\r\n                      </View>\r\n                    )}\r\n                  </View>\r\n                  <Text\r\n                    style={[\r\n                      styles.expenseAmount,\r\n                      expense.type === ExpenseType.OTHER\r\n                        ? { fontWeight: \"bold\" }\r\n                        : {},\r\n                    ]}\r\n                  >\r\n                    {formatCurrency(expense.amount)}\r\n                  </Text>\r\n                </View>\r\n\r\n                {expense.description && (\r\n                  <Text\r\n                    style={[\r\n                      styles.expenseDescription,\r\n                      expense.type === ExpenseType.OTHER\r\n                        ? { fontStyle: \"italic\" }\r\n                        : {},\r\n                    ]}\r\n                  >\r\n                    {\" \"}\r\n                    <Text>{expense.description}</Text>\r\n                  </Text>\r\n                )}\r\n\r\n                {/* Display the specific players for custom expense division */}\r\n                {hasCustomDivision && (\r\n                  <View\r\n                    style={[\r\n                      styles.expensePlayers,\r\n                      { backgroundColor: `${expenseTypeColor}08` },\r\n                    ]}\r\n                  >\r\n                    <Text style={styles.expensePlayersLabel}>\r\n                      Chi phí này được chia cho:\r\n                    </Text>\r\n                    <View style={styles.expensePlayersList}>\r\n                      {expense.divideAmong.map((playerId) => {\r\n                        const player = session.players.find(\r\n                          (p) => p.id === playerId\r\n                        );\r\n                        return player ? (\r\n                          <Text\r\n                            key={playerId}\r\n                            style={[\r\n                              styles.expensePlayerName,\r\n                              {\r\n                                backgroundColor: `${expenseTypeColor}15`,\r\n                                borderColor: expenseTypeColor,\r\n                                color: expenseTypeColor,\r\n                              },\r\n                            ]}\r\n                          >\r\n                            {player.name}\r\n                          </Text>\r\n                        ) : null;\r\n                      })}\r\n                    </View>\r\n                  </View>\r\n                )}\r\n              </View>\r\n            );\r\n          })}\r\n          <View style={styles.totalExpense}>\r\n            <Text style={styles.totalExpenseLabel}>Tổng chi phí:</Text>{\" \"}\r\n            <Text style={styles.totalExpenseAmount}>\r\n              <Text>{formatCurrency(calculatedExpenses.totalAmount)}</Text>\r\n            </Text>\r\n          </View>\r\n        </View>{\" \"}\r\n        <View style={styles.section}>\r\n          <Text style={styles.sectionTitle}>\r\n            Người tham gia ({session.players.length})\r\n          </Text>\r\n          {session.players.map((player) => (\r\n            <View key={player.id} style={styles.playerItem}>\r\n              <Text style={styles.playerName}>{player.name}</Text>{\" \"}\r\n              <Text style={styles.playerAmount}>\r\n                <Text>\r\n                  {formatCurrency(\r\n                    calculatedExpenses.splitByPlayer[player.id] || 0\r\n                  )}\r\n                </Text>\r\n              </Text>\r\n            </View>\r\n          ))}\r\n        </View>\r\n        <ExpenseDistribution\r\n          totalAmount={calculatedExpenses.totalAmount}\r\n          playerAmounts={session.players.map((player) => ({\r\n            id: player.id,\r\n            name: player.name,\r\n            amount: calculatedExpenses.splitByPlayer[player.id] || 0,\r\n          }))}\r\n        />{\" \"}\r\n        <ShareButton\r\n          session={session}\r\n          calculatedExpenses={calculatedExpenses}\r\n        />\r\n        <View style={styles.buttonContainer}>\r\n          <TouchableOpacity\r\n            style={[styles.button, styles.editButton]}\r\n            onPress={() =>\r\n              navigation.navigate(\"EditSession\", { sessionId: session.id })\r\n            }\r\n          >\r\n            <Text style={styles.buttonText}>Chỉnh sửa</Text>\r\n          </TouchableOpacity>\r\n\r\n          <TouchableOpacity\r\n            style={[styles.button, styles.deleteButton]}\r\n            onPress={handleDelete}\r\n          >\r\n            <Text style={styles.buttonText}>Xóa</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </ScrollView>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: \"#f5f5f5\",\r\n  },\r\n  center: {\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  scrollContent: {\r\n    padding: 16,\r\n  },\r\n  header: {\r\n    backgroundColor: \"white\",\r\n    borderRadius: 10,\r\n    padding: 16,\r\n    marginBottom: 16,\r\n    elevation: 2,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 1 },\r\n    shadowOpacity: 0.22,\r\n    shadowRadius: 2.22,\r\n  },\r\n  dateText: {\r\n    fontSize: 18,\r\n    fontWeight: \"bold\",\r\n    color: \"#333\",\r\n    marginBottom: 4,\r\n  },\r\n  locationText: {\r\n    fontSize: 16,\r\n    color: \"#555\",\r\n    marginBottom: 8,\r\n  },\r\n  notesText: {\r\n    fontSize: 14,\r\n    color: \"#777\",\r\n    fontStyle: \"italic\",\r\n  },\r\n  timeInfo: {\r\n    marginVertical: 8,\r\n  },\r\n  timeText: {\r\n    fontSize: 15,\r\n    color: \"#555\",\r\n    marginBottom: 4,\r\n  },\r\n  durationText: {\r\n    fontSize: 15,\r\n    color: \"#555\",\r\n    marginBottom: 4,\r\n  },\r\n  section: {\r\n    backgroundColor: \"white\",\r\n    borderRadius: 10,\r\n    padding: 16,\r\n    marginBottom: 16,\r\n    elevation: 2,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 1 },\r\n    shadowOpacity: 0.22,\r\n    shadowRadius: 2.22,\r\n  },\r\n  sectionTitle: {\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n    color: \"#333\",\r\n    marginBottom: 12,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: \"#eee\",\r\n    paddingBottom: 8,\r\n  },\r\n  expenseItem: {\r\n    marginBottom: 15,\r\n    paddingBottom: 12,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: \"#eeeeee\",\r\n    backgroundColor: \"#ffffff\",\r\n    borderRadius: 10,\r\n    padding: 12,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.1,\r\n    shadowRadius: 3,\r\n    elevation: 2,\r\n  },\r\n  expenseHeader: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    marginBottom: 2,\r\n  },\r\n  expenseTypeContainer: {\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    flex: 1,\r\n  },\r\n  expenseType: {\r\n    fontSize: 16,\r\n    fontWeight: \"600\",\r\n    color: \"#444\",\r\n  },\r\n  expenseAmount: {\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n    color: \"#2e7d32\",\r\n  },\r\n  expenseDescription: {\r\n    fontSize: 14,\r\n    color: \"#666\",\r\n    marginTop: 6,\r\n    paddingTop: 6,\r\n    paddingBottom: 2,\r\n    borderTopWidth: 1,\r\n    borderTopColor: \"#f8f8f8\",\r\n  },\r\n  customBadge: {\r\n    backgroundColor: \"#4caf50\",\r\n    paddingHorizontal: 8,\r\n    paddingVertical: 3,\r\n    borderRadius: 12,\r\n    marginLeft: 8,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 1 },\r\n    shadowOpacity: 0.2,\r\n    shadowRadius: 1,\r\n    elevation: 1,\r\n  },\r\n  customBadgeText: {\r\n    color: \"white\",\r\n    fontSize: 10,\r\n    fontWeight: \"bold\",\r\n    textShadowColor: \"rgba(0,0,0,0.2)\",\r\n    textShadowOffset: { width: 0, height: 1 },\r\n    textShadowRadius: 1,\r\n  },\r\n  expensePlayers: {\r\n    marginTop: 8,\r\n    backgroundColor: \"#fafafa\",\r\n    borderRadius: 8,\r\n    padding: 10,\r\n    borderWidth: 1,\r\n    borderColor: \"#eaeaea\",\r\n  },\r\n  expensePlayersLabel: {\r\n    fontSize: 12,\r\n    color: \"#666\",\r\n    fontStyle: \"italic\",\r\n    marginBottom: 6,\r\n    fontWeight: \"500\",\r\n  },\r\n  expensePlayersList: {\r\n    flexDirection: \"row\",\r\n    flexWrap: \"wrap\",\r\n    marginTop: 4,\r\n  },\r\n  expensePlayerName: {\r\n    fontSize: 12,\r\n    color: \"#4caf50\",\r\n    backgroundColor: \"#f0fff0\",\r\n    borderWidth: 1,\r\n    borderColor: \"#4caf50\",\r\n    borderRadius: 6,\r\n    paddingVertical: 4,\r\n    paddingHorizontal: 8,\r\n    marginRight: 8,\r\n    marginBottom: 6,\r\n    fontWeight: \"500\",\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 1 },\r\n    shadowOpacity: 0.1,\r\n    shadowRadius: 1,\r\n    elevation: 1,\r\n  },\r\n  totalExpense: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    marginTop: 8,\r\n    paddingTop: 12,\r\n    borderTopWidth: 1,\r\n    borderTopColor: \"#eee\",\r\n  },\r\n  totalExpenseLabel: {\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n    color: \"#333\",\r\n  },\r\n  totalExpenseAmount: {\r\n    fontSize: 18,\r\n    fontWeight: \"bold\",\r\n    color: \"#2e7d32\",\r\n  },\r\n  playerItem: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    paddingVertical: 8,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: \"#f0f0f0\",\r\n  },\r\n  playerName: {\r\n    fontSize: 15,\r\n    fontWeight: \"500\",\r\n    color: \"#444\",\r\n  },\r\n  playerAmount: {\r\n    fontSize: 15,\r\n    fontWeight: \"500\",\r\n    color: \"#2e7d32\",\r\n  },\r\n  buttonContainer: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    marginTop: 8,\r\n    marginBottom: 24,\r\n  },\r\n  button: {\r\n    flex: 1,\r\n    padding: 14,\r\n    borderRadius: 8,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    marginHorizontal: 6,\r\n  },\r\n  editButton: {\r\n    backgroundColor: \"#2196f3\",\r\n  },\r\n  deleteButton: {\r\n    backgroundColor: \"#f44336\",\r\n  },\r\n  buttonText: {\r\n    color: \"white\",\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n  },\r\n  modalButton: {\r\n    backgroundColor: \"#4caf50\",\r\n    paddingVertical: 10,\r\n    paddingHorizontal: 20,\r\n    borderRadius: 4,\r\n    marginHorizontal: 8,\r\n  },\r\n  modalButtonText: {\r\n    color: \"#fff\",\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n  },\r\n});\r\n\r\nexport default SessionDetailScreen;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  ScrollView,\r\n  Alert,\r\n} from \"react-native\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport DateTimePicker from \"@react-native-community/datetimepicker\";\r\nimport { format } from \"date-fns\";\r\nimport { vi } from \"date-fns/locale\";\r\nimport { getPlayers, addPlayer, addSession } from \"../services/storageService\";\r\nimport { ExpenseType, Player, Expense } from \"../models/types\";\r\nimport { generateId, formatCurrency } from \"../utils/expenseUtils\";\r\n\r\nconst NewSessionScreen = () => {\r\n  const navigation = useNavigation<any>();\r\n  const [date, setDate] = useState(new Date());\r\n  const [endTime, setEndTime] = useState<Date | null>(null);\r\n  const [location, setLocation] = useState(\"\");\r\n  const [notes, setNotes] = useState(\"\");\r\n  const [courtFeePerHour, setCourtFeePerHour] = useState(\"\");\r\n  const [showDatePicker, setShowDatePicker] = useState(false);\r\n  const [showEndTimePicker, setShowEndTimePicker] = useState(false);\r\n\r\n  const [allPlayers, setAllPlayers] = useState<Player[]>([]);\r\n  const [selectedPlayers, setSelectedPlayers] = useState<string[]>([]);\r\n  const [newPlayerName, setNewPlayerName] = useState(\"\");\r\n\r\n  const [expenses, setExpenses] = useState<Expense[]>([]);\r\n  const [currentExpense, setCurrentExpense] = useState<{\r\n    type: ExpenseType;\r\n    amount: string;\r\n    description: string;\r\n    divideAmong?: string[];\r\n  }>({\r\n    type: ExpenseType.COURT_FEE,\r\n    amount: \"\",\r\n    description: \"\",\r\n    divideAmong: [],\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadPlayers();\r\n  }, []);\r\n\r\n  const loadPlayers = async () => {\r\n    try {\r\n      const players = await getPlayers();\r\n      setAllPlayers(players);\r\n    } catch (error) {\r\n      console.error(\"Lỗi khi tải danh sách người chơi:\", error);\r\n    }\r\n  };\r\n  const onChangeDate = (event: any, selectedDate?: Date) => {\r\n    setShowDatePicker(false);\r\n    if (selectedDate) {\r\n      setDate(selectedDate);\r\n    }\r\n  };\r\n\r\n  // Handle end time selection\r\n  const handleEndTimeChange = (event: any, selectedDate?: Date) => {\r\n    setShowEndTimePicker(false);\r\n    if (selectedDate) {\r\n      setEndTime(selectedDate);\r\n    }\r\n  };\r\n\r\n  const handleAddPlayer = async () => {\r\n    if (!newPlayerName.trim()) {\r\n      Alert.alert(\"Lỗi\", \"Vui lòng nhập tên người chơi\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const newPlayer = await addPlayer(newPlayerName.trim());\r\n      setAllPlayers([...allPlayers, newPlayer]);\r\n      setSelectedPlayers([...selectedPlayers, newPlayer.id]);\r\n      setNewPlayerName(\"\");\r\n    } catch (error) {\r\n      Alert.alert(\"Lỗi\", \"Không thể thêm người chơi mới\");\r\n    }\r\n  };\r\n\r\n  const togglePlayerSelection = (playerId: string) => {\r\n    if (selectedPlayers.includes(playerId)) {\r\n      setSelectedPlayers(selectedPlayers.filter((id) => id !== playerId));\r\n    } else {\r\n      setSelectedPlayers([...selectedPlayers, playerId]);\r\n    }\r\n  };\r\n  const handleAddExpense = () => {\r\n    if (!currentExpense.amount || parseFloat(currentExpense.amount) <= 0) {\r\n      Alert.alert(\"Lỗi\", \"Vui lòng nhập số tiền hợp lệ\");\r\n      return;\r\n    }\r\n\r\n    // For non-general expense types, check if players are selected\r\n    if (\r\n      shouldShowPlayerSelection(currentExpense.type) &&\r\n      (!currentExpense.divideAmong || currentExpense.divideAmong.length === 0)\r\n    ) {\r\n      Alert.alert(\r\n        \"Chưa chọn người tham gia\",\r\n        \"Vui lòng chọn ít nhất một người tham gia để chi trả chi phí này.\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    const newExpense: Expense = {\r\n      id: generateId(),\r\n      type: currentExpense.type,\r\n      amount: parseFloat(currentExpense.amount),\r\n      description: currentExpense.description,\r\n      divideAmong: currentExpense.divideAmong?.length\r\n        ? currentExpense.divideAmong\r\n        : undefined,\r\n    };\r\n\r\n    setExpenses([...expenses, newExpense]);\r\n    setCurrentExpense({\r\n      type: ExpenseType.COURT_FEE,\r\n      amount: \"\",\r\n      description: \"\",\r\n      divideAmong: [],\r\n    });\r\n  };\r\n\r\n  const removeExpense = (id: string) => {\r\n    setExpenses(expenses.filter((expense) => expense.id !== id));\r\n  };\r\n\r\n  const getExpenseTypeLabel = (type: ExpenseType): string => {\r\n    switch (type) {\r\n      case ExpenseType.COURT_FEE:\r\n        return \"Tiền sân\";\r\n      case ExpenseType.SHUTTLE:\r\n        return \"Tiền cầu\";\r\n      case ExpenseType.DRINK:\r\n        return \"Tiền nước\";\r\n      case ExpenseType.EQUIPMENT:\r\n        return \"Tiền phụ kiện\";\r\n      case ExpenseType.OTHER:\r\n        return \"Chi phí khác\";\r\n      default:\r\n        return \"Chi phí\";\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!location.trim()) {\r\n      Alert.alert(\"Lỗi\", \"Vui lòng nhập địa điểm đánh cầu\");\r\n      return;\r\n    }\r\n\r\n    if (selectedPlayers.length === 0) {\r\n      Alert.alert(\"Lỗi\", \"Vui lòng chọn ít nhất một người tham gia\");\r\n      return;\r\n    }\r\n\r\n    if (expenses.length === 0) {\r\n      Alert.alert(\"Lỗi\", \"Vui lòng thêm ít nhất một khoản chi phí\");\r\n      return;\r\n    }\r\n    try {\r\n      const selectedPlayerObjects = allPlayers.filter((p) =>\r\n        selectedPlayers.includes(p.id)\r\n      ); // Calculate duration if end time is set\r\n      const duration = calculateDuration();\r\n\r\n      // Parse court fee per hour if provided\r\n      const hourlyFee = courtFeePerHour\r\n        ? parseFloat(courtFeePerHour)\r\n        : undefined;\r\n\r\n      await addSession({\r\n        date: date.toISOString(),\r\n        endTime: endTime ? endTime.toISOString() : undefined,\r\n        duration: duration,\r\n        courtFeePerHour: hourlyFee,\r\n        location: location.trim(),\r\n        notes: notes.trim() || undefined,\r\n        players: selectedPlayerObjects,\r\n        expenses: expenses,\r\n      });\r\n\r\n      Alert.alert(\"Thành công\", \"Đã thêm buổi đánh cầu mới\", [\r\n        { text: \"OK\", onPress: () => navigation.goBack() },\r\n      ]);\r\n    } catch (error) {\r\n      Alert.alert(\"Lỗi\", \"Không thể lưu buổi đánh cầu\");\r\n    }\r\n  };\r\n\r\n  // Calculate duration between start and end time in minutes\r\n  const calculateDuration = (): number | undefined => {\r\n    if (date && endTime) {\r\n      const startDate = new Date(date);\r\n      const end = new Date(endTime);\r\n\r\n      // Set the end time to use the same date as the start time\r\n      end.setFullYear(\r\n        startDate.getFullYear(),\r\n        startDate.getMonth(),\r\n        startDate.getDate()\r\n      );\r\n\r\n      // If end time is earlier than start time, assume it's the next day\r\n      if (end < startDate) {\r\n        end.setDate(end.getDate() + 1);\r\n      }\r\n\r\n      // Calculate duration in minutes\r\n      return Math.round((end.getTime() - startDate.getTime()) / (1000 * 60));\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  // Calculate court fee based on duration and hourly rate\r\n  const calculateCourtFee = (): number => {\r\n    const duration = calculateDuration();\r\n    if (duration && courtFeePerHour) {\r\n      const hourlyRate = parseFloat(courtFeePerHour);\r\n      const hours = duration / 60;\r\n      return Math.round(hourlyRate * hours);\r\n    }\r\n    return 0;\r\n  };\r\n  // Add court fee from hourly rate\r\n  const addCourtFeeFromRate = () => {\r\n    if (!courtFeePerHour || parseFloat(courtFeePerHour) <= 0) {\r\n      Alert.alert(\"Lỗi\", \"Vui lòng nhập giá thuê sân hợp lệ\");\r\n      return;\r\n    }\r\n\r\n    if (!endTime) {\r\n      Alert.alert(\r\n        \"Lỗi\",\r\n        \"Vui lòng chọn thời gian kết thúc để tính chi phí thuê sân\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    const fee = calculateCourtFee();\r\n    if (fee <= 0) {\r\n      Alert.alert(\"Lỗi\", \"Không thể tính chi phí thuê sân\");\r\n      return;\r\n    }\r\n\r\n    const duration = calculateDuration();\r\n    let hours = 0;\r\n    let minutes = 0;\r\n\r\n    if (duration) {\r\n      hours = Math.floor(duration / 60);\r\n      minutes = duration % 60;\r\n    }\r\n\r\n    const hourText = hours > 0 ? hours + \" giờ \" : \"\";\r\n    const minuteText = minutes > 0 ? minutes + \" phút\" : \"\";\r\n    const durationText = hourText + minuteText;\r\n\r\n    const rateText = formatCurrency(parseFloat(courtFeePerHour)) + \"/giờ\";\r\n    const desc = \"Sân \" + durationText + \" (\" + rateText + \")\";\r\n\r\n    const newExpense = {\r\n      id: generateId(),\r\n      type: ExpenseType.COURT_FEE,\r\n      amount: fee,\r\n      description: desc,\r\n    };\r\n\r\n    setExpenses([...expenses, newExpense]);\r\n    Alert.alert(\"Thành công\", \"Đã thêm chi phí thuê sân\");\r\n  };\r\n\r\n  // Helper to check if expense type should show player selection\r\n  const shouldShowPlayerSelection = (type: ExpenseType): boolean => {\r\n    return [\r\n      ExpenseType.DRINK,\r\n      ExpenseType.EQUIPMENT,\r\n      ExpenseType.OTHER,\r\n    ].includes(type);\r\n  };\r\n\r\n  // Toggle a player in the divideAmong list\r\n  const togglePlayerInExpense = (playerId: string) => {\r\n    const divideAmong = currentExpense.divideAmong || [];\r\n\r\n    if (divideAmong.includes(playerId)) {\r\n      // Remove player\r\n      setCurrentExpense({\r\n        ...currentExpense,\r\n        divideAmong: divideAmong.filter((id) => id !== playerId),\r\n      });\r\n    } else {\r\n      // Add player\r\n      setCurrentExpense({\r\n        ...currentExpense,\r\n        divideAmong: [...divideAmong, playerId],\r\n      });\r\n    }\r\n  };\r\n\r\n  // Reset divideAmong when expense type changes\r\n  const handleExpenseTypeChange = (type: ExpenseType) => {\r\n    setCurrentExpense({\r\n      ...currentExpense,\r\n      type,\r\n      // Only keep divideAmong if it's a type that uses custom division\r\n      divideAmong: shouldShowPlayerSelection(type)\r\n        ? currentExpense.divideAmong || []\r\n        : [],\r\n    });\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <ScrollView>\r\n        <View style={styles.section}>\r\n          <Text style={styles.label}>Ngày</Text>\r\n          <TouchableOpacity\r\n            onPress={() => setShowDatePicker(true)}\r\n            style={styles.datePicker}\r\n          >\r\n            <Text style={styles.dateText}>\r\n              {format(date, \"dd/MM/yyyy\", { locale: vi })}\r\n            </Text>\r\n          </TouchableOpacity>\r\n          {showDatePicker && (\r\n            <DateTimePicker\r\n              value={date}\r\n              mode=\"date\"\r\n              display=\"default\"\r\n              onChange={onChangeDate}\r\n            />\r\n          )}\r\n        </View>\r\n        <View style={styles.section}>\r\n          <Text style={styles.label}>Thời gian kết thúc</Text>\r\n          <TouchableOpacity\r\n            onPress={() => setShowEndTimePicker(true)}\r\n            style={styles.datePicker}\r\n          >\r\n            <Text style={styles.dateText}>\r\n              {endTime\r\n                ? format(endTime, \"HH:mm\", { locale: vi })\r\n                : \"Chưa chọn thời gian\"}\r\n            </Text>\r\n          </TouchableOpacity>\r\n          {showEndTimePicker && (\r\n            <DateTimePicker\r\n              value={endTime || new Date()}\r\n              mode=\"time\"\r\n              display=\"default\"\r\n              onChange={handleEndTimeChange}\r\n            />\r\n          )}\r\n        </View>\r\n        <View style={styles.section}>\r\n          <Text style={styles.label}>Địa điểm</Text>\r\n          <TextInput\r\n            style={styles.input}\r\n            value={location}\r\n            onChangeText={setLocation}\r\n          />\r\n        </View>\r\n        <View style={styles.section}>\r\n          <Text style={styles.label}>Ghi chú</Text>\r\n          <TextInput\r\n            style={styles.input}\r\n            value={notes}\r\n            onChangeText={setNotes}\r\n            multiline\r\n          />\r\n        </View>\r\n        <View style={styles.section}>\r\n          <Text style={styles.label}>Giá thuê sân (VNĐ/giờ)</Text>\r\n          <TextInput\r\n            style={styles.input}\r\n            value={courtFeePerHour}\r\n            onChangeText={setCourtFeePerHour}\r\n            keyboardType=\"numeric\"\r\n          />\r\n        </View>\r\n        <View style={styles.section}>\r\n          <Text style={styles.label}>Người chơi</Text>\r\n          <View style={styles.playersContainer}>\r\n            {allPlayers.map((player) => (\r\n              <TouchableOpacity\r\n                key={player.id}\r\n                onPress={() => togglePlayerSelection(player.id)}\r\n                style={[\r\n                  styles.playerButton,\r\n                  selectedPlayers.includes(player.id) && styles.selectedPlayer,\r\n                ]}\r\n              >\r\n                <Text\r\n                  style={[\r\n                    styles.playerName,\r\n                    selectedPlayers.includes(player.id) &&\r\n                      styles.selectedPlayerText,\r\n                  ]}\r\n                >\r\n                  {player.name}\r\n                </Text>\r\n              </TouchableOpacity>\r\n            ))}\r\n          </View>\r\n          <View style={styles.addPlayerContainer}>\r\n            <TextInput\r\n              style={styles.addPlayerInput}\r\n              value={newPlayerName}\r\n              onChangeText={setNewPlayerName}\r\n              placeholder=\"Nhập tên người chơi mới\"\r\n            />\r\n            <TouchableOpacity\r\n              onPress={handleAddPlayer}\r\n              style={styles.addPlayerButton}\r\n            >\r\n              <Text style={styles.addPlayerButtonText}>\r\n                <Text>Thêm</Text>\r\n              </Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n        </View>\r\n        <View style={styles.section}>\r\n          <Text style={styles.label}>Chi phí</Text>\r\n          {expenses.map((expense) => (\r\n            <View key={expense.id} style={styles.expenseItem}>\r\n              {\" \"}\r\n              <Text style={styles.expenseText}>\r\n                <Text>{getExpenseTypeLabel(expense.type)}: </Text>\r\n                <Text>{formatCurrency(expense.amount)} </Text>\r\n                <TouchableOpacity\r\n                  onPress={() => removeExpense(expense.id)}\r\n                  style={styles.removeExpenseButton}\r\n                >\r\n                  <Text style={styles.removeExpenseButtonText}>\r\n                    <Text>X</Text>\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              </Text>\r\n            </View>\r\n          ))}\r\n          <View style={styles.addExpenseContainer}>\r\n            {\" \"}\r\n            <View style={styles.expenseTypeSelector}>\r\n              <Text style={styles.expenseTypeLabel}>Loại chi phí:</Text>\r\n              <View style={styles.expenseTypeOptions}>\r\n                {Object.values(ExpenseType).map((type) => (\r\n                  <TouchableOpacity\r\n                    key={type}\r\n                    style={[\r\n                      styles.expenseTypeOption,\r\n                      currentExpense.type === type &&\r\n                        styles.selectedExpenseType,\r\n                    ]}\r\n                    onPress={() => handleExpenseTypeChange(type)}\r\n                  >\r\n                    <Text\r\n                      style={[\r\n                        styles.expenseTypeText,\r\n                        currentExpense.type === type &&\r\n                          styles.selectedExpenseTypeText,\r\n                      ]}\r\n                    >\r\n                      {getExpenseTypeLabel(type)}\r\n                    </Text>\r\n                    <View style={styles.radioContainer}>\r\n                      <View\r\n                        style={[\r\n                          styles.radioOuter,\r\n                          currentExpense.type === type &&\r\n                            styles.radioOuterSelected,\r\n                        ]}\r\n                      >\r\n                        {currentExpense.type === type && (\r\n                          <View style={styles.radioInner} />\r\n                        )}\r\n                      </View>\r\n                    </View>\r\n                  </TouchableOpacity>\r\n                ))}\r\n              </View>\r\n            </View>\r\n            <TextInput\r\n              style={styles.expenseInput}\r\n              placeholder=\"Số tiền\"\r\n              value={currentExpense.amount}\r\n              onChangeText={(value) =>\r\n                setCurrentExpense({\r\n                  ...currentExpense,\r\n                  amount: value.replace(/[^0-9]/g, \"\"),\r\n                })\r\n              }\r\n              keyboardType=\"numeric\"\r\n            />\r\n            <TextInput\r\n              style={styles.expenseInput}\r\n              placeholder=\"Mô tả (không bắt buộc)\"\r\n              value={currentExpense.description}\r\n              onChangeText={(value) =>\r\n                setCurrentExpense({ ...currentExpense, description: value })\r\n              }\r\n            />\r\n            {shouldShowPlayerSelection(currentExpense.type) && (\r\n              <View style={styles.playerSelectionContainer}>\r\n                <Text style={styles.playerSelectionLabel}>\r\n                  Chia chi phí cho:\r\n                </Text>\r\n                <View style={styles.playerSelectionList}>\r\n                  {\" \"}\r\n                  {allPlayers.map((player) => (\r\n                    <TouchableOpacity\r\n                      key={player.id}\r\n                      style={[\r\n                        styles.playerSelectItem,\r\n                        currentExpense.divideAmong?.includes(player.id) &&\r\n                          styles.playerSelectItemSelected,\r\n                      ]}\r\n                      onPress={() => togglePlayerInExpense(player.id)}\r\n                    >\r\n                      <View style={styles.checkboxContainer}>\r\n                        <View\r\n                          style={[\r\n                            styles.checkbox,\r\n                            currentExpense.divideAmong?.includes(player.id) &&\r\n                              styles.checkboxSelected,\r\n                          ]}\r\n                        >\r\n                          {currentExpense.divideAmong?.includes(player.id) && (\r\n                            <Text style={styles.checkmark}>✓</Text>\r\n                          )}\r\n                        </View>\r\n                      </View>\r\n                      <Text\r\n                        style={[\r\n                          styles.playerSelectName,\r\n                          currentExpense.divideAmong?.includes(player.id) &&\r\n                            styles.playerSelectNameSelected,\r\n                        ]}\r\n                      >\r\n                        {player.name}\r\n                      </Text>\r\n                    </TouchableOpacity>\r\n                  ))}\r\n                </View>\r\n              </View>\r\n            )}\r\n            <TouchableOpacity\r\n              onPress={handleAddExpense}\r\n              style={styles.addExpenseButton}\r\n            >\r\n              <Text style={styles.addExpenseButtonText}>\r\n                <Text>Thêm chi phí</Text>\r\n              </Text>\r\n            </TouchableOpacity>\r\n            {courtFeePerHour && endTime && (\r\n              <TouchableOpacity\r\n                style={[styles.addExpenseButton, styles.courtFeeButton]}\r\n                onPress={addCourtFeeFromRate}\r\n              >\r\n                {\" \"}\r\n                <Text style={styles.addExpenseButtonText}>\r\n                  <Text>\r\n                    Tính tiền sân (\r\n                    {formatCurrency(parseFloat(courtFeePerHour) || 0)}/giờ)\r\n                  </Text>\r\n                </Text>\r\n              </TouchableOpacity>\r\n            )}\r\n          </View>\r\n        </View>{\" \"}\r\n        <TouchableOpacity onPress={handleSubmit} style={styles.submitButton}>\r\n          <Text style={styles.submitButtonText}>\r\n            <Text>Lưu buổi đánh cầu</Text>\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </ScrollView>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    padding: 16,\r\n    backgroundColor: \"#fff\",\r\n  },\r\n  section: {\r\n    marginBottom: 24,\r\n  },\r\n  label: {\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n    marginBottom: 8,\r\n  },\r\n  datePicker: {\r\n    padding: 12,\r\n    borderWidth: 1,\r\n    borderColor: \"#ccc\",\r\n    borderRadius: 8,\r\n    alignItems: \"center\",\r\n  },\r\n  dateText: {\r\n    fontSize: 16,\r\n  },\r\n  input: {\r\n    padding: 12,\r\n    borderWidth: 1,\r\n    borderColor: \"#ccc\",\r\n    borderRadius: 8,\r\n    fontSize: 16,\r\n  },\r\n  playersContainer: {\r\n    flexDirection: \"row\",\r\n    flexWrap: \"wrap\",\r\n    marginTop: 8,\r\n  },\r\n  playerButton: {\r\n    padding: 12,\r\n    borderWidth: 1,\r\n    borderColor: \"#007bff\",\r\n    borderRadius: 8,\r\n    marginRight: 8,\r\n    marginBottom: 8,\r\n    backgroundColor: \"#f0f8ff\",\r\n  },\r\n  selectedPlayer: {\r\n    backgroundColor: \"#007bff\",\r\n  },\r\n  playerName: {\r\n    fontSize: 16,\r\n    color: \"#007bff\",\r\n  },\r\n  selectedPlayerText: {\r\n    color: \"#fff\",\r\n  },\r\n  addPlayerContainer: {\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    marginTop: 16,\r\n  },\r\n  addPlayerInput: {\r\n    flex: 1,\r\n    padding: 12,\r\n    borderWidth: 1,\r\n    borderColor: \"#007bff\",\r\n    borderRadius: 8,\r\n    fontSize: 16,\r\n    marginRight: 8,\r\n  },\r\n  addPlayerButton: {\r\n    padding: 12,\r\n    backgroundColor: \"#007bff\",\r\n    borderRadius: 8,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  addPlayerButtonText: {\r\n    color: \"#fff\",\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n  },\r\n  expenseItem: {\r\n    padding: 12,\r\n    borderWidth: 1,\r\n    borderColor: \"#ccc\",\r\n    borderRadius: 8,\r\n    marginBottom: 8,\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n  },\r\n  expenseText: {\r\n    fontSize: 16,\r\n  },\r\n  removeExpenseButton: {\r\n    padding: 8,\r\n    backgroundColor: \"#ff4d4d\",\r\n    borderRadius: 8,\r\n  },\r\n  removeExpenseButtonText: {\r\n    color: \"#fff\",\r\n    fontWeight: \"bold\",\r\n  },\r\n  addExpenseContainer: {\r\n    flexDirection: \"column\",\r\n    width: \"100%\",\r\n    marginTop: 16,\r\n  },\r\n  expenseTypeSelector: {\r\n    marginBottom: 16,\r\n    width: \"100%\",\r\n  },\r\n  expenseTypeLabel: {\r\n    fontSize: 15,\r\n    fontWeight: \"bold\",\r\n    marginBottom: 10,\r\n    color: \"#333\",\r\n  },\r\n  expenseTypeOptions: {\r\n    flexDirection: \"column\",\r\n    width: \"100%\",\r\n  },\r\n  expenseTypeOption: {\r\n    padding: 12,\r\n    borderWidth: 1,\r\n    borderColor: \"#4caf50\",\r\n    borderRadius: 8,\r\n    marginBottom: 8,\r\n    backgroundColor: \"#f0fff0\",\r\n    width: \"100%\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n  selectedExpenseType: {\r\n    backgroundColor: \"#4caf50\",\r\n  },\r\n  expenseTypeText: {\r\n    fontSize: 15,\r\n    color: \"#4caf50\",\r\n    fontWeight: \"500\",\r\n    flex: 1,\r\n  },\r\n  selectedExpenseTypeText: {\r\n    color: \"#fff\",\r\n    fontWeight: \"bold\",\r\n  },\r\n  expenseInput: {\r\n    padding: 12,\r\n    borderWidth: 1,\r\n    borderColor: \"#ccc\",\r\n    borderRadius: 8,\r\n    fontSize: 16,\r\n    marginBottom: 12,\r\n  },\r\n  playerSelectionContainer: {\r\n    marginBottom: 12,\r\n  },\r\n  playerSelectionLabel: {\r\n    fontSize: 14,\r\n    fontWeight: \"bold\",\r\n    marginBottom: 8,\r\n  },\r\n  playerSelectionList: {\r\n    flexDirection: \"column\",\r\n    width: \"100%\",\r\n  },\r\n  playerSelectItem: {\r\n    padding: 10,\r\n    borderWidth: 1,\r\n    borderColor: \"#4caf50\",\r\n    borderRadius: 8,\r\n    marginBottom: 8,\r\n    backgroundColor: \"#f0fff0\",\r\n    width: \"100%\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n  },\r\n  playerSelectItemSelected: {\r\n    backgroundColor: \"#4caf50\",\r\n  },\r\n  playerSelectName: {\r\n    fontSize: 15,\r\n    color: \"#4caf50\",\r\n    flex: 1,\r\n    fontWeight: \"500\",\r\n  },\r\n  playerSelectNameSelected: {\r\n    color: \"#fff\",\r\n    fontWeight: \"bold\",\r\n  },\r\n  addExpenseButton: {\r\n    backgroundColor: \"#4caf50\",\r\n    padding: 12,\r\n    borderRadius: 8,\r\n    alignItems: \"center\",\r\n    marginTop: 8,\r\n    marginBottom: 12,\r\n  },\r\n  addExpenseButtonText: {\r\n    color: \"#fff\",\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n  },\r\n  checkboxContainer: {\r\n    marginRight: 10,\r\n  },\r\n  checkbox: {\r\n    width: 20,\r\n    height: 20,\r\n    borderWidth: 1,\r\n    borderColor: \"#4caf50\",\r\n    borderRadius: 4,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#fff\",\r\n  },\r\n  checkboxSelected: {\r\n    backgroundColor: \"#4caf50\",\r\n  },\r\n  checkmark: {\r\n    color: \"#fff\",\r\n    fontSize: 12,\r\n    fontWeight: \"bold\",\r\n  },\r\n  radioContainer: {\r\n    marginLeft: 10,\r\n  },\r\n  radioOuter: {\r\n    width: 22,\r\n    height: 22,\r\n    borderRadius: 11,\r\n    borderWidth: 2,\r\n    borderColor: \"#4caf50\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#fff\",\r\n  },\r\n  radioOuterSelected: {\r\n    borderColor: \"#4caf50\",\r\n    backgroundColor: \"#f0fff0\",\r\n  },\r\n  radioInner: {\r\n    width: 12,\r\n    height: 12,\r\n    borderRadius: 6,\r\n    backgroundColor: \"#4caf50\",\r\n  },\r\n  courtFeeButton: {\r\n    backgroundColor: \"#2196f3\",\r\n  },\r\n  submitButton: {\r\n    backgroundColor: \"#4caf50\",\r\n    padding: 16,\r\n    borderRadius: 8,\r\n    alignItems: \"center\",\r\n    marginTop: 24,\r\n  },\r\n  submitButtonText: {\r\n    color: \"#fff\",\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n  },\r\n});\r\n\r\nexport default NewSessionScreen;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  ScrollView,\r\n  Alert,\r\n  ActivityIndicator,\r\n} from \"react-native\";\r\nimport { useNavigation, useRoute, RouteProp } from \"@react-navigation/native\";\r\nimport DateTimePicker from \"@react-native-community/datetimepicker\";\r\nimport { format } from \"date-fns\";\r\nimport { vi } from \"date-fns/locale\";\r\nimport {\r\n  getPlayers,\r\n  getSessions,\r\n  updateSession,\r\n} from \"../services/storageService\";\r\nimport { ExpenseType, Player, Expense, Session } from \"../models/types\";\r\nimport { generateId, formatCurrency } from \"../utils/expenseUtils\";\r\n\r\ntype RouteParams = {\r\n  EditSession: {\r\n    sessionId: string;\r\n  };\r\n};\r\n\r\nconst EditSessionScreen = () => {\r\n  const navigation = useNavigation<any>();\r\n  const route = useRoute<RouteProp<RouteParams, \"EditSession\">>();\r\n  const { sessionId } = route.params;\r\n\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [originalSession, setOriginalSession] = useState<Session | null>(null);\r\n  const [date, setDate] = useState(new Date());\r\n  const [endTime, setEndTime] = useState<Date | null>(null);\r\n  const [location, setLocation] = useState(\"\");\r\n  const [notes, setNotes] = useState(\"\");\r\n  const [courtFeePerHour, setCourtFeePerHour] = useState(\"\");\r\n  const [showDatePicker, setShowDatePicker] = useState(false);\r\n  const [showEndTimePicker, setShowEndTimePicker] = useState(false);\r\n\r\n  const [allPlayers, setAllPlayers] = useState<Player[]>([]);\r\n  const [selectedPlayers, setSelectedPlayers] = useState<string[]>([]);\r\n  const [newPlayerName, setNewPlayerName] = useState(\"\");\r\n\r\n  const [expenses, setExpenses] = useState<Expense[]>([]);\r\n  const [currentExpense, setCurrentExpense] = useState<{\r\n    type: ExpenseType;\r\n    amount: string;\r\n    description: string;\r\n    divideAmong?: string[];\r\n  }>({\r\n    type: ExpenseType.COURT_FEE,\r\n    amount: \"\",\r\n    description: \"\",\r\n    divideAmong: [],\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadSession();\r\n    loadPlayers();\r\n  }, [sessionId]);\r\n\r\n  const loadSession = async () => {\r\n    try {\r\n      const sessions = await getSessions();\r\n      const session = sessions.find((s) => s.id === sessionId);\r\n\r\n      if (session) {\r\n        setOriginalSession(session);\r\n\r\n        // Set the form values from the session\r\n        setDate(new Date(session.date));\r\n        setLocation(session.location);\r\n        setNotes(session.notes || \"\");\r\n        setExpenses([...session.expenses]);\r\n        setSelectedPlayers(session.players.map((player) => player.id));\r\n\r\n        // Set end time if available\r\n        if (session.endTime) {\r\n          setEndTime(new Date(session.endTime));\r\n        }\r\n\r\n        // Set court fee per hour if available\r\n        if (session.courtFeePerHour) {\r\n          setCourtFeePerHour(session.courtFeePerHour.toString());\r\n        }\r\n      } else {\r\n        Alert.alert(\"Lỗi\", \"Không tìm thấy buổi đánh cầu\");\r\n        navigation.goBack();\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Lỗi khi tải thông tin buổi đánh cầu:\", error);\r\n      Alert.alert(\"Lỗi\", \"Không thể tải thông tin buổi đánh cầu\");\r\n      navigation.goBack();\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadPlayers = async () => {\r\n    try {\r\n      const players = await getPlayers();\r\n      setAllPlayers(players);\r\n    } catch (error) {\r\n      console.error(\"Lỗi khi tải danh sách người chơi:\", error);\r\n    }\r\n  };\r\n\r\n  const onChangeDate = (event: any, selectedDate?: Date) => {\r\n    setShowDatePicker(false);\r\n    if (selectedDate) {\r\n      setDate(selectedDate);\r\n    }\r\n  };\r\n\r\n  // Handle end time selection\r\n  const handleEndTimeChange = (event: any, selectedDate?: Date) => {\r\n    setShowEndTimePicker(false);\r\n    if (selectedDate) {\r\n      setEndTime(selectedDate);\r\n    }\r\n  };\r\n\r\n  // Calculate duration between start and end time in minutes\r\n  const calculateDuration = (): number | undefined => {\r\n    if (date && endTime) {\r\n      const startDate = new Date(date);\r\n      const end = new Date(endTime);\r\n\r\n      // Set the end time to use the same date as the start time\r\n      end.setFullYear(\r\n        startDate.getFullYear(),\r\n        startDate.getMonth(),\r\n        startDate.getDate()\r\n      );\r\n\r\n      // If end time is earlier than start time, assume it's the next day\r\n      if (end < startDate) {\r\n        end.setDate(end.getDate() + 1);\r\n      }\r\n\r\n      // Calculate duration in minutes\r\n      return Math.round((end.getTime() - startDate.getTime()) / (1000 * 60));\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  // Calculate court fee based on duration and hourly rate\r\n  const calculateCourtFee = (): number => {\r\n    const duration = calculateDuration();\r\n    if (duration && courtFeePerHour) {\r\n      const hourlyRate = parseFloat(courtFeePerHour);\r\n      const hours = duration / 60;\r\n      return Math.round(hourlyRate * hours);\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  // Add court fee from hourly rate\r\n  const addCourtFeeFromRate = () => {\r\n    if (!courtFeePerHour || parseFloat(courtFeePerHour) <= 0) {\r\n      Alert.alert(\"Lỗi\", \"Vui lòng nhập giá thuê sân hợp lệ\");\r\n      return;\r\n    }\r\n\r\n    if (!endTime) {\r\n      Alert.alert(\r\n        \"Lỗi\",\r\n        \"Vui lòng chọn thời gian kết thúc để tính chi phí thuê sân\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    const fee = calculateCourtFee();\r\n    if (fee <= 0) {\r\n      Alert.alert(\"Lỗi\", \"Không thể tính chi phí thuê sân\");\r\n      return;\r\n    }\r\n\r\n    const duration = calculateDuration();\r\n    let hours = 0;\r\n    let minutes = 0;\r\n\r\n    if (duration) {\r\n      hours = Math.floor(duration / 60);\r\n      minutes = duration % 60;\r\n    }\r\n\r\n    const hourText = hours > 0 ? hours + \" giờ \" : \"\";\r\n    const minuteText = minutes > 0 ? minutes + \" phút\" : \"\";\r\n    const durationText = hourText + minuteText;\r\n\r\n    const rateText = formatCurrency(parseFloat(courtFeePerHour)) + \"/giờ\";\r\n    const desc = \"Sân \" + durationText + \" (\" + rateText + \")\";\r\n\r\n    const newExpense = {\r\n      id: generateId(),\r\n      type: ExpenseType.COURT_FEE,\r\n      amount: fee,\r\n      description: desc,\r\n    };\r\n\r\n    setExpenses([...expenses, newExpense]);\r\n    Alert.alert(\"Thành công\", \"Đã thêm chi phí thuê sân\");\r\n  };\r\n\r\n  const togglePlayerSelection = (playerId: string) => {\r\n    if (selectedPlayers.includes(playerId)) {\r\n      setSelectedPlayers(selectedPlayers.filter((id) => id !== playerId));\r\n    } else {\r\n      setSelectedPlayers([...selectedPlayers, playerId]);\r\n    }\r\n  };\r\n\r\n  // Toggle a player in the divideAmong list\r\n  const togglePlayerInExpense = (playerId: string) => {\r\n    const divideAmong = currentExpense.divideAmong || [];\r\n\r\n    if (divideAmong.includes(playerId)) {\r\n      // Remove player\r\n      setCurrentExpense({\r\n        ...currentExpense,\r\n        divideAmong: divideAmong.filter((id) => id !== playerId),\r\n      });\r\n    } else {\r\n      // Add player\r\n      setCurrentExpense({\r\n        ...currentExpense,\r\n        divideAmong: [...divideAmong, playerId],\r\n      });\r\n    }\r\n  };\r\n\r\n  // Reset divideAmong when expense type changes\r\n  const handleExpenseTypeChange = (type: ExpenseType) => {\r\n    setCurrentExpense({\r\n      ...currentExpense,\r\n      type,\r\n      // Only keep divideAmong if it's a type that uses custom division\r\n      divideAmong: shouldShowPlayerSelection(type)\r\n        ? currentExpense.divideAmong || []\r\n        : [],\r\n    });\r\n  };\r\n  const handleAddExpense = () => {\r\n    if (!currentExpense.amount || parseFloat(currentExpense.amount) <= 0) {\r\n      Alert.alert(\"Lỗi\", \"Vui lòng nhập số tiền hợp lệ\");\r\n      return;\r\n    }\r\n\r\n    // For non-general expense types, check if players are selected\r\n    if (\r\n      shouldShowPlayerSelection(currentExpense.type) &&\r\n      (!currentExpense.divideAmong || currentExpense.divideAmong.length === 0)\r\n    ) {\r\n      Alert.alert(\r\n        \"Chưa chọn người tham gia\",\r\n        \"Vui lòng chọn ít nhất một người tham gia để chi trả chi phí này.\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    const newExpense: Expense = {\r\n      id: generateId(),\r\n      type: currentExpense.type,\r\n      amount: parseFloat(currentExpense.amount),\r\n      description: currentExpense.description,\r\n      divideAmong: currentExpense.divideAmong?.length\r\n        ? currentExpense.divideAmong\r\n        : undefined,\r\n    };\r\n\r\n    setExpenses([...expenses, newExpense]);\r\n    setCurrentExpense({\r\n      type: ExpenseType.COURT_FEE,\r\n      amount: \"\",\r\n      description: \"\",\r\n      divideAmong: [],\r\n    });\r\n  };\r\n\r\n  const removeExpense = (id: string) => {\r\n    setExpenses(expenses.filter((expense) => expense.id !== id));\r\n  };\r\n\r\n  const getExpenseTypeLabel = (type: ExpenseType): string => {\r\n    switch (type) {\r\n      case ExpenseType.COURT_FEE:\r\n        return \"Tiền sân\";\r\n      case ExpenseType.SHUTTLE:\r\n        return \"Tiền cầu\";\r\n      case ExpenseType.DRINK:\r\n        return \"Tiền nước\";\r\n      case ExpenseType.EQUIPMENT:\r\n        return \"Tiền phụ kiện\";\r\n      case ExpenseType.OTHER:\r\n        return \"Chi phí khác\";\r\n      default:\r\n        return \"Chi phí\";\r\n    }\r\n  };\r\n\r\n  const shouldShowPlayerSelection = (type: ExpenseType): boolean => {\r\n    return [\r\n      ExpenseType.DRINK,\r\n      ExpenseType.EQUIPMENT,\r\n      ExpenseType.OTHER,\r\n    ].includes(type);\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!location.trim()) {\r\n      Alert.alert(\"Lỗi\", \"Vui lòng nhập địa điểm đánh cầu\");\r\n      return;\r\n    }\r\n\r\n    if (selectedPlayers.length === 0) {\r\n      Alert.alert(\"Lỗi\", \"Vui lòng chọn ít nhất một người tham gia\");\r\n      return;\r\n    }\r\n\r\n    if (expenses.length === 0) {\r\n      Alert.alert(\"Lỗi\", \"Vui lòng thêm ít nhất một khoản chi phí\");\r\n      return;\r\n    }\r\n\r\n    if (!originalSession) {\r\n      Alert.alert(\"Lỗi\", \"Không tìm thấy thông tin gốc của buổi đánh cầu\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const selectedPlayerObjects = allPlayers.filter((p) =>\r\n        selectedPlayers.includes(p.id)\r\n      ); // Calculate duration if end time is set\r\n      const duration = calculateDuration();\r\n\r\n      // Parse court fee per hour if provided\r\n      const hourlyFee = courtFeePerHour\r\n        ? parseFloat(courtFeePerHour)\r\n        : undefined;\r\n\r\n      await updateSession({\r\n        ...originalSession,\r\n        date: date.toISOString(),\r\n        endTime: endTime ? endTime.toISOString() : undefined,\r\n        duration: duration,\r\n        courtFeePerHour: hourlyFee,\r\n        location: location.trim(),\r\n        notes: notes.trim() || undefined,\r\n        players: selectedPlayerObjects,\r\n        expenses: expenses,\r\n      });\r\n\r\n      Alert.alert(\"Thành công\", \"Đã cập nhật buổi đánh cầu\", [\r\n        { text: \"OK\", onPress: () => navigation.goBack() },\r\n      ]);\r\n    } catch (error) {\r\n      Alert.alert(\"Lỗi\", \"Không thể cập nhật buổi đánh cầu\");\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <View style={styles.loadingContainer}>\r\n        <ActivityIndicator size=\"large\" color=\"#4caf50\" />\r\n        <Text style={styles.loadingText}>Đang tải...</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ScrollView style={styles.container}>\r\n      <View style={styles.section}>\r\n        <Text style={styles.sectionTitle}>Thông tin cơ bản</Text>\r\n        <TouchableOpacity\r\n          style={styles.dateInput}\r\n          onPress={() => setShowDatePicker(true)}\r\n        >\r\n          <Text style={styles.dateText}>\r\n            {format(date, \"EEEE, dd/MM/yyyy\", { locale: vi })}\r\n          </Text>\r\n        </TouchableOpacity>\r\n        {showDatePicker && (\r\n          <DateTimePicker\r\n            value={date}\r\n            mode=\"date\"\r\n            display=\"default\"\r\n            onChange={onChangeDate}\r\n          />\r\n        )}\r\n        <View style={styles.timeInputContainer}>\r\n          <Text style={styles.timeInputLabel}>Thời gian bắt đầu:</Text>\r\n          <TouchableOpacity\r\n            style={styles.timeInput}\r\n            onPress={() => {\r\n              const now = new Date();\r\n              setDate((prev) => {\r\n                const newDate = new Date(prev);\r\n                newDate.setHours(now.getHours(), now.getMinutes(), 0, 0);\r\n                return newDate;\r\n              });\r\n              setShowDatePicker(true);\r\n            }}\r\n          >\r\n            <Text style={styles.timeText}>{format(date, \"HH:mm\")}</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n        <View style={styles.timeInputContainer}>\r\n          <Text style={styles.timeInputLabel}>Thời gian kết thúc:</Text>\r\n          <TouchableOpacity\r\n            style={styles.timeInput}\r\n            onPress={() => setShowEndTimePicker(true)}\r\n          >\r\n            <Text style={styles.timeText}>\r\n              {endTime ? format(endTime, \"HH:mm\") : \"Chọn giờ kết thúc\"}\r\n            </Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n        {showEndTimePicker && (\r\n          <DateTimePicker\r\n            value={endTime || new Date()}\r\n            mode=\"time\"\r\n            display=\"default\"\r\n            onChange={handleEndTimeChange}\r\n          />\r\n        )}{\" \"}\r\n        <TextInput\r\n          style={styles.input}\r\n          placeholder=\"Địa điểm\"\r\n          value={location}\r\n          onChangeText={setLocation}\r\n        />\r\n        <View style={styles.feeContainer}>\r\n          <Text style={styles.feeLabel}>Giá thuê sân (VNĐ/1 giờ):</Text>\r\n          <TextInput\r\n            style={styles.feeInput}\r\n            placeholder=\"Nhập giá sân\"\r\n            value={courtFeePerHour}\r\n            onChangeText={(value) =>\r\n              setCourtFeePerHour(value.replace(/[^0-9]/g, \"\"))\r\n            }\r\n            keyboardType=\"numeric\"\r\n          />\r\n        </View>\r\n        <TextInput\r\n          style={[styles.input, styles.multilineInput]}\r\n          placeholder=\"Ghi chú (không bắt buộc)\"\r\n          value={notes}\r\n          onChangeText={setNotes}\r\n          multiline\r\n        />\r\n      </View>\r\n\r\n      <View style={styles.section}>\r\n        <Text style={styles.sectionTitle}>Người tham gia</Text>\r\n\r\n        <View style={styles.playerList}>\r\n          {allPlayers.map((player) => (\r\n            <TouchableOpacity\r\n              key={player.id}\r\n              style={[\r\n                styles.playerItem,\r\n                selectedPlayers.includes(player.id) &&\r\n                  styles.playerItemSelected,\r\n              ]}\r\n              onPress={() => togglePlayerSelection(player.id)}\r\n            >\r\n              <Text\r\n                style={[\r\n                  styles.playerName,\r\n                  selectedPlayers.includes(player.id) &&\r\n                    styles.playerNameSelected,\r\n                ]}\r\n              >\r\n                {player.name}\r\n              </Text>\r\n            </TouchableOpacity>\r\n          ))}\r\n        </View>\r\n      </View>\r\n\r\n      <View style={styles.section}>\r\n        <Text style={styles.sectionTitle}>Chi phí</Text>\r\n\r\n        {expenses.length > 0 && (\r\n          <View style={styles.expenseList}>\r\n            {expenses.map((expense) => (\r\n              <View key={expense.id} style={styles.expenseItem}>\r\n                <View style={styles.expenseHeader}>\r\n                  {\" \"}\r\n                  <Text style={styles.expenseType}>\r\n                    <Text>{getExpenseTypeLabel(expense.type)}</Text>\r\n                  </Text>{\" \"}\r\n                  <Text style={styles.expenseAmount}>\r\n                    <Text>{formatCurrency(expense.amount)}</Text>\r\n                  </Text>\r\n                </View>\r\n\r\n                {expense.description && (\r\n                  <Text style={styles.expenseDescription}>\r\n                    {\" \"}\r\n                    <Text>{expense.description}</Text>\r\n                  </Text>\r\n                )}\r\n\r\n                {/* Display the specific players for custom expense division */}\r\n                {expense.divideAmong && expense.divideAmong.length > 0 && (\r\n                  <View style={styles.expensePlayers}>\r\n                    <Text style={styles.expensePlayersLabel}>\r\n                      Chi phí chia cho:\r\n                    </Text>\r\n                    <View style={styles.expensePlayersList}>\r\n                      {expense.divideAmong.map((playerId) => {\r\n                        const player = allPlayers.find(\r\n                          (p) => p.id === playerId\r\n                        );\r\n                        return player ? (\r\n                          <Text key={playerId} style={styles.expensePlayerName}>\r\n                            <Text>{player.name}</Text>\r\n                          </Text>\r\n                        ) : null;\r\n                      })}\r\n                    </View>\r\n                  </View>\r\n                )}\r\n\r\n                <TouchableOpacity\r\n                  style={styles.removeButton}\r\n                  onPress={() => removeExpense(expense.id)}\r\n                >\r\n                  <Text style={styles.removeButtonText}>Xóa</Text>\r\n                </TouchableOpacity>\r\n              </View>\r\n            ))}\r\n          </View>\r\n        )}\r\n\r\n        <View style={styles.newExpenseContainer}>\r\n          <View style={styles.selectContainer}>\r\n            <Text style={styles.selectLabel}>Loại chi phí:</Text>\r\n            <View style={styles.selectOptions}>\r\n              {Object.values(ExpenseType).map((type) => (\r\n                <TouchableOpacity\r\n                  key={type}\r\n                  style={[\r\n                    styles.selectOption,\r\n                    currentExpense.type === type && styles.selectOptionSelected,\r\n                  ]}\r\n                  onPress={() => handleExpenseTypeChange(type)}\r\n                >\r\n                  <Text\r\n                    style={[\r\n                      styles.selectOptionText,\r\n                      currentExpense.type === type &&\r\n                        styles.selectOptionTextSelected,\r\n                    ]}\r\n                  >\r\n                    {getExpenseTypeLabel(type)}\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              ))}\r\n            </View>\r\n          </View>\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"Số tiền\"\r\n            value={currentExpense.amount}\r\n            onChangeText={(value) =>\r\n              setCurrentExpense({\r\n                ...currentExpense,\r\n                amount: value.replace(/[^0-9]/g, \"\"),\r\n              })\r\n            }\r\n            keyboardType=\"numeric\"\r\n          />\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"Mô tả (không bắt buộc)\"\r\n            value={currentExpense.description}\r\n            onChangeText={(value) =>\r\n              setCurrentExpense({ ...currentExpense, description: value })\r\n            }\r\n          />{\" \"}\r\n          {shouldShowPlayerSelection(currentExpense.type) && (\r\n            <View style={styles.playerSelectionContainer}>\r\n              <Text style={styles.playerSelectionLabel}>\r\n                Chia sẻ chi phí cho:\r\n              </Text>\r\n              <View style={styles.playerSelectionList}>\r\n                {allPlayers.map((player) => (\r\n                  <TouchableOpacity\r\n                    key={player.id}\r\n                    style={[\r\n                      styles.playerSelectItem,\r\n                      currentExpense.divideAmong?.includes(player.id) &&\r\n                        styles.playerSelectItemSelected,\r\n                    ]}\r\n                    onPress={() => togglePlayerInExpense(player.id)}\r\n                  >\r\n                    <Text\r\n                      style={[\r\n                        styles.playerSelectName,\r\n                        currentExpense.divideAmong?.includes(player.id) &&\r\n                          styles.playerSelectNameSelected,\r\n                      ]}\r\n                    >\r\n                      {player.name}\r\n                    </Text>\r\n                  </TouchableOpacity>\r\n                ))}\r\n              </View>\r\n            </View>\r\n          )}\r\n          <TouchableOpacity\r\n            style={styles.addExpenseButton}\r\n            onPress={handleAddExpense}\r\n          >\r\n            <Text style={styles.addExpenseButtonText}>Thêm chi phí</Text>\r\n          </TouchableOpacity>\r\n          {courtFeePerHour && endTime && (\r\n            <TouchableOpacity\r\n              style={[styles.addExpenseButton, styles.courtFeeButton]}\r\n              onPress={addCourtFeeFromRate}\r\n            >\r\n              {\" \"}\r\n              <Text style={styles.addExpenseButtonText}>\r\n                <Text>\r\n                  Tính tiền sân (\r\n                  {formatCurrency(parseFloat(courtFeePerHour) || 0)}/giờ)\r\n                </Text>\r\n              </Text>\r\n            </TouchableOpacity>\r\n          )}\r\n        </View>\r\n      </View>\r\n\r\n      <View style={styles.buttonContainer}>\r\n        <TouchableOpacity style={styles.submitButton} onPress={handleSubmit}>\r\n          <Text style={styles.submitButtonText}>\r\n            <Text>Cập nhật</Text>\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    padding: 16,\r\n    backgroundColor: \"#fff\",\r\n  },\r\n  loadingContainer: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  loadingText: {\r\n    marginTop: 12,\r\n    fontSize: 16,\r\n    color: \"#555\",\r\n  },\r\n  section: {\r\n    marginBottom: 24,\r\n  },\r\n  sectionTitle: {\r\n    fontSize: 18,\r\n    fontWeight: \"bold\",\r\n    marginBottom: 12,\r\n    color: \"#333\",\r\n  },\r\n  dateInput: {\r\n    backgroundColor: \"#f0f0f0\",\r\n    paddingVertical: 12,\r\n    paddingHorizontal: 16,\r\n    borderRadius: 8,\r\n    marginBottom: 12,\r\n  },\r\n  dateText: {\r\n    fontSize: 16,\r\n    color: \"#333\",\r\n  },\r\n  timeInputContainer: {\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n    marginBottom: 12,\r\n  },\r\n  timeInputLabel: {\r\n    fontSize: 16,\r\n    color: \"#333\",\r\n    flex: 1,\r\n  },\r\n  timeInput: {\r\n    backgroundColor: \"#f0f0f0\",\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 10,\r\n    borderRadius: 8,\r\n    flex: 1,\r\n    marginLeft: 8,\r\n  },\r\n  timeText: {\r\n    fontSize: 16,\r\n    textAlign: \"center\",\r\n    color: \"#444\",\r\n  },\r\n  input: {\r\n    backgroundColor: \"#f0f0f0\",\r\n    paddingVertical: 12,\r\n    paddingHorizontal: 16,\r\n    borderRadius: 8,\r\n    marginBottom: 12,\r\n    fontSize: 16,\r\n  },\r\n  multilineInput: {\r\n    minHeight: 80,\r\n    textAlignVertical: \"top\",\r\n  },\r\n  playerList: {\r\n    flexDirection: \"row\",\r\n    flexWrap: \"wrap\",\r\n    marginBottom: 12,\r\n  },\r\n  playerItem: {\r\n    backgroundColor: \"#f0f0f0\",\r\n    paddingVertical: 8,\r\n    paddingHorizontal: 12,\r\n    borderRadius: 16,\r\n    margin: 4,\r\n  },\r\n  playerItemSelected: {\r\n    backgroundColor: \"#4caf50\",\r\n  },\r\n  playerName: {\r\n    fontSize: 14,\r\n    color: \"#444\",\r\n  },\r\n  playerNameSelected: {\r\n    color: \"white\",\r\n  },\r\n  newPlayerContainer: {\r\n    flexDirection: \"row\",\r\n  },\r\n  newPlayerInput: {\r\n    flex: 1,\r\n    backgroundColor: \"#f0f0f0\",\r\n    paddingVertical: 12,\r\n    paddingHorizontal: 16,\r\n    borderRadius: 8,\r\n    marginRight: 8,\r\n    fontSize: 16,\r\n  },\r\n  addPlayerButton: {\r\n    backgroundColor: \"#2196f3\",\r\n    paddingHorizontal: 16,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    borderRadius: 8,\r\n  },\r\n  addPlayerButtonText: {\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n  },\r\n  expenseList: {\r\n    marginBottom: 16,\r\n  },\r\n  expenseItem: {\r\n    backgroundColor: \"#f9f9f9\",\r\n    padding: 12,\r\n    borderRadius: 8,\r\n    marginBottom: 8,\r\n  },\r\n  expenseHeader: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    marginBottom: 4,\r\n  },\r\n  expenseType: {\r\n    fontSize: 15,\r\n    fontWeight: \"500\",\r\n    color: \"#444\",\r\n  },\r\n  expenseAmount: {\r\n    fontSize: 15,\r\n    fontWeight: \"bold\",\r\n    color: \"#2e7d32\",\r\n  },\r\n  expenseDescription: {\r\n    fontSize: 14,\r\n    color: \"#777\",\r\n    marginBottom: 8,\r\n  },\r\n  removeButton: {\r\n    alignSelf: \"flex-end\",\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 4,\r\n    backgroundColor: \"#f44336\",\r\n    borderRadius: 4,\r\n  },\r\n  removeButtonText: {\r\n    color: \"white\",\r\n    fontSize: 12,\r\n  },\r\n  newExpenseContainer: {\r\n    marginTop: 8,\r\n  },\r\n  selectContainer: {\r\n    marginBottom: 12,\r\n  },\r\n  selectLabel: {\r\n    fontSize: 14,\r\n    color: \"#555\",\r\n    marginBottom: 6,\r\n  },\r\n  selectOptions: {\r\n    flexDirection: \"row\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  selectOption: {\r\n    backgroundColor: \"#f0f0f0\",\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 8,\r\n    borderRadius: 16,\r\n    margin: 4,\r\n  },\r\n  selectOptionSelected: {\r\n    backgroundColor: \"#2196f3\",\r\n  },\r\n  selectOptionText: {\r\n    fontSize: 14,\r\n    color: \"#444\",\r\n  },\r\n  selectOptionTextSelected: {\r\n    color: \"white\",\r\n    fontWeight: \"500\",\r\n  },\r\n  addExpenseButton: {\r\n    backgroundColor: \"#4caf50\",\r\n    paddingVertical: 12,\r\n    borderRadius: 8,\r\n    alignItems: \"center\",\r\n    marginTop: 8,\r\n  },\r\n  addExpenseButtonText: {\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n    fontSize: 16,\r\n  },\r\n  buttonContainer: {\r\n    marginTop: 16,\r\n    marginBottom: 30,\r\n  },\r\n  submitButton: {\r\n    backgroundColor: \"#2e7d32\",\r\n    paddingVertical: 14,\r\n    borderRadius: 8,\r\n    alignItems: \"center\",\r\n  },\r\n  submitButtonText: {\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n    fontSize: 18,\r\n  },\r\n  feeContainer: {\r\n    marginBottom: 12,\r\n  },\r\n  feeLabel: {\r\n    fontSize: 16,\r\n    color: \"#333\",\r\n    marginBottom: 8,\r\n  },\r\n  feeInput: {\r\n    backgroundColor: \"#f0f0f0\",\r\n    paddingVertical: 12,\r\n    paddingHorizontal: 16,\r\n    borderRadius: 8,\r\n    fontSize: 16,\r\n  },\r\n  courtFeeButton: {\r\n    backgroundColor: \"#2196f3\",\r\n    marginTop: 8,\r\n  },\r\n  playerSelectionContainer: {\r\n    marginTop: 12,\r\n    padding: 12,\r\n    borderRadius: 8,\r\n    backgroundColor: \"#f9f9f9\",\r\n    borderWidth: 1,\r\n    borderColor: \"#ddd\",\r\n  },\r\n  playerSelectionLabel: {\r\n    fontSize: 16,\r\n    color: \"#333\",\r\n    marginBottom: 8,\r\n  },\r\n  playerSelectionList: {\r\n    flexDirection: \"row\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  playerSelectItem: {\r\n    backgroundColor: \"#f0f0f0\",\r\n    paddingVertical: 8,\r\n    paddingHorizontal: 12,\r\n    borderRadius: 16,\r\n    margin: 4,\r\n  },\r\n  playerSelectItemSelected: {\r\n    backgroundColor: \"#4caf50\",\r\n  },\r\n  playerSelectName: {\r\n    fontSize: 14,\r\n    color: \"#444\",\r\n  },\r\n  playerSelectNameSelected: {\r\n    color: \"white\",\r\n  },\r\n  expensePlayers: {\r\n    marginTop: 6,\r\n    marginBottom: 8,\r\n  },\r\n  expensePlayersLabel: {\r\n    fontSize: 12,\r\n    color: \"#666\",\r\n    fontStyle: \"italic\",\r\n  },\r\n  expensePlayersList: {\r\n    flexDirection: \"row\",\r\n    flexWrap: \"wrap\",\r\n    marginTop: 4,\r\n  },\r\n  expensePlayerName: {\r\n    fontSize: 12,\r\n    color: \"#4caf50\",\r\n    backgroundColor: \"#f0fff0\",\r\n    borderWidth: 1,\r\n    borderColor: \"#4caf50\",\r\n    borderRadius: 4,\r\n    paddingVertical: 2,\r\n    paddingHorizontal: 6,\r\n    marginRight: 6,\r\n    marginBottom: 4,\r\n  },\r\n});\r\n\r\nexport default EditSessionScreen;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  TouchableOpacity,\r\n  FlatList,\r\n  Alert,\r\n} from \"react-native\";\r\nimport { getPlayers, deletePlayer } from \"../services/storageService\";\r\nimport { Player } from \"../models/types\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\n\r\nconst PlayersScreen = () => {\r\n  const navigation = useNavigation<any>();\r\n  const [players, setPlayers] = useState<Player[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadPlayers();\r\n\r\n    // Reload khi quay lại màn hình\r\n    const unsubscribe = navigation.addListener(\"focus\", () => {\r\n      loadPlayers();\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, [navigation]);\r\n\r\n  const loadPlayers = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const data = await getPlayers();\r\n      // Sắp xếp theo tên\r\n      const sortedPlayers = [...data].sort((a, b) =>\r\n        a.name.localeCompare(b.name)\r\n      );\r\n      setPlayers(sortedPlayers);\r\n    } catch (error) {\r\n      console.error(\"Lỗi khi tải danh sách người chơi:\", error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeletePlayer = (player: Player) => {\r\n    Alert.alert(\r\n      \"Xác nhận xóa\",\r\n      `Bạn có chắc chắn muốn xóa người chơi \"${player.name}\" không?`,\r\n      [\r\n        { text: \"Hủy\", style: \"cancel\" },\r\n        {\r\n          text: \"Xóa\",\r\n          style: \"destructive\",\r\n          onPress: async () => {\r\n            try {\r\n              await deletePlayer(player.id);\r\n              loadPlayers();\r\n            } catch (error) {\r\n              Alert.alert(\"Lỗi\", \"Không thể xóa người chơi\");\r\n            }\r\n          },\r\n        },\r\n      ]\r\n    );\r\n  };\r\n\r\n  const renderItem = ({ item }: { item: Player }) => (\r\n    <View style={styles.playerItem}>\r\n      <Text style={styles.playerName}>{item.name}</Text>\r\n      <TouchableOpacity\r\n        style={styles.deleteButton}\r\n        onPress={() => handleDeletePlayer(item)}\r\n      >\r\n        <Text style={styles.deleteButtonText}>Xóa</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <FlatList\r\n        data={players}\r\n        renderItem={renderItem}\r\n        keyExtractor={(item) => item.id}\r\n        contentContainerStyle={styles.listContainer}\r\n        ListEmptyComponent={\r\n          <Text style={styles.emptyText}>\r\n            {isLoading\r\n              ? \"Đang tải...\"\r\n              : \"Chưa có người chơi nào. Hãy thêm người chơi mới!\"}\r\n          </Text>\r\n        }\r\n      />\r\n\r\n      <TouchableOpacity\r\n        style={styles.addButton}\r\n        onPress={() => navigation.navigate(\"AddPlayer\")}\r\n      >\r\n        <Text style={styles.addButtonText}>+ Thêm người chơi</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: \"#f5f5f5\",\r\n  },\r\n  listContainer: {\r\n    padding: 16,\r\n    paddingBottom: 80,\r\n  },\r\n  playerItem: {\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n    backgroundColor: \"white\",\r\n    padding: 16,\r\n    borderRadius: 8,\r\n    marginBottom: 12,\r\n    elevation: 2,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 1 },\r\n    shadowOpacity: 0.22,\r\n    shadowRadius: 2.22,\r\n  },\r\n  playerName: {\r\n    fontSize: 16,\r\n    color: \"#333\",\r\n  },\r\n  deleteButton: {\r\n    backgroundColor: \"#f44336\",\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 6,\r\n    borderRadius: 4,\r\n  },\r\n  deleteButtonText: {\r\n    color: \"white\",\r\n    fontSize: 14,\r\n    fontWeight: \"500\",\r\n  },\r\n  emptyText: {\r\n    textAlign: \"center\",\r\n    marginTop: 40,\r\n    fontSize: 16,\r\n    color: \"#666\",\r\n  },\r\n  addButton: {\r\n    position: \"absolute\",\r\n    bottom: 20,\r\n    left: 20,\r\n    right: 20,\r\n    backgroundColor: \"#4caf50\",\r\n    paddingVertical: 14,\r\n    borderRadius: 8,\r\n    alignItems: \"center\",\r\n    elevation: 4,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.23,\r\n    shadowRadius: 2.62,\r\n  },\r\n  addButtonText: {\r\n    color: \"white\",\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n  },\r\n});\r\n\r\nexport default PlayersScreen;\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  Alert,\r\n} from \"react-native\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { addPlayer } from \"../services/storageService\";\r\n\r\nconst AddPlayerScreen = () => {\r\n  const navigation = useNavigation<any>();\r\n  const [name, setName] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const handleSave = async () => {\r\n    if (!name.trim()) {\r\n      Alert.alert(\"Lỗi\", \"Vui lòng nhập tên người chơi\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      await addPlayer(name.trim());\r\n      navigation.goBack();\r\n    } catch (error) {\r\n      Alert.alert(\"Lỗi\", \"Không thể thêm người chơi\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.formContainer}>\r\n        <Text style={styles.label}>Tên người chơi</Text>\r\n        <TextInput\r\n          style={styles.input}\r\n          placeholder=\"Nhập tên người chơi\"\r\n          value={name}\r\n          onChangeText={setName}\r\n          autoCapitalize=\"words\"\r\n          autoFocus\r\n        />\r\n\r\n        <TouchableOpacity\r\n          style={styles.saveButton}\r\n          onPress={handleSave}\r\n          disabled={isLoading}\r\n        >\r\n          <Text style={styles.saveButtonText}>\r\n            {isLoading ? \"Đang lưu...\" : \"Lưu người chơi\"}\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: \"#f5f5f5\",\r\n    padding: 16,\r\n  },\r\n  formContainer: {\r\n    backgroundColor: \"white\",\r\n    borderRadius: 10,\r\n    padding: 16,\r\n    elevation: 2,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 1 },\r\n    shadowOpacity: 0.22,\r\n    shadowRadius: 2.22,\r\n  },\r\n  label: {\r\n    fontSize: 16,\r\n    color: \"#555\",\r\n    marginBottom: 8,\r\n  },\r\n  input: {\r\n    borderWidth: 1,\r\n    borderColor: \"#ddd\",\r\n    borderRadius: 8,\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 10,\r\n    fontSize: 16,\r\n    marginBottom: 20,\r\n  },\r\n  saveButton: {\r\n    backgroundColor: \"#4caf50\",\r\n    paddingVertical: 14,\r\n    borderRadius: 8,\r\n    alignItems: \"center\",\r\n  },\r\n  saveButtonText: {\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n    fontSize: 16,\r\n  },\r\n});\r\n\r\nexport default AddPlayerScreen;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  ScrollView,\r\n  TouchableOpacity,\r\n  Alert,\r\n  ActivityIndicator,\r\n} from \"react-native\";\r\nimport { getSessions } from \"../services/storageService\";\r\nimport { Session, ExpenseType } from \"../models/types\";\r\nimport { formatCurrency } from \"../utils/expenseUtils\";\r\nimport { format } from \"date-fns\";\r\nimport { vi } from \"date-fns/locale\";\r\n\r\nconst StatsScreen = () => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [sessions, setSessions] = useState<Session[]>([]);\r\n  const [statsView, setStatsView] = useState<\"byMonth\" | \"byType\" | \"byPlayer\">(\r\n    \"byMonth\"\r\n  );\r\n\r\n  useEffect(() => {\r\n    loadSessions();\r\n  }, []);\r\n\r\n  const loadSessions = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const loadedSessions = await getSessions();\r\n      // Sắp xếp theo ngày mới nhất đến cũ nhất\r\n      const sortedSessions = loadedSessions.sort(\r\n        (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()\r\n      );\r\n      setSessions(sortedSessions);\r\n    } catch (error) {\r\n      console.error(\"Lỗi khi tải dữ liệu phiên:\", error);\r\n      Alert.alert(\"Lỗi\", \"Không thể tải dữ liệu thống kê\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Hàm lấy tên tháng từ date\r\n  const getMonthYearKey = (dateStr: string) => {\r\n    const date = new Date(dateStr);\r\n    return `${date.getMonth() + 1}/${date.getFullYear()}`;\r\n  };\r\n\r\n  // Hàm lấy tên hiển thị cho tháng\r\n  const getMonthYearDisplay = (monthYearKey: string) => {\r\n    const [month, year] = monthYearKey.split(\"/\");\r\n    return `Tháng ${month}/${year}`;\r\n  };\r\n\r\n  // Tính toán thống kê theo tháng\r\n  const getStatsByMonth = () => {\r\n    const monthStats: { [key: string]: { total: number; sessions: number } } =\r\n      {};\r\n\r\n    sessions.forEach((session) => {\r\n      const monthYearKey = getMonthYearKey(session.date);\r\n\r\n      if (!monthStats[monthYearKey]) {\r\n        monthStats[monthYearKey] = { total: 0, sessions: 0 };\r\n      }\r\n\r\n      session.expenses.forEach((expense) => {\r\n        monthStats[monthYearKey].total += expense.amount;\r\n      });\r\n\r\n      monthStats[monthYearKey].sessions += 1;\r\n    });\r\n\r\n    return Object.keys(monthStats)\r\n      .sort((a, b) => {\r\n        const [monthA, yearA] = a.split(\"/\").map(Number);\r\n        const [monthB, yearB] = b.split(\"/\").map(Number);\r\n\r\n        if (yearA !== yearB) {\r\n          return yearB - yearA;\r\n        }\r\n        return monthB - monthA;\r\n      })\r\n      .map((key) => ({\r\n        label: getMonthYearDisplay(key),\r\n        total: monthStats[key].total,\r\n        sessions: monthStats[key].sessions,\r\n      }));\r\n  };\r\n\r\n  // Tính toán thống kê theo loại chi phí\r\n  const getStatsByType = () => {\r\n    const typeStats: { [key in ExpenseType]: number } = {\r\n      [ExpenseType.COURT_FEE]: 0,\r\n      [ExpenseType.SHUTTLE]: 0,\r\n      [ExpenseType.DRINK]: 0,\r\n      [ExpenseType.EQUIPMENT]: 0,\r\n      [ExpenseType.OTHER]: 0,\r\n    };\r\n\r\n    sessions.forEach((session) => {\r\n      session.expenses.forEach((expense) => {\r\n        typeStats[expense.type] += expense.amount;\r\n      });\r\n    });\r\n\r\n    return Object.entries(typeStats)\r\n      .map(([type, amount]) => ({\r\n        type: type as ExpenseType,\r\n        amount,\r\n      }))\r\n      .sort((a, b) => b.amount - a.amount);\r\n  };\r\n\r\n  // Tính toán thống kê theo người chơi\r\n  const getStatsByPlayer = () => {\r\n    const playerStats: {\r\n      [playerId: string]: { name: string; sessions: number; totalPaid: number };\r\n    } = {};\r\n\r\n    sessions.forEach((session) => {\r\n      // Tổng chi phí cho buổi này\r\n      let sessionTotal = 0;\r\n      session.expenses.forEach((expense) => {\r\n        sessionTotal += expense.amount;\r\n      });\r\n\r\n      // Tính số người tham gia\r\n      const playerCount = session.players.length;\r\n      if (playerCount === 0) return;\r\n\r\n      // Chia đều chi phí\r\n      const perPlayerCost = sessionTotal / playerCount;\r\n\r\n      // Cập nhật thống kê cho từng người chơi\r\n      session.players.forEach((player) => {\r\n        if (!playerStats[player.id]) {\r\n          playerStats[player.id] = {\r\n            name: player.name,\r\n            sessions: 0,\r\n            totalPaid: 0,\r\n          };\r\n        }\r\n\r\n        playerStats[player.id].sessions += 1;\r\n        playerStats[player.id].totalPaid += perPlayerCost;\r\n      });\r\n    });\r\n\r\n    return Object.values(playerStats).sort((a, b) => b.totalPaid - a.totalPaid);\r\n  };\r\n\r\n  // Lấy tên hiển thị cho loại chi phí\r\n  const getExpenseTypeLabel = (type: ExpenseType): string => {\r\n    switch (type) {\r\n      case ExpenseType.COURT_FEE:\r\n        return \"Tiền sân\";\r\n      case ExpenseType.SHUTTLE:\r\n        return \"Tiền cầu\";\r\n      case ExpenseType.DRINK:\r\n        return \"Tiền nước\";\r\n      case ExpenseType.EQUIPMENT:\r\n        return \"Tiền phụ kiện\";\r\n      case ExpenseType.OTHER:\r\n        return \"Chi phí khác\";\r\n      default:\r\n        return \"Chi phí\";\r\n    }\r\n  };\r\n\r\n  const renderByMonth = () => {\r\n    const monthlyStats = getStatsByMonth();\r\n\r\n    if (monthlyStats.length === 0) {\r\n      return (\r\n        <View style={styles.emptyState}>\r\n          <Text style={styles.emptyText}>Không có dữ liệu</Text>\r\n        </View>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <View style={styles.statsContainer}>\r\n        {monthlyStats.map((item, index) => (\r\n          <View key={index} style={styles.statsCard}>\r\n            <Text style={styles.statsTitle}>{item.label}</Text>\r\n            <Text style={styles.statsSubtitle}>{item.sessions} buổi chơi</Text>\r\n            <Text style={styles.statsAmount}>\r\n              {formatCurrency(item.total)}\r\n            </Text>{\" \"}\r\n            <Text style={styles.statsAverage}>\r\n              <Text>Trung bình: </Text>\r\n              <Text>{formatCurrency(item.total / item.sessions)} / buổi</Text>\r\n            </Text>\r\n          </View>\r\n        ))}\r\n      </View>\r\n    );\r\n  };\r\n\r\n  const renderByType = () => {\r\n    const typeStats = getStatsByType();\r\n    const totalExpenses = typeStats.reduce((sum, item) => sum + item.amount, 0);\r\n\r\n    if (totalExpenses === 0) {\r\n      return (\r\n        <View style={styles.emptyState}>\r\n          <Text style={styles.emptyText}>Không có dữ liệu</Text>\r\n        </View>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <View style={styles.statsContainer}>\r\n        <View style={styles.statsSummary}>\r\n          <Text style={styles.statsTotalLabel}>Tổng chi phí:</Text>\r\n          <Text style={styles.statsTotal}>{formatCurrency(totalExpenses)}</Text>\r\n        </View>\r\n\r\n        {typeStats.map((item, index) => (\r\n          <View key={index} style={styles.statsRow}>\r\n            <View style={styles.statsTypeInfo}>\r\n              <Text style={styles.statsTypeLabel}>\r\n                {getExpenseTypeLabel(item.type)}\r\n              </Text>\r\n              <Text style={styles.statsTypePercentage}>\r\n                {Math.round((item.amount / totalExpenses) * 100)}%\r\n              </Text>\r\n            </View>\r\n            <Text style={styles.statsTypeAmount}>\r\n              {formatCurrency(item.amount)}\r\n            </Text>\r\n          </View>\r\n        ))}\r\n      </View>\r\n    );\r\n  };\r\n\r\n  const renderByPlayer = () => {\r\n    const playerStats = getStatsByPlayer();\r\n\r\n    if (playerStats.length === 0) {\r\n      return (\r\n        <View style={styles.emptyState}>\r\n          <Text style={styles.emptyText}>Không có dữ liệu</Text>\r\n        </View>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <View style={styles.statsContainer}>\r\n        {playerStats.map((item, index) => (\r\n          <View key={index} style={styles.statsCard}>\r\n            <Text style={styles.statsTitle}>{item.name}</Text>\r\n            <Text style={styles.statsSubtitle}>\r\n              {item.sessions} lần tham gia\r\n            </Text>\r\n            <Text style={styles.statsAmount}>\r\n              {formatCurrency(item.totalPaid)}\r\n            </Text>{\" \"}\r\n            <Text style={styles.statsAverage}>\r\n              <Text>Trung bình: </Text>\r\n              <Text>\r\n                {formatCurrency(item.totalPaid / item.sessions)} / lần\r\n              </Text>\r\n            </Text>\r\n          </View>\r\n        ))}\r\n      </View>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.tabContainer}>\r\n        <TouchableOpacity\r\n          style={[styles.tab, statsView === \"byMonth\" && styles.activeTab]}\r\n          onPress={() => setStatsView(\"byMonth\")}\r\n        >\r\n          <Text\r\n            style={[\r\n              styles.tabText,\r\n              statsView === \"byMonth\" && styles.activeTabText,\r\n            ]}\r\n          >\r\n            Theo tháng\r\n          </Text>\r\n        </TouchableOpacity>\r\n\r\n        <TouchableOpacity\r\n          style={[styles.tab, statsView === \"byType\" && styles.activeTab]}\r\n          onPress={() => setStatsView(\"byType\")}\r\n        >\r\n          <Text\r\n            style={[\r\n              styles.tabText,\r\n              statsView === \"byType\" && styles.activeTabText,\r\n            ]}\r\n          >\r\n            Theo loại\r\n          </Text>\r\n        </TouchableOpacity>\r\n\r\n        <TouchableOpacity\r\n          style={[styles.tab, statsView === \"byPlayer\" && styles.activeTab]}\r\n          onPress={() => setStatsView(\"byPlayer\")}\r\n        >\r\n          <Text\r\n            style={[\r\n              styles.tabText,\r\n              statsView === \"byPlayer\" && styles.activeTabText,\r\n            ]}\r\n          >\r\n            Theo người chơi\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n\r\n      <ScrollView style={styles.content}>\r\n        {isLoading ? (\r\n          <View style={styles.loadingContainer}>\r\n            <ActivityIndicator size=\"large\" color=\"#4caf50\" />\r\n            <Text style={styles.loadingText}>Đang tải...</Text>\r\n          </View>\r\n        ) : (\r\n          <>\r\n            {statsView === \"byMonth\" && renderByMonth()}\r\n            {statsView === \"byType\" && renderByType()}\r\n            {statsView === \"byPlayer\" && renderByPlayer()}\r\n          </>\r\n        )}\r\n      </ScrollView>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: \"#fff\",\r\n  },\r\n  loadingContainer: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    padding: 20,\r\n  },\r\n  loadingText: {\r\n    marginTop: 12,\r\n    fontSize: 16,\r\n    color: \"#555\",\r\n  },\r\n  tabContainer: {\r\n    flexDirection: \"row\",\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: \"#e0e0e0\",\r\n    backgroundColor: \"#fff\",\r\n  },\r\n  tab: {\r\n    flex: 1,\r\n    paddingVertical: 12,\r\n    alignItems: \"center\",\r\n  },\r\n  activeTab: {\r\n    borderBottomWidth: 2,\r\n    borderBottomColor: \"#4caf50\",\r\n  },\r\n  tabText: {\r\n    fontSize: 14,\r\n    color: \"#666\",\r\n  },\r\n  activeTabText: {\r\n    color: \"#4caf50\",\r\n    fontWeight: \"bold\",\r\n  },\r\n  content: {\r\n    flex: 1,\r\n    padding: 16,\r\n  },\r\n  emptyState: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    padding: 40,\r\n  },\r\n  emptyText: {\r\n    fontSize: 16,\r\n    color: \"#888\",\r\n  },\r\n  statsContainer: {\r\n    paddingBottom: 20,\r\n  },\r\n  statsCard: {\r\n    backgroundColor: \"#f9f9f9\",\r\n    borderRadius: 8,\r\n    padding: 16,\r\n    marginBottom: 12,\r\n  },\r\n  statsTitle: {\r\n    fontSize: 18,\r\n    fontWeight: \"bold\",\r\n    color: \"#333\",\r\n    marginBottom: 4,\r\n  },\r\n  statsSubtitle: {\r\n    fontSize: 14,\r\n    color: \"#666\",\r\n    marginBottom: 12,\r\n  },\r\n  statsAmount: {\r\n    fontSize: 20,\r\n    fontWeight: \"bold\",\r\n    color: \"#2e7d32\",\r\n    marginBottom: 4,\r\n  },\r\n  statsAverage: {\r\n    fontSize: 14,\r\n    color: \"#666\",\r\n  },\r\n  statsSummary: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    marginBottom: 16,\r\n  },\r\n  statsTotalLabel: {\r\n    fontSize: 16,\r\n    color: \"#333\",\r\n  },\r\n  statsTotal: {\r\n    fontSize: 18,\r\n    fontWeight: \"bold\",\r\n    color: \"#2e7d32\",\r\n  },\r\n  statsRow: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    paddingVertical: 12,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: \"#f0f0f0\",\r\n  },\r\n  statsTypeInfo: {\r\n    flex: 1,\r\n  },\r\n  statsTypeLabel: {\r\n    fontSize: 16,\r\n    color: \"#333\",\r\n  },\r\n  statsTypePercentage: {\r\n    fontSize: 14,\r\n    color: \"#888\",\r\n    marginTop: 2,\r\n  },\r\n  statsTypeAmount: {\r\n    fontSize: 16,\r\n    fontWeight: \"500\",\r\n    color: \"#2e7d32\",\r\n  },\r\n});\r\n\r\nexport default StatsScreen;\r\n","import { NavigationContainer } from \"@react-navigation/native\";\r\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\r\nimport { createBottomTabNavigator } from \"@react-navigation/bottom-tabs\";\r\nimport Ionicons from \"@expo/vector-icons/Ionicons\";\r\n\r\nimport HomeScreen from \"../screens/HomeScreen\";\r\nimport SessionDetailScreen from \"../screens/SessionDetailScreen\";\r\nimport NewSessionScreen from \"../screens/NewSessionScreen\";\r\nimport EditSessionScreen from \"../screens/EditSessionScreen\";\r\nimport PlayersScreen from \"../screens/PlayersScreen\";\r\nimport AddPlayerScreen from \"../screens/AddPlayerScreen\";\r\nimport StatsScreen from \"../screens/StatsScreen\";\r\n\r\n// Define types for navigation\r\nexport type RootStackParamList = {\r\n  MainTabs: undefined;\r\n  SessionDetail: { sessionId: string };\r\n  NewSession: undefined;\r\n  EditSession: { sessionId: string };\r\n  AddPlayer: undefined;\r\n};\r\n\r\nexport type MainTabsParamList = {\r\n  Home: undefined;\r\n  Players: undefined;\r\n  Stats: undefined;\r\n};\r\n\r\nconst Stack = createNativeStackNavigator<RootStackParamList>();\r\nconst Tab = createBottomTabNavigator<MainTabsParamList>();\r\n\r\n// Main Tab Navigator\r\nconst MainTabNavigator = () => {\r\n  return (\r\n    <Tab.Navigator\r\n      id={undefined}\r\n      screenOptions={({ route }) => ({\r\n        headerShown: true,\r\n        tabBarActiveTintColor: \"#4caf50\",\r\n        tabBarInactiveTintColor: \"gray\",\r\n        tabBarStyle: {\r\n          paddingBottom: 5,\r\n          height: 60,\r\n        },\r\n        tabBarIcon: ({ focused, color, size }) => {\r\n          let iconName: keyof typeof Ionicons.glyphMap;\r\n\r\n          if (route.name === \"Home\") {\r\n            iconName = focused ? \"home\" : \"home-outline\";\r\n          } else if (route.name === \"Players\") {\r\n            iconName = focused ? \"people\" : \"people-outline\";\r\n          } else if (route.name === \"Stats\") {\r\n            iconName = focused ? \"stats-chart\" : \"stats-chart-outline\";\r\n          } else {\r\n            iconName = \"help-outline\";\r\n          }\r\n          return <Ionicons name={iconName} size={size} color={color} />;\r\n        },\r\n      })}\r\n    >\r\n      <Tab.Screen\r\n        name=\"Home\"\r\n        component={HomeScreen}\r\n        options={{ title: \"Trang chủ\" }}\r\n      />\r\n      <Tab.Screen\r\n        name=\"Players\"\r\n        component={PlayersScreen}\r\n        options={{ title: \"Người chơi\" }}\r\n      />\r\n      <Tab.Screen\r\n        name=\"Stats\"\r\n        component={StatsScreen}\r\n        options={{ title: \"Thống kê\" }}\r\n      />\r\n    </Tab.Navigator>\r\n  );\r\n};\r\n\r\n// Main App Navigation\r\nconst AppNavigator = () => {\r\n  return (\r\n    <NavigationContainer>\r\n      <Stack.Navigator\r\n        id={undefined}\r\n        initialRouteName=\"MainTabs\"\r\n        screenOptions={{\r\n          headerStyle: {\r\n            backgroundColor: \"#4caf50\",\r\n          },\r\n          headerTintColor: \"#fff\",\r\n          headerTitleStyle: {\r\n            fontWeight: \"bold\",\r\n          },\r\n        }}\r\n      >\r\n        <Stack.Screen\r\n          name=\"MainTabs\"\r\n          component={MainTabNavigator}\r\n          options={{ headerShown: false }}\r\n        />\r\n        <Stack.Screen\r\n          name=\"SessionDetail\"\r\n          component={SessionDetailScreen}\r\n          options={{ title: \"Chi tiết buổi đánh cầu\" }}\r\n        />\r\n        <Stack.Screen\r\n          name=\"NewSession\"\r\n          component={NewSessionScreen}\r\n          options={{ title: \"Thêm buổi đánh cầu mới\" }}\r\n        />\r\n        <Stack.Screen\r\n          name=\"EditSession\"\r\n          component={EditSessionScreen}\r\n          options={{ title: \"Chỉnh sửa buổi đánh cầu\" }}\r\n        />\r\n        <Stack.Screen\r\n          name=\"AddPlayer\"\r\n          component={AddPlayerScreen}\r\n          options={{ title: \"Thêm người chơi mới\" }}\r\n        />\r\n      </Stack.Navigator>\r\n    </NavigationContainer>\r\n  );\r\n};\r\n\r\nexport default AppNavigator;\r\n","import React, { useState, useEffect } from \"react\";\nimport { StatusBar } from \"expo-status-bar\";\nimport { SafeAreaProvider } from \"react-native-safe-area-context\";\nimport { View, Text, StyleSheet, Image, ActivityIndicator } from \"react-native\";\nimport AppNavigator from \"./src/navigation/AppNavigator\";\n\nexport default function App() {\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    // Giả lập thời gian tải ứng dụng\n    setTimeout(() => {\n      setIsLoading(false);\n    }, 2000);\n  }, []);\n\n  if (isLoading) {\n    return (\n      <View style={styles.splashContainer}>\n        <Image\n          source={require(\"./assets/icon.png\")}\n          style={styles.splashImage}\n        />\n        <Text style={styles.splashTitle}>CauLongApp</Text>\n        <Text style={styles.splashSubtitle}>Quản lý chi phí đánh cầu lông</Text>\n        <ActivityIndicator size=\"large\" color=\"#4caf50\" style={styles.loader} />\n      </View>\n    );\n  }\n\n  return (\n    <SafeAreaProvider>\n      <StatusBar style=\"auto\" />\n      <AppNavigator />\n    </SafeAreaProvider>\n  );\n}\n\nconst styles = StyleSheet.create({\n  splashContainer: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundColor: \"#ffffff\",\n  },\n  splashImage: {\n    width: 120,\n    height: 120,\n    resizeMode: \"contain\",\n    marginBottom: 20,\n  },\n  splashTitle: {\n    fontSize: 28,\n    fontWeight: \"bold\",\n    color: \"#4caf50\",\n    marginBottom: 8,\n  },\n  splashSubtitle: {\n    fontSize: 16,\n    color: \"#666\",\n    marginBottom: 40,\n  },\n  loader: {\n    marginTop: 20,\n  },\n});\n","import { registerRootComponent } from 'expo';\nimport App from './App';\n\n// Đăng ký service worker cho PWA nếu đang chạy trong web\nif (typeof document !== 'undefined') {\n  // Dynamic import cho web environment\n  import('./web/register-service-worker')\n    .catch(err => console.error('Error loading service worker:', err));\n}\n\n// registerRootComponent calls AppRegistry.registerComponent('main', () => App);\n// It also ensures that whether you load the app in Expo Go or in a native build,\n// the environment is set up appropriately\nregisterRootComponent(App);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + \"6b0745a1\" + \".chunk.js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"web:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [620], () => (__webpack_require__(9836)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["formatCurrency","amount","Intl","NumberFormat","style","currency","format","generateId","Math","random","toString","substring","Date","now","SESSIONS_KEY","PLAYERS_KEY","saveSessions","async","AsyncStorage","setItem","JSON","stringify","sessions","error","console","getSessions","getItem","parse","savePlayers","players","getPlayers","addPlayer","newPlayer","id","name","push","styles","StyleSheet","create","container","flex","backgroundColor","searchContainer","flexDirection","paddingHorizontal","paddingVertical","borderBottomWidth","borderBottomColor","searchBar","alignItems","borderRadius","marginRight","searchIcon","searchInput","height","fontSize","filterButton","width","justifyContent","borderWidth","borderColor","listContainer","padding","paddingBottom","modalOverlay","modalContainer","borderTopLeftRadius","borderTopRightRadius","maxHeight","modalHeader","modalTitle","fontWeight","color","modalContent","filterLabel","marginBottom","marginTop","timeRangeButtons","timeRangeButton","timeRangeButtonActive","timeRangeText","timeRangeTextActive","filterInput","sortOptions","flexWrap","sortOption","sortOptionActive","sortOptionText","sortOptionTextActive","filterActions","resetButton","resetButtonText","applyButton","applyButtonText","emptyText","textAlign","sessionItem","elevation","shadowColor","shadowOffset","shadowOpacity","shadowRadius","sessionHeader","sessionDate","sessionLocation","sessionInfo","sessionInfoLeft","playerCount","sessionDuration","expenseAmount","addButton","position","bottom","right","addButtonText","HomeScreen","navigation","useNavigation","setSessions","useState","filteredSessions","setFilteredSessions","isLoading","setIsLoading","searchText","setSearchText","isFilterModalVisible","setIsFilterModalVisible","filterOptions","setFilterOptions","timeRange","location","setSortOption","useEffect","loadSessions","addListener","applyFilters","sortedSessions","sort","a","b","date","getTime","result","lowerSearchText","toLowerCase","filter","session","includes","notes","today","startDate","subDays","isWithinInterval","start","end","duration","expenses","reduce","sum","expense","_jsxs","View","children","_jsx","Ionicons","size","TextInput","placeholder","value","onChangeText","TouchableOpacity","onPress","FlatList","data","renderItem","item","totalExpense","navigate","sessionId","Text","locale","vi","length","floor","keyExtractor","contentContainerStyle","ListEmptyComponent","Modal","visible","animationType","transparent","onRequestClose","ScrollView","label","map","option","Object","assign","text","ExpenseType","marginVertical","header","title","paymentButton","paymentButtonText","totalText","remainingText","chartContainer","barRow","nameContainer","paidIcon","nameText","barContainer","bar","amountText","paidText","textDecorationLine","textDecorationStyle","paidBar","opacity","paidAmount","note","fontStyle","paymentRow","paymentInfo","paymentName","paymentAmount","paymentSummary","paddingTop","borderTopWidth","borderTopColor","summaryTitle","summaryRow","summaryTotal","summaryPaid","summaryRemaining","ExpenseDistribution","totalAmount","playerAmounts","onShowPaymentStatus","showPaymentModal","setShowPaymentModal","paymentStatus","setPaymentStatus","sortedPlayers","maxAmount","max","p","togglePaymentStatus","playerId","prev","totalPaid","every","player","remainingAmount","barWidthFlex","isPaid","numberOfLines","ellipsizeMode","Switch","onValueChange","trackColor","false","true","thumbColor","shareButton","shareText","marginLeft","ShareButton","calculatedExpenses","getExpenseTypeLabel","type","time","message","forEach","index","expenseType","description","divideAmong","playerNames","find","join","localeCompare","splitByPlayer","Share","share","center","scrollContent","dateText","locationText","notesText","timeInfo","timeText","durationText","section","sectionTitle","expenseItem","expenseHeader","expenseTypeContainer","expenseDescription","customBadge","customBadgeText","textShadowColor","textShadowOffset","textShadowRadius","expensePlayers","expensePlayersLabel","expensePlayersList","expensePlayerName","totalExpenseLabel","totalExpenseAmount","playerItem","playerName","playerAmount","buttonContainer","button","marginHorizontal","editButton","deleteButton","buttonText","modalButton","modalButtonText","SessionDetailScreen","route","useRoute","params","setSession","setCalculatedExpenses","loadSessionDetails","currentSession","s","calculated","playersToSplit","amountPerPlayer","calculateExpenses","Alert","alert","goBack","COURT_FEE","SHUTTLE","DRINK","EQUIPMENT","OTHER","ActivityIndicator","endTime","expenseTypeColor","getExpenseTypeColor","hasCustomDivision","borderLeftColor","borderLeftWidth","handleDelete","updatedSessions","deleteSession","datePicker","input","playersContainer","playerButton","selectedPlayer","selectedPlayerText","addPlayerContainer","addPlayerInput","addPlayerButton","addPlayerButtonText","expenseText","removeExpenseButton","removeExpenseButtonText","addExpenseContainer","expenseTypeSelector","expenseTypeLabel","expenseTypeOptions","expenseTypeOption","selectedExpenseType","expenseTypeText","selectedExpenseTypeText","expenseInput","playerSelectionContainer","playerSelectionLabel","playerSelectionList","playerSelectItem","playerSelectItemSelected","playerSelectName","playerSelectNameSelected","addExpenseButton","addExpenseButtonText","checkboxContainer","checkbox","checkboxSelected","checkmark","radioContainer","radioOuter","radioOuterSelected","radioInner","courtFeeButton","submitButton","submitButtonText","NewSessionScreen","setDate","setEndTime","setLocation","setNotes","courtFeePerHour","setCourtFeePerHour","showDatePicker","setShowDatePicker","showEndTimePicker","setShowEndTimePicker","allPlayers","setAllPlayers","selectedPlayers","setSelectedPlayers","newPlayerName","setNewPlayerName","setExpenses","currentExpense","setCurrentExpense","loadPlayers","calculateDuration","setFullYear","getFullYear","getMonth","getDate","round","shouldShowPlayerSelection","DateTimePicker","mode","display","onChange","onChangeDate","event","selectedDate","handleEndTimeChange","multiline","keyboardType","togglePlayerSelection","trim","removeExpense","values","handleExpenseTypeChange","replace","togglePlayerInExpense","handleAddExpense","parseFloat","newExpense","undefined","addCourtFeeFromRate","fee","calculateCourtFee","hourlyRate","hours","minutes","desc","selectedPlayerObjects","hourlyFee","newSession","addSession","toISOString","loadingContainer","loadingText","dateInput","timeInputContainer","timeInputLabel","timeInput","multilineInput","minHeight","textAlignVertical","playerList","margin","playerItemSelected","playerNameSelected","newPlayerContainer","newPlayerInput","expenseList","removeButton","alignSelf","removeButtonText","newExpenseContainer","selectContainer","selectLabel","selectOptions","selectOption","selectOptionSelected","selectOptionText","selectOptionTextSelected","feeContainer","feeLabel","feeInput","EditSessionScreen","originalSession","setOriginalSession","loadSession","newDate","setHours","getHours","getMinutes","findIndex","updatedSession","Error","updateSession","deleteButtonText","left","PlayersScreen","setPlayers","handleDeletePlayer","updatedPlayers","deletePlayer","formContainer","saveButton","saveButtonText","AddPlayerScreen","setName","autoCapitalize","autoFocus","disabled","tabContainer","tab","activeTab","tabText","activeTabText","content","emptyState","statsContainer","statsCard","statsTitle","statsSubtitle","statsAmount","statsAverage","statsSummary","statsTotalLabel","statsTotal","statsRow","statsTypeInfo","statsTypeLabel","statsTypePercentage","statsTypeAmount","StatsScreen","statsView","setStatsView","getMonthYearDisplay","monthYearKey","month","year","split","getStatsByMonth","monthStats","dateStr","getMonthYearKey","total","keys","monthA","yearA","Number","monthB","yearB","key","_Fragment","renderByMonth","monthlyStats","renderByType","typeStats","getStatsByType","entries","totalExpenses","renderByPlayer","playerStats","getStatsByPlayer","sessionTotal","perPlayerCost","Stack","createNativeStackNavigator","Tab","createBottomTabNavigator","MainTabNavigator","Navigator","screenOptions","headerShown","tabBarActiveTintColor","tabBarInactiveTintColor","tabBarStyle","tabBarIcon","focused","iconName","Screen","component","options","AppNavigator","NavigationContainer","initialRouteName","headerStyle","headerTintColor","headerTitleStyle","splashContainer","splashImage","resizeMode","splashTitle","splashSubtitle","loader","document","catch","err","registerRootComponent","setTimeout","Image","source","require","SafeAreaProvider","StatusBar","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","splice","r","n","getter","__esModule","d","leafPrototypes","getProto","getPrototypeOf","obj","t","this","then","ns","def","current","indexOf","getOwnPropertyNames","definition","o","defineProperty","enumerable","get","f","e","chunkId","Promise","all","promises","u","miniCssF","g","globalThis","Function","window","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","l","url","done","script","needAttach","scripts","getElementsByTagName","getAttribute","createElement","charset","timeout","nc","setAttribute","src","onScriptComplete","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","bind","target","head","appendChild","Symbol","toStringTag","installedChunks","installedChunkData","promise","resolve","reject","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}