{"version":3,"file":"static/js/main.ab13fce5.js","mappings":"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","sources":["src/utils/platformUtils.ts","src/components/web/WebIconFA.tsx","src/components/Icon.tsx","src/utils/expenseUtils.ts","src/services/storageService.ts","src/screens/HomeScreen.tsx","src/components/web/WebAlert.tsx","src/utils/crossPlatformAlert.ts","src/utils/crossPlatformShare.ts","src/models/types.ts","src/components/ExpenseDistribution.tsx","src/components/ShareButton.tsx","src/screens/SessionDetailScreen.tsx","src/components/web/WebDateTimePicker.tsx","src/screens/NewSessionScreen.tsx","src/screens/EditSessionScreen.tsx","src/screens/PlayersScreen.tsx","src/screens/AddPlayerScreen.tsx","src/screens/StatsScreen.tsx","src/navigation/AppNavigator.tsx","App.js","index.js","webpack/bootstrap","webpack/runtime/chunk loaded","webpack/runtime/compat get default export","webpack/runtime/create fake namespace object","webpack/runtime/define property getters","webpack/runtime/ensure chunk","webpack/runtime/get javascript chunk filename","webpack/runtime/get mini-css chunk filename","webpack/runtime/global","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/load script","webpack/runtime/make namespace object","webpack/runtime/publicPath","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["import { Platform } from 'react-native';\r\n\r\n// This file provides a simple way to check if we're running on web\r\nexport const isWeb = Platform.OS === 'web';\r\n\r\n// A centralized place to handle any platform-specific logic\r\nexport const platformHelper = {\r\n  isWeb,\r\n  \r\n  // Add more helper functions as needed\r\n  isIOS: Platform.OS === 'ios',\r\n  isAndroid: Platform.OS === 'android',\r\n\r\n  // For features that might not be available on web\r\n  supportsPushNotifications: Platform.OS !== 'web',\r\n  supportsNativeShare: Platform.OS !== 'web',\r\n};\r\n\r\n// Export a function to help conditionally import components\r\nexport function getPlatformComponent(webComponent: any, nativeComponent: any) {\r\n  return isWeb ? webComponent : nativeComponent;\r\n}\r\n","import React from \"react\";\r\nimport { StyleSheet, View, Platform, Text } from \"react-native\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-native-fontawesome\";\r\nimport { fas } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { far } from \"@fortawesome/free-regular-svg-icons\";\r\nimport { fab } from \"@fortawesome/free-brands-svg-icons\";\r\n\r\n// To direct mapping  trnh li dynamic lookup\r\nconst directIconMapping: Record<string, any> = {\r\n  // Tab Navigation icons\r\n  \"home\": fas.faHome,\r\n  \"home-outline\": far.faHome,\r\n  \"people\": fas.faUsers,\r\n  \"people-outline\": far.faUsers,\r\n  \"stats-chart\": fas.faChartBar,\r\n  \"stats-chart-outline\": far.faChartBar,\r\n  \"help-outline\": far.faQuestionCircle,\r\n  \"list\": fas.faList,\r\n  \"list-outline\": far.faList,\r\n\r\n  // Fallbacks to ensure all icons work\r\n  \"home-sharp\": fas.faHome,\r\n  \"people-sharp\": fas.faUsers,\r\n  \"stats-chart-sharp\": fas.faChartBar,\r\n\r\n  // Action icons\r\n  \"add\": fas.faPlus,\r\n  \"add-circle\": fas.faPlusCircle,\r\n  \"add-circle-outline\": far.faPlusCircle,\r\n  \"share\": fas.faShare,\r\n  \"share-social\": fas.faShareAlt,\r\n  \"share-social-outline\": far.faShareAlt,\r\n  \"create\": fas.faEdit,\r\n  \"create-outline\": far.faEdit,\r\n  \"trash\": fas.faTrash,\r\n  \"trash-outline\": far.faTrashAlt,\r\n  \"remove\": fas.faMinus,\r\n  \"remove-circle\": fas.faMinusCircle,\r\n  \"remove-circle-outline\": far.faMinusCircle,\r\n  \"checkmark\": fas.faCheck,\r\n  \"checkmark-circle\": fas.faCheckCircle,\r\n  \"checkmark-circle-outline\": far.faCheckCircle,\r\n  \"close\": fas.faTimes,\r\n  \"close-circle\": fas.faTimesCircle,\r\n  \"close-circle-outline\": far.faTimesCircle,\r\n  \"arrow-back\": fas.faArrowLeft,\r\n  \"arrow-forward\": fas.faArrowRight,\r\n  \"calendar\": fas.faCalendar,\r\n  \"calendar-outline\": far.faCalendar,\r\n  \"time\": fas.faClock,\r\n  \"time-outline\": far.faClock,\r\n  \"chevron-down\": fas.faChevronDown,\r\n  \"chevron-up\": fas.faChevronUp,\r\n  \"chevron-forward\": fas.faChevronRight,\r\n  \"chevron-back\": fas.faChevronLeft,\r\n  \"menu\": fas.faBars,\r\n  \"ellipsis-vertical\": fas.faEllipsisV,\r\n  \"ellipsis-horizontal\": fas.faEllipsisH,\r\n  \"search\": fas.faSearch,\r\n  \"search-outline\": far.faSearch,\r\n  \"filter\": fas.faFilter,\r\n  \"filter-outline\": far.faFilter,\r\n  \"notifications\": fas.faBell,\r\n  \"notifications-outline\": far.faBell,\r\n  \"cart\": fas.faShoppingCart,\r\n  \"cart-outline\": far.faShoppingCart,\r\n  \"settings\": fas.faCog,\r\n  \"settings-outline\": far.faCog,\r\n  \"person\": fas.faUser,\r\n  \"person-outline\": far.faUser,\r\n};\r\n\r\ninterface WebIconFAProps {\r\n  name: string;\r\n  size?: number;\r\n  color?: string;\r\n  style?: any;\r\n}\r\n\r\nconst WebIconFA: React.FC<WebIconFAProps> = ({\r\n  name,\r\n  size = 24,\r\n  color,\r\n  style,\r\n}) => {\r\n  // Ly icon trc tip t mapping\r\n  const iconDefinition = directIconMapping[name];\r\n\r\n  // Styling cho web\r\n  const webStyle =\r\n    Platform.OS === \"web\"\r\n      ? {\r\n          ...style,\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          width: size,\r\n          height: size,\r\n        }\r\n      : style;\r\n\r\n  try {\r\n    if (!iconDefinition) {\r\n      console.warn(`No icon mapping found for: ${name}, using question mark`);\r\n    }\r\n\r\n    return (\r\n      <View style={webStyle}>\r\n        <FontAwesomeIcon\r\n          icon={iconDefinition || fas.faQuestion}\r\n          size={size}\r\n          color={color}\r\n        />\r\n      </View>\r\n    );\r\n  } catch (error) {\r\n    console.error(`Error rendering icon ${name}:`, error);\r\n    // Fallback khi li - hin th du hi kiu text\r\n    return (\r\n      <View style={[webStyle, styles.fallbackContainer]}>\r\n        <Text\r\n          style={{\r\n            color: color || \"#000\",\r\n            fontSize: size ? size * 0.8 : 20,\r\n          }}\r\n        >\r\n          ?\r\n        </Text>\r\n      </View>\r\n    );\r\n  }\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  fallbackContainer: {\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n});\r\n\r\nexport default WebIconFA;\r\n","import React from \"react\";\r\nimport Ionicons from \"@expo/vector-icons/Ionicons\";\r\nimport { platformHelper } from \"../utils/platformUtils\";\r\nimport WebIcon from \"./web/WebIcon\";\r\nimport WebIconFA from \"./web/WebIconFA\";\r\n\r\ninterface IconProps {\r\n  name: string;\r\n  size?: number;\r\n  color?: string;\r\n  style?: any;\r\n}\r\n\r\n// Tr v component icon ph hp da trn nn tng\r\nconst Icon: React.FC<IconProps> = ({ name, size = 24, color, style }) => {  // Trn web, s dng WebIconFA (Font Awesome)\r\n  if (platformHelper.isWeb) {\r\n    return <WebIconFA name={name} size={size} color={color} style={style} />;\r\n  }\r\n\r\n  // Trn native, s dng Ionicons trc tip\r\n  return (\r\n    <Ionicons name={name as any} size={size} color={color} style={style} />\r\n  );\r\n};\r\n\r\nexport default Icon;\r\n","import { Expense, ExpenseCalculation, Player, Session } from '../models/types';\r\n\r\n/**\r\n * Tnh ton v chia chi ph cho mt bui nh cu\r\n * @param session Thng tin bui nh cu\r\n * @returns Kt qu tnh ton chi ph\r\n */\r\nexport const calculateExpenses = (session: Session): ExpenseCalculation => {\r\n  const result: ExpenseCalculation = {\r\n    totalAmount: 0,\r\n    splitByPlayer: {},\r\n  };\r\n\r\n  // Khi to s tin cn tr cho mi ngi chi l 0\r\n  session.players.forEach((player) => {\r\n    result.splitByPlayer[player.id] = 0;\r\n  });\r\n\r\n  // Tnh tng chi ph\r\n  session.expenses.forEach((expense) => {\r\n    result.totalAmount += expense.amount;\r\n\r\n    // Xc nh nhng ngi cn chia chi ph ny\r\n    const playersToSplit = expense.divideAmong \r\n      ? session.players.filter(p => expense.divideAmong?.includes(p.id))\r\n      : session.players;\r\n\r\n    if (playersToSplit.length === 0) return;\r\n\r\n    // Chia u chi ph\r\n    const amountPerPlayer = expense.amount / playersToSplit.length;\r\n\r\n    // Cp nht chi ph cho mi ngi chi\r\n    playersToSplit.forEach((player) => {\r\n      result.splitByPlayer[player.id] += amountPerPlayer;\r\n    });\r\n  });\r\n\r\n  return result;\r\n};\r\n\r\n/**\r\n * nh dng s thnh chui tin t VND\r\n * @param amount S tin\r\n * @returns Chui  nh dng\r\n */\r\nexport const formatCurrency = (amount: number): string => {\r\n  return new Intl.NumberFormat('vi-VN', {\r\n    style: 'currency',\r\n    currency: 'VND',\r\n  }).format(amount);\r\n};\r\n\r\n/**\r\n * To ID ngu nhin\r\n * @returns Chui ID\r\n */\r\nexport const generateId = (): string => {\r\n  return Math.random().toString(36).substring(2) + Date.now().toString(36);\r\n};\r\n","import AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { Session, Player } from '../models/types';\r\nimport { generateId } from '../utils/expenseUtils';\r\n\r\n// Keys for AsyncStorage\r\nconst SESSIONS_KEY = 'badminton_sessions';\r\nconst PLAYERS_KEY = 'badminton_players';\r\n\r\n/**\r\n * Lu danh sch bui nh cu vo b nh\r\n */\r\nexport const saveSessions = async (sessions: Session[]): Promise<void> => {\r\n  try {\r\n    await AsyncStorage.setItem(SESSIONS_KEY, JSON.stringify(sessions));\r\n  } catch (error) {\r\n    console.error('Li khi lu sessions:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Ly danh sch bui nh cu t b nh\r\n */\r\nexport const getSessions = async (): Promise<Session[]> => {\r\n  try {\r\n    const sessions = await AsyncStorage.getItem(SESSIONS_KEY);\r\n    return sessions ? JSON.parse(sessions) : [];\r\n  } catch (error) {\r\n    console.error('Li khi c sessions:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * Thm mt bui nh cu mi\r\n */\r\nexport const addSession = async (session: Omit<Session, 'id'>): Promise<Session> => {\r\n  try {\r\n    const sessions = await getSessions();\r\n    const newSession: Session = {\r\n      ...session,\r\n      id: generateId(),\r\n    };\r\n    \r\n    sessions.push(newSession);\r\n    await saveSessions(sessions);\r\n    return newSession;\r\n  } catch (error) {\r\n    console.error('Li khi thm session:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Cp nht mt bui nh cu\r\n */\r\nexport const updateSession = async (updatedSession: Session): Promise<void> => {\r\n  try {\r\n    const sessions = await getSessions();\r\n    const index = sessions.findIndex(s => s.id === updatedSession.id);\r\n    \r\n    if (index !== -1) {\r\n      sessions[index] = updatedSession;\r\n      await saveSessions(sessions);\r\n    } else {\r\n      throw new Error('Khng tm thy bui nh cu  cp nht');\r\n    }\r\n  } catch (error) {\r\n    console.error('Li khi cp nht session:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Xa mt bui nh cu\r\n */\r\nexport const deleteSession = async (sessionId: string): Promise<void> => {\r\n  try {\r\n    const sessions = await getSessions();\r\n    const updatedSessions = sessions.filter(s => s.id !== sessionId);\r\n    await saveSessions(updatedSessions);\r\n  } catch (error) {\r\n    console.error('Li khi xa session:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Lu danh sch ngi chi vo b nh\r\n */\r\nexport const savePlayers = async (players: Player[]): Promise<void> => {\r\n  try {\r\n    await AsyncStorage.setItem(PLAYERS_KEY, JSON.stringify(players));\r\n  } catch (error) {\r\n    console.error('Li khi lu players:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Ly danh sch ngi chi t b nh\r\n */\r\nexport const getPlayers = async (): Promise<Player[]> => {\r\n  try {\r\n    const players = await AsyncStorage.getItem(PLAYERS_KEY);\r\n    return players ? JSON.parse(players) : [];\r\n  } catch (error) {\r\n    console.error('Li khi c players:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * Thm ngi chi mi\r\n */\r\nexport const addPlayer = async (name: string): Promise<Player> => {\r\n  try {\r\n    const players = await getPlayers();\r\n    const newPlayer: Player = {\r\n      id: generateId(),\r\n      name,\r\n    };\r\n    \r\n    players.push(newPlayer);\r\n    await savePlayers(players);\r\n    return newPlayer;\r\n  } catch (error) {\r\n    console.error('Li khi thm ngi chi:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Xa ngi chi\r\n */\r\nexport const deletePlayer = async (playerId: string): Promise<void> => {\r\n  try {\r\n    const players = await getPlayers();\r\n    const updatedPlayers = players.filter(p => p.id !== playerId);\r\n    await savePlayers(updatedPlayers);\r\n  } catch (error) {\r\n    console.error('Li khi xa ngi chi:', error);\r\n    throw error;\r\n  }\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  FlatList,\r\n  StyleSheet,\r\n  TouchableOpacity,\r\n  TextInput,\r\n  Modal,\r\n  ScrollView,\r\n} from \"react-native\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { format, subDays, isWithinInterval } from \"date-fns\";\r\nimport { vi } from \"date-fns/locale\";\r\nimport { getSessions } from \"../services/storageService\";\r\nimport { Session } from \"../models/types\";\r\nimport { formatCurrency } from \"../utils/expenseUtils\";\r\nimport Icon from \"../components/Icon\";\r\n\r\nconst HomeScreen = () => {\r\n  const navigation = useNavigation<any>();\r\n  const [sessions, setSessions] = useState<Session[]>([]);\r\n  const [filteredSessions, setFilteredSessions] = useState<Session[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  const [isFilterModalVisible, setIsFilterModalVisible] = useState(false);\r\n  const [filterOptions, setFilterOptions] = useState({\r\n    timeRange: \"all\", // all, week, month, custom\r\n    location: \"\",\r\n  });\r\n  const [sortOption, setSortOption] = useState(\"dateDesc\"); // dateDesc, durationDesc, costDesc\r\n\r\n  useEffect(() => {\r\n    loadSessions();\r\n\r\n    // Theo di thay i t mn hnh khc v cp nht li danh sch\r\n    const unsubscribe = navigation.addListener(\"focus\", () => {\r\n      loadSessions();\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, [navigation]);\r\n\r\n  // Apply filters when sessions or filter criteria change\r\n  useEffect(() => {\r\n    applyFilters();\r\n  }, [sessions, searchText, filterOptions, sortOption]);\r\n  const loadSessions = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const data = await getSessions();\r\n      // Sp xp theo ngy mi nht\r\n      const sortedSessions = [...data].sort(\r\n        (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()\r\n      );\r\n      setSessions(sortedSessions);\r\n      setFilteredSessions(sortedSessions);\r\n    } catch (error) {\r\n      console.error(\"Li khi ti sessions:\", error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const applyFilters = () => {\r\n    let result = [...sessions];\r\n\r\n    // Filter by search text (location or notes)\r\n    if (searchText) {\r\n      const lowerSearchText = searchText.toLowerCase();\r\n      result = result.filter(\r\n        (session) =>\r\n          session.location.toLowerCase().includes(lowerSearchText) ||\r\n          (session.notes &&\r\n            session.notes.toLowerCase().includes(lowerSearchText))\r\n      );\r\n    }\r\n\r\n    // Filter by time range\r\n    if (filterOptions.timeRange !== \"all\") {\r\n      const today = new Date();\r\n      const startDate =\r\n        filterOptions.timeRange === \"week\"\r\n          ? subDays(today, 7)\r\n          : subDays(today, 30); // month\r\n\r\n      result = result.filter((session) => {\r\n        const sessionDate = new Date(session.date);\r\n        return isWithinInterval(sessionDate, { start: startDate, end: today });\r\n      });\r\n    }\r\n\r\n    // Filter by specific location\r\n    if (filterOptions.location) {\r\n      result = result.filter((session) =>\r\n        session.location\r\n          .toLowerCase()\r\n          .includes(filterOptions.location.toLowerCase())\r\n      );\r\n    }\r\n\r\n    // Sort the results based on the selected sort option\r\n    result.sort((a, b) => {\r\n      switch (sortOption) {\r\n        case \"dateDesc\":\r\n          return new Date(b.date).getTime() - new Date(a.date).getTime();\r\n        case \"dateAsc\":\r\n          return new Date(a.date).getTime() - new Date(b.date).getTime();\r\n        case \"durationDesc\":\r\n          return (b.duration || 0) - (a.duration || 0);\r\n        case \"durationAsc\":\r\n          return (a.duration || 0) - (b.duration || 0);\r\n        case \"costDesc\":\r\n          const totalCostB = b.expenses.reduce(\r\n            (sum, expense) => sum + expense.amount,\r\n            0\r\n          );\r\n          const totalCostA = a.expenses.reduce(\r\n            (sum, expense) => sum + expense.amount,\r\n            0\r\n          );\r\n          return totalCostB - totalCostA;\r\n        case \"costAsc\":\r\n          const totalCostAAsc = a.expenses.reduce(\r\n            (sum, expense) => sum + expense.amount,\r\n            0\r\n          );\r\n          const totalCostBAsc = b.expenses.reduce(\r\n            (sum, expense) => sum + expense.amount,\r\n            0\r\n          );\r\n          return totalCostAAsc - totalCostBAsc;\r\n        default:\r\n          return 0;\r\n      }\r\n    });\r\n\r\n    setFilteredSessions(result);\r\n  };\r\n\r\n  const renderFilterModal = () => (\r\n    <Modal\r\n      visible={isFilterModalVisible}\r\n      animationType=\"slide\"\r\n      transparent={true}\r\n      onRequestClose={() => setIsFilterModalVisible(false)}\r\n    >\r\n      <View style={styles.modalOverlay}>\r\n        <View style={styles.modalContainer}>\r\n          <View style={styles.modalHeader}>\r\n            <Text style={styles.modalTitle}>\r\n              {\" \"}\r\n              <Text>Lc bui nh cu</Text>\r\n            </Text>{\" \"}\r\n            <TouchableOpacity onPress={() => setIsFilterModalVisible(false)}>\r\n              <Icon name=\"close\" size={24} color=\"#333\" />\r\n            </TouchableOpacity>\r\n          </View>\r\n\r\n          <ScrollView style={styles.modalContent}>\r\n            <Text style={styles.filterLabel}>\r\n              {\" \"}\r\n              <Text>Khong thi gian:</Text>\r\n            </Text>\r\n            <View style={styles.timeRangeButtons}>\r\n              {[\r\n                { value: \"all\", label: \"Tt c\" },\r\n                { value: \"week\", label: \"Tun ny\" },\r\n                { value: \"month\", label: \"Thng ny\" },\r\n              ].map((option) => (\r\n                <TouchableOpacity\r\n                  key={option.value}\r\n                  style={[\r\n                    styles.timeRangeButton,\r\n                    filterOptions.timeRange === option.value &&\r\n                      styles.timeRangeButtonActive,\r\n                  ]}\r\n                  onPress={() =>\r\n                    setFilterOptions({\r\n                      ...filterOptions,\r\n                      timeRange: option.value,\r\n                    })\r\n                  }\r\n                >\r\n                  <Text\r\n                    style={\r\n                      filterOptions.timeRange === option.value\r\n                        ? styles.timeRangeTextActive\r\n                        : styles.timeRangeText\r\n                    }\r\n                  >\r\n                    <Text>{option.label}</Text>\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              ))}\r\n            </View>{\" \"}\r\n            <Text style={styles.filterLabel}>\r\n              <Text>a im:</Text>\r\n            </Text>\r\n            <TextInput\r\n              style={styles.filterInput}\r\n              value={filterOptions.location}\r\n              onChangeText={(text) =>\r\n                setFilterOptions({ ...filterOptions, location: text })\r\n              }\r\n              placeholder=\"Nhp tn a im\"\r\n            />\r\n            <Text style={styles.filterLabel}>\r\n              <Text>Sp xp theo:</Text>\r\n            </Text>\r\n            <View style={styles.sortOptions}>\r\n              {[\r\n                { value: \"dateDesc\", label: \"Mi nht\" },\r\n                { value: \"dateAsc\", label: \"C nht\" },\r\n                { value: \"durationDesc\", label: \"Thi lng\" },\r\n                { value: \"costDesc\", label: \"Chi ph\" },\r\n              ].map((option) => (\r\n                <TouchableOpacity\r\n                  key={option.value}\r\n                  style={[\r\n                    styles.sortOption,\r\n                    sortOption === option.value && styles.sortOptionActive,\r\n                  ]}\r\n                  onPress={() => setSortOption(option.value)}\r\n                >\r\n                  <Text\r\n                    style={\r\n                      sortOption === option.value\r\n                        ? styles.sortOptionTextActive\r\n                        : styles.sortOptionText\r\n                    }\r\n                  >\r\n                    {option.label}\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              ))}{\" \"}\r\n            </View>\r\n            <Text style={styles.filterLabel}>\r\n              <Text>Sp xp theo:</Text>\r\n            </Text>\r\n            <View style={styles.sortOptions}>\r\n              {[\r\n                { value: \"dateDesc\", label: \"Ngy (mi nht trc)\" },\r\n                { value: \"dateAsc\", label: \"Ngy (c nht trc)\" },\r\n                { value: \"durationDesc\", label: \"Thi gian (gim dn)\" },\r\n                { value: \"durationAsc\", label: \"Thi gian (tng dn)\" },\r\n                { value: \"costDesc\", label: \"Chi ph (cao n thp)\" },\r\n                { value: \"costAsc\", label: \"Chi ph (thp n cao)\" },\r\n              ].map((option) => (\r\n                <TouchableOpacity\r\n                  key={option.value}\r\n                  style={[\r\n                    styles.sortOption,\r\n                    sortOption === option.value && styles.sortOptionActive,\r\n                  ]}\r\n                  onPress={() => setSortOption(option.value)}\r\n                >\r\n                  <Text\r\n                    style={\r\n                      sortOption === option.value\r\n                        ? styles.sortOptionTextActive\r\n                        : styles.sortOptionText\r\n                    }\r\n                  >\r\n                    {option.label}\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              ))}\r\n            </View>\r\n            <View style={styles.filterActions}>\r\n              <TouchableOpacity\r\n                style={styles.resetButton}\r\n                onPress={() => {\r\n                  setFilterOptions({ timeRange: \"all\", location: \"\" });\r\n                  setSearchText(\"\");\r\n                  setSortOption(\"dateDesc\");\r\n                }}\r\n              >\r\n                <Text style={styles.resetButtonText}>\r\n                  <Text>t li</Text>\r\n                </Text>\r\n              </TouchableOpacity>\r\n\r\n              <TouchableOpacity\r\n                style={styles.applyButton}\r\n                onPress={() => setIsFilterModalVisible(false)}\r\n              >\r\n                <Text style={styles.applyButtonText}>\r\n                  <Text>p dng</Text>\r\n                </Text>\r\n              </TouchableOpacity>\r\n            </View>\r\n          </ScrollView>\r\n        </View>\r\n      </View>\r\n    </Modal>\r\n  );\r\n\r\n  const renderItem = ({ item }: { item: Session }) => {\r\n    // Tnh tng chi ph ca bui nh cu\r\n    const totalExpense = item.expenses.reduce(\r\n      (sum, expense) => sum + expense.amount,\r\n      0\r\n    );\r\n\r\n    return (\r\n      <TouchableOpacity\r\n        style={styles.sessionItem}\r\n        onPress={() =>\r\n          navigation.navigate(\"SessionDetail\", { sessionId: item.id })\r\n        }\r\n      >\r\n        <View style={styles.sessionHeader}>\r\n          {\" \"}\r\n          <Text style={styles.sessionDate}>\r\n            <Text>\r\n              {format(new Date(item.date), \"EEEE, dd/MM/yyyy\", { locale: vi })}\r\n            </Text>\r\n          </Text>\r\n          <Text style={styles.sessionLocation}>\r\n            <Text>{item.location}</Text>\r\n          </Text>\r\n        </View>\r\n        <View style={styles.sessionInfo}>\r\n          <View style={styles.sessionInfoLeft}>\r\n            <Text style={styles.playerCount}>\r\n              {item.players.length} <Text>ngi tham gia</Text>\r\n            </Text>\r\n            {item.duration && (\r\n              <Text style={styles.sessionDuration}>\r\n                <Text>\r\n                  {Math.floor(item.duration / 60) > 0\r\n                    ? `${Math.floor(item.duration / 60)} gi ${\r\n                        item.duration % 60\r\n                      } pht`\r\n                    : `${item.duration} pht`}\r\n                </Text>\r\n              </Text>\r\n            )}\r\n          </View>{\" \"}\r\n          <Text style={styles.expenseAmount}>\r\n            <Text>{formatCurrency(totalExpense)}</Text>\r\n          </Text>\r\n        </View>\r\n      </TouchableOpacity>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.searchContainer}>\r\n        <View style={styles.searchBar}>\r\n          {\" \"}\r\n          <Icon\r\n            name=\"search\"\r\n            size={20}\r\n            color=\"#666\"\r\n            style={styles.searchIcon}\r\n          />\r\n          <TextInput\r\n            style={styles.searchInput}\r\n            placeholder=\"Tm kim theo a im...\"\r\n            value={searchText}\r\n            onChangeText={setSearchText}\r\n          />\r\n          {searchText ? (\r\n            <TouchableOpacity onPress={() => setSearchText(\"\")}>\r\n              <Icon name=\"close-circle\" size={18} color=\"#666\" />\r\n            </TouchableOpacity>\r\n          ) : null}\r\n        </View>{\" \"}\r\n        <TouchableOpacity\r\n          style={styles.filterButton}\r\n          onPress={() => setIsFilterModalVisible(true)}\r\n        >\r\n          <Icon name=\"options\" size={20} color=\"#4caf50\" />\r\n        </TouchableOpacity>\r\n      </View>\r\n\r\n      <FlatList\r\n        data={filteredSessions}\r\n        renderItem={renderItem}\r\n        keyExtractor={(item) => item.id}\r\n        contentContainerStyle={styles.listContainer}\r\n        ListEmptyComponent={\r\n          <Text style={styles.emptyText}>\r\n            {isLoading\r\n              ? \"ang ti...\"\r\n              : filteredSessions.length === 0 && sessions.length > 0\r\n              ? \"Khng tm thy kt qu no.\"\r\n              : \"Cha c bui nh cu no. Thm bui nh cu mi!\"}\r\n          </Text>\r\n        }\r\n      />\r\n\r\n      {renderFilterModal()}\r\n\r\n      <TouchableOpacity\r\n        style={styles.addButton}\r\n        onPress={() => navigation.navigate(\"NewSession\")}\r\n      >\r\n        <Text style={styles.addButtonText}>+</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: \"#f5f5f5\",\r\n  },\r\n  searchContainer: {\r\n    flexDirection: \"row\",\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 10,\r\n    backgroundColor: \"white\",\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: \"#eee\",\r\n  },\r\n  searchBar: {\r\n    flex: 1,\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#f0f0f0\",\r\n    borderRadius: 20,\r\n    paddingHorizontal: 12,\r\n    marginRight: 8,\r\n  },\r\n  searchIcon: {\r\n    marginRight: 8,\r\n  },\r\n  searchInput: {\r\n    flex: 1,\r\n    height: 36,\r\n    fontSize: 14,\r\n  },\r\n  filterButton: {\r\n    width: 36,\r\n    height: 36,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    borderWidth: 1,\r\n    borderColor: \"#4caf50\",\r\n    borderRadius: 18,\r\n  },\r\n  listContainer: {\r\n    padding: 16,\r\n    paddingBottom: 80,\r\n  },\r\n  // ... existing session item styles ...\r\n\r\n  // Modal styles\r\n  modalOverlay: {\r\n    flex: 1,\r\n    backgroundColor: \"rgba(0,0,0,0.5)\",\r\n    justifyContent: \"flex-end\",\r\n  },\r\n  modalContainer: {\r\n    backgroundColor: \"white\",\r\n    borderTopLeftRadius: 16,\r\n    borderTopRightRadius: 16,\r\n    maxHeight: \"80%\",\r\n  },\r\n  modalHeader: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 12,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: \"#eee\",\r\n  },\r\n  modalTitle: {\r\n    fontSize: 18,\r\n    fontWeight: \"bold\",\r\n    color: \"#333\",\r\n  },\r\n  modalContent: {\r\n    padding: 16,\r\n  },\r\n  filterLabel: {\r\n    fontSize: 16,\r\n    fontWeight: \"500\",\r\n    marginBottom: 8,\r\n    marginTop: 12,\r\n    color: \"#333\",\r\n  },\r\n  timeRangeButtons: {\r\n    flexDirection: \"row\",\r\n    marginBottom: 16,\r\n  },\r\n  timeRangeButton: {\r\n    flex: 1,\r\n    paddingVertical: 8,\r\n    paddingHorizontal: 12,\r\n    borderRadius: 20,\r\n    borderWidth: 1,\r\n    borderColor: \"#ddd\",\r\n    marginRight: 8,\r\n    alignItems: \"center\",\r\n  },\r\n  timeRangeButtonActive: {\r\n    backgroundColor: \"#4caf50\",\r\n    borderColor: \"#4caf50\",\r\n  },\r\n  timeRangeText: {\r\n    color: \"#555\",\r\n  },\r\n  timeRangeTextActive: {\r\n    color: \"white\",\r\n    fontWeight: \"500\",\r\n  },\r\n  filterInput: {\r\n    borderWidth: 1,\r\n    borderColor: \"#ddd\",\r\n    borderRadius: 8,\r\n    padding: 10,\r\n    marginBottom: 16,\r\n  },\r\n  sortOptions: {\r\n    flexDirection: \"row\",\r\n    flexWrap: \"wrap\",\r\n    marginBottom: 16,\r\n  },\r\n  sortOption: {\r\n    flex: 1,\r\n    paddingVertical: 8,\r\n    paddingHorizontal: 12,\r\n    borderRadius: 20,\r\n    borderWidth: 1,\r\n    borderColor: \"#ddd\",\r\n    marginRight: 8,\r\n    marginBottom: 8,\r\n    alignItems: \"center\",\r\n  },\r\n  sortOptionActive: {\r\n    backgroundColor: \"#4caf50\",\r\n    borderColor: \"#4caf50\",\r\n  },\r\n  sortOptionText: {\r\n    color: \"#555\",\r\n    fontSize: 13,\r\n  },\r\n  sortOptionTextActive: {\r\n    color: \"white\",\r\n    fontWeight: \"500\",\r\n    fontSize: 13,\r\n  },\r\n  filterActions: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"flex-end\",\r\n    marginTop: 16,\r\n  },\r\n  resetButton: {\r\n    paddingVertical: 10,\r\n    paddingHorizontal: 16,\r\n    marginRight: 12,\r\n  },\r\n  resetButtonText: {\r\n    color: \"#666\",\r\n    fontSize: 16,\r\n  },\r\n  applyButton: {\r\n    backgroundColor: \"#4caf50\",\r\n    paddingVertical: 10,\r\n    paddingHorizontal: 20,\r\n    borderRadius: 8,\r\n  },\r\n  applyButtonText: {\r\n    color: \"white\",\r\n    fontWeight: \"500\",\r\n    fontSize: 16,\r\n  },\r\n  emptyText: {\r\n    textAlign: \"center\",\r\n    marginTop: 40,\r\n    fontSize: 16,\r\n    color: \"#666\",\r\n  },\r\n\r\n  // Keep existing styles\r\n  sessionItem: {\r\n    backgroundColor: \"white\",\r\n    borderRadius: 10,\r\n    padding: 16,\r\n    marginBottom: 16,\r\n    elevation: 2,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 1 },\r\n    shadowOpacity: 0.22,\r\n    shadowRadius: 2.22,\r\n  },\r\n  sessionHeader: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    marginBottom: 8,\r\n  },\r\n  sessionDate: {\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n    color: \"#333\",\r\n  },\r\n  sessionLocation: {\r\n    fontSize: 14,\r\n    color: \"#666\",\r\n  },\r\n  sessionInfo: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    marginTop: 8,\r\n  },\r\n  sessionInfoLeft: {\r\n    flexDirection: \"column\",\r\n  },\r\n  playerCount: {\r\n    fontSize: 14,\r\n    color: \"#555\",\r\n  },\r\n  sessionDuration: {\r\n    fontSize: 13,\r\n    color: \"#666\",\r\n    marginTop: 2,\r\n  },\r\n  expenseAmount: {\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n    color: \"#2e7d32\",\r\n  },\r\n  addButton: {\r\n    position: \"absolute\",\r\n    bottom: 20,\r\n    right: 20,\r\n    width: 56,\r\n    height: 56,\r\n    borderRadius: 28,\r\n    backgroundColor: \"#4caf50\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    elevation: 5,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.25,\r\n    shadowRadius: 3.84,\r\n  },\r\n  addButtonText: {\r\n    fontSize: 24,\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n  },\r\n});\r\n\r\nexport default HomeScreen;\r\n","import React from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  Modal,\r\n  StyleSheet,\r\n  TouchableOpacity,\r\n  Platform,\r\n  Alert as RNAlert,\r\n} from \"react-native\";\r\n\r\ninterface AlertButton {\r\n  text: string;\r\n  onPress?: () => void;\r\n  style?: \"default\" | \"cancel\" | \"destructive\";\r\n}\r\n\r\ninterface WebAlertProps {\r\n  visible: boolean;\r\n  title: string;\r\n  message?: string;\r\n  buttons?: AlertButton[];\r\n  onDismiss: () => void;\r\n}\r\n\r\nconst WebAlert: React.FC<WebAlertProps> = ({\r\n  visible,\r\n  title,\r\n  message,\r\n  buttons = [{ text: \"OK\" }],\r\n  onDismiss,\r\n}) => {\r\n  if (!visible) return null;\r\n\r\n  return (\r\n    <Modal\r\n      transparent={true}\r\n      visible={visible}\r\n      animationType=\"fade\"\r\n      onRequestClose={onDismiss}\r\n    >\r\n      <View style={styles.centeredView}>\r\n        <View style={styles.modalView}>\r\n          <Text style={styles.modalTitle}>{title}</Text>\r\n          {message && <Text style={styles.modalMessage}>{message}</Text>}\r\n\r\n          <View style={styles.buttonsContainer}>\r\n            {buttons.map((button, index) => (\r\n              <TouchableOpacity\r\n                key={index}\r\n                style={[\r\n                  styles.button,\r\n                  button.style === \"destructive\" && styles.destructiveButton,\r\n                  button.style === \"cancel\" && styles.cancelButton,\r\n                ]}\r\n                onPress={() => {\r\n                  if (button.onPress) button.onPress();\r\n                  onDismiss();\r\n                }}\r\n              >\r\n                <Text\r\n                  style={[\r\n                    styles.buttonText,\r\n                    button.style === \"destructive\" && styles.destructiveText,\r\n                    button.style === \"cancel\" && styles.cancelText,\r\n                  ]}\r\n                >\r\n                  {button.text}\r\n                </Text>\r\n              </TouchableOpacity>\r\n            ))}\r\n          </View>\r\n        </View>\r\n      </View>\r\n    </Modal>\r\n  );\r\n};\r\n\r\n// Create a function to match React Native's Alert.alert API\r\nexport const WebAlertManager = {\r\n  alert: (\r\n    title: string,\r\n    message?: string,\r\n    buttons?: AlertButton[],\r\n    options?: { cancelable?: boolean; onDismiss?: () => void }\r\n  ) => {\r\n    if (Platform.OS !== \"web\") {\r\n      // Use React Native's Alert on non-web platforms\r\n      RNAlert.alert(title, message, buttons, options);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Fallback native browser alert when in simpler scenarios\r\n      if (!buttons || buttons.length <= 1) {\r\n        window.alert(`${title}\\n${message || \"\"}`);\r\n        if (buttons && buttons[0] && buttons[0].onPress) {\r\n          setTimeout(() => buttons[0].onPress?.(), 0);\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Nu c nhiu nt, s dng confirm hoc alert ty trng hp\r\n      if (buttons.length === 2) {\r\n        const isConfirm = buttons.some((btn) => btn.style === \"cancel\");\r\n        if (isConfirm) {\r\n          const confirmResult = window.confirm(`${title}\\n${message || \"\"}`);\r\n\r\n          // Tm nt cancel v nt confirm\r\n          const cancelButton = buttons.find((btn) => btn.style === \"cancel\");\r\n          const confirmButton = buttons.find((btn) => btn.style !== \"cancel\");\r\n\r\n          if (confirmResult && confirmButton?.onPress) {\r\n            setTimeout(() => confirmButton.onPress?.(), 0);\r\n          } else if (!confirmResult && cancelButton?.onPress) {\r\n            setTimeout(() => cancelButton.onPress?.(), 0);\r\n          }\r\n          return;\r\n        }\r\n      }\r\n\r\n      // Nu trng hp phc tp hn, dng div  cha alert\r\n      const alertContainer = document.createElement(\"div\");\r\n      alertContainer.id = \"web-alert-container\";\r\n      document.body.appendChild(alertContainer);\r\n\r\n      const destroyAlert = () => {\r\n        if (alertContainer && document.body.contains(alertContainer)) {\r\n          document.body.removeChild(alertContainer);\r\n        }\r\n      };\r\n\r\n      // Create a simple alert for web using the browser's alert\r\n      // This is a simple fallback; in a real app you would render a React component\r\n      if (!buttons || buttons.length === 0) {\r\n        window.alert(message ? `${title}\\n\\n${message}` : title);\r\n        destroyAlert();\r\n        return;\r\n      }\r\n\r\n      // For simple confirmations\r\n      if (\r\n        buttons.length === 2 &&\r\n        buttons[0].style === \"cancel\" &&\r\n        buttons[1].style === \"destructive\"\r\n      ) {\r\n        if (window.confirm(message ? `${title}\\n\\n${message}` : title)) {\r\n          if (buttons[1].onPress) buttons[1].onPress();\r\n        } else {\r\n          if (buttons[0].onPress) buttons[0].onPress();\r\n        }\r\n        destroyAlert();\r\n        return;\r\n      }\r\n\r\n      // For simple alerts with just an OK button\r\n      window.alert(message ? `${title}\\n\\n${message}` : title);\r\n      if (buttons[0] && buttons[0].onPress) buttons[0].onPress();\r\n      destroyAlert();\r\n    } catch (error) {\r\n      console.error(\"Error showing web alert:\", error);\r\n      window.alert(`${title}\\n${message || \"\"}`);\r\n    }\r\n  },\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  centeredView: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n  },\r\n  modalView: {\r\n    backgroundColor: \"white\",\r\n    borderRadius: 10,\r\n    padding: 20,\r\n    width: \"80%\",\r\n    maxWidth: 400,\r\n    alignItems: \"center\",\r\n    shadowColor: \"#000\",\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 2,\r\n    },\r\n    shadowOpacity: 0.25,\r\n    shadowRadius: 4,\r\n    elevation: 5,\r\n  },\r\n  modalTitle: {\r\n    fontSize: 18,\r\n    fontWeight: \"bold\",\r\n    marginBottom: 10,\r\n    textAlign: \"center\",\r\n  },\r\n  modalMessage: {\r\n    fontSize: 16,\r\n    marginBottom: 20,\r\n    textAlign: \"center\",\r\n  },\r\n  buttonsContainer: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-around\",\r\n    width: \"100%\",\r\n  },\r\n  button: {\r\n    padding: 10,\r\n    borderRadius: 5,\r\n    minWidth: 80,\r\n    backgroundColor: \"#2196F3\",\r\n    margin: 5,\r\n  },\r\n  destructiveButton: {\r\n    backgroundColor: \"#f44336\",\r\n  },\r\n  cancelButton: {\r\n    backgroundColor: \"#9e9e9e\",\r\n  },\r\n  buttonText: {\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n    textAlign: \"center\",\r\n  },\r\n  destructiveText: {\r\n    color: \"white\",\r\n  },\r\n  cancelText: {\r\n    color: \"white\",\r\n  },\r\n});\r\n\r\nexport default WebAlert;\r\n","import { Alert as RNAlert, Platform } from 'react-native';\r\nimport { WebAlertManager } from '../components/web/WebAlert';\r\n\r\n// Interface matching React Native's Alert functionality\r\ninterface AlertButton {\r\n  text: string;\r\n  onPress?: () => void;\r\n  style?: 'default' | 'cancel' | 'destructive';\r\n}\r\n\r\ninterface AlertOptions {\r\n  cancelable?: boolean;\r\n  onDismiss?: () => void;\r\n}\r\n\r\n// Create a unified Alert implementation\r\nconst CrossPlatformAlert = {\r\n  alert: (\r\n    title: string,\r\n    message?: string,\r\n    buttons?: AlertButton[],\r\n    options?: AlertOptions\r\n  ) => {\r\n    if (Platform.OS === 'web') {\r\n      // Use our web implementation on web platform\r\n      WebAlertManager.alert(title, message, buttons, options);\r\n    } else {\r\n      // Use React Native's Alert on native platforms\r\n      RNAlert.alert(title, message, buttons, options);\r\n    }\r\n  }\r\n};\r\n\r\nexport default CrossPlatformAlert;\r\n","import { Share as RNShare, Platform } from 'react-native';\r\n\r\n// Interface that matches React Native's share options\r\ninterface ShareContent {\r\n  message: string;\r\n  title?: string;\r\n  url?: string;\r\n}\r\n\r\ninterface ShareResponse {\r\n  action: string;\r\n  activityType?: string;\r\n}\r\n\r\n// Create a unified Share implementation\r\nconst CrossPlatformShare = {\r\n  share: async (options: ShareContent): Promise<ShareResponse> => {\r\n    if (Platform.OS === 'web') {\r\n      try {\r\n        // Use Web Share API if available\r\n        if (navigator.share) {\r\n          await navigator.share({\r\n            title: options.title,\r\n            text: options.message,\r\n            url: options.url,\r\n          });\r\n          return { action: 'sharedAction' };\r\n        } else {\r\n          // Fallback for browsers without Web Share API\r\n          // Create a temporary textarea to copy text to clipboard\r\n          const textarea = document.createElement('textarea');\r\n          textarea.value = options.message || '';\r\n          document.body.appendChild(textarea);\r\n          textarea.select();\r\n          document.execCommand('copy');\r\n          document.body.removeChild(textarea);\r\n          \r\n          // Alert user about copy\r\n          alert('Ni dung  c sao chp vo clipboard!');\r\n          return { action: 'sharedAction' };\r\n        }\r\n      } catch (error) {\r\n        console.error('Error sharing content:', error);\r\n        return { action: 'dismissedAction' };\r\n      }\r\n    } else {\r\n      // Use React Native's Share on native platforms\r\n      return await RNShare.share(options);\r\n    }\r\n  }\r\n};\r\n\r\nexport default CrossPlatformShare;\r\n","// nh ngha cc kiu d liu cho ng dng\r\n\r\n// Ngi tham gia chi cu\r\nexport interface Player {\r\n  id: string;\r\n  name: string;\r\n}\r\n\r\n// Loi chi ph\r\nexport enum ExpenseType {\r\n  COURT_FEE = 'court_fee', // Tin sn\r\n  SHUTTLE = 'shuttle',     // Tin cu\r\n  DRINK = 'drink',         // Tin nc\r\n  EQUIPMENT = 'equipment', // Tin qun cn, ph kin\r\n  OTHER = 'other',         // Chi ph khc\r\n}\r\n\r\n// Chi ph n l\r\nexport interface Expense {\r\n  id: string;\r\n  type: ExpenseType;\r\n  amount: number;\r\n  description: string;\r\n  divideAmong?: string[]; // ID ca cc ngi chi cn chia u chi ph ny. Nu khng c, mc nh chia cho tt c\r\n}\r\n\r\n// Bui nh cu\r\nexport interface Session {\r\n  id: string;\r\n  date: string; // ISO string\r\n  endTime?: string; // Thi gian kt thc (ISO string)\r\n  duration?: number; // Thi lng tnh bng pht\r\n  courtFeePerHour?: number; // Gi thu sn mi gi\r\n  players: Player[];\r\n  expenses: Expense[];\r\n  location: string;\r\n  notes?: string;\r\n  paymentStatus?: Record<string, boolean>; // Trng thi thanh ton theo player ID\r\n}\r\n\r\n// Kt qu tnh chi ph\r\nexport interface ExpenseCalculation {\r\n  totalAmount: number;\r\n  splitByPlayer: Record<string, number>; // Map player ID -> s tin cn tr\r\n}\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  TouchableOpacity,\r\n  Modal,\r\n  ScrollView,\r\n  Switch,\r\n  Alert,\r\n} from \"react-native\";\r\nimport { formatCurrency } from \"../utils/expenseUtils\";\r\nimport { CrossPlatformAlert } from \"../utils\";\r\nimport Icon from \"./Icon\";\r\n\r\ntype ExpenseDistributionProps = {\r\n  totalAmount: number;\r\n  playerAmounts: {\r\n    id: string;\r\n    name: string;\r\n    amount: number;\r\n  }[];\r\n  onShowPaymentStatus?: () => void;\r\n};\r\n\r\n/**\r\n * Component hin th phn b chi ph vi biu  trc quan\r\n * Cho php theo di trng thi thanh ton ca tng ngi chi\r\n */\r\nconst ExpenseDistribution = ({\r\n  totalAmount,\r\n  playerAmounts,\r\n  onShowPaymentStatus,\r\n}: ExpenseDistributionProps) => {\r\n  const [showPaymentModal, setShowPaymentModal] = useState(false);\r\n  const [paymentStatus, setPaymentStatus] = useState<Record<string, boolean>>(\r\n    {}\r\n  );\r\n\r\n  // Sp xp ngi chi theo s tin gim dn\r\n  const sortedPlayers = [...playerAmounts].sort((a, b) => b.amount - a.amount);\r\n\r\n  // Tm s tin ln nht  tnh t l\r\n  const maxAmount = Math.max(...playerAmounts.map((p) => p.amount), 1);\r\n  // Toggle payment status for a player\r\n  const togglePaymentStatus = (playerId: string) => {\r\n    setPaymentStatus((prev) => ({\r\n      ...prev,\r\n      [playerId]: !prev[playerId],\r\n    }));\r\n  };\r\n\r\n  // Check if all players have paid\r\n  const allPaid = sortedPlayers.every((player) => paymentStatus[player.id]);\r\n\r\n  // Calculate total amount paid\r\n  const totalPaid = sortedPlayers.reduce((sum, player) => {\r\n    return sum + (paymentStatus[player.id] ? player.amount : 0);\r\n  }, 0);\r\n\r\n  // Calculate remaining amount\r\n  const remainingAmount = totalAmount - totalPaid;\r\n\r\n  // Payment status modal\r\n  const renderPaymentModal = () => (\r\n    <Modal\r\n      visible={showPaymentModal}\r\n      animationType=\"slide\"\r\n      transparent={true}\r\n      onRequestClose={() => setShowPaymentModal(false)}\r\n    >\r\n      <View style={styles.modalOverlay}>\r\n        <View style={styles.modalContainer}>\r\n          <View style={styles.modalHeader}>\r\n            <Text style={styles.modalTitle}>Theo di thanh ton</Text>{\" \"}\r\n            <TouchableOpacity onPress={() => setShowPaymentModal(false)}>\r\n              <Icon name=\"close\" size={24} color=\"#333\" />\r\n            </TouchableOpacity>\r\n          </View>\r\n\r\n          <ScrollView style={styles.modalContent}>\r\n            {sortedPlayers.map((player) => (\r\n              <View key={player.id} style={styles.paymentRow}>\r\n                <View style={styles.paymentInfo}>\r\n                  <Text style={styles.paymentName}>{player.name}</Text>\r\n                  <Text style={styles.paymentAmount}>\r\n                    {formatCurrency(player.amount)}\r\n                  </Text>\r\n                </View>\r\n\r\n                <Switch\r\n                  value={paymentStatus[player.id] || false}\r\n                  onValueChange={() => togglePaymentStatus(player.id)}\r\n                  trackColor={{ false: \"#e0e0e0\", true: \"#b9dfbb\" }}\r\n                  thumbColor={paymentStatus[player.id] ? \"#4caf50\" : \"#f4f3f4\"}\r\n                />\r\n              </View>\r\n            ))}\r\n\r\n            <View style={styles.paymentSummary}>\r\n              <Text style={styles.summaryTitle}>Tng quan</Text>\r\n\r\n              <View style={styles.summaryRow}>\r\n                <Text>Tng chi ph:</Text>\r\n                <Text style={styles.summaryTotal}>\r\n                  {formatCurrency(totalAmount)}\r\n                </Text>\r\n              </View>\r\n\r\n              <View style={styles.summaryRow}>\r\n                <Text> thu:</Text>\r\n                <Text style={styles.summaryPaid}>\r\n                  {formatCurrency(totalPaid)}\r\n                </Text>\r\n              </View>\r\n\r\n              <View style={styles.summaryRow}>\r\n                <Text>Cn li:</Text>\r\n                <Text style={styles.summaryRemaining}>\r\n                  {formatCurrency(remainingAmount)}\r\n                </Text>\r\n              </View>\r\n            </View>\r\n          </ScrollView>\r\n        </View>\r\n      </View>\r\n    </Modal>\r\n  );\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.header}>\r\n        <Text style={styles.title}>Phn b chi ph</Text>\r\n        <TouchableOpacity\r\n          style={styles.paymentButton}\r\n          onPress={() => setShowPaymentModal(true)}\r\n        >\r\n          <Text style={styles.paymentButtonText}>Theo di thanh ton</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n\r\n      <Text style={styles.totalText}>\r\n        Tng chi ph: {formatCurrency(totalAmount)}\r\n        {remainingAmount > 0 && totalPaid > 0 && (\r\n          <Text style={styles.remainingText}>\r\n            {\" \"}\r\n            (Cn thiu: {formatCurrency(remainingAmount)})\r\n          </Text>\r\n        )}\r\n      </Text>\r\n\r\n      <View style={styles.chartContainer}>\r\n        {sortedPlayers.map((player) => {\r\n          // Calculate percentage for visual reference\r\n          const barWidthPercent = Math.max(\r\n            (player.amount / maxAmount) * 100,\r\n            5\r\n          );\r\n          // Use flex to control the width instead of percentage string\r\n          const barWidthFlex = barWidthPercent / 100;\r\n\r\n          // Check payment status\r\n          const isPaid = paymentStatus[player.id] || false;\r\n\r\n          return (\r\n            <TouchableOpacity\r\n              key={player.id}\r\n              style={styles.barRow}\r\n              onPress={() => togglePaymentStatus(player.id)}\r\n            >\r\n              <View style={styles.nameContainer}>\r\n                {\" \"}\r\n                {isPaid && (\r\n                  <Icon\r\n                    name=\"checkmark-circle\"\r\n                    size={16}\r\n                    color=\"#4caf50\"\r\n                    style={styles.paidIcon}\r\n                  />\r\n                )}\r\n                <Text\r\n                  style={[styles.nameText, isPaid && styles.paidText]}\r\n                  numberOfLines={1}\r\n                  ellipsizeMode=\"tail\"\r\n                >\r\n                  {player.name}\r\n                </Text>\r\n              </View>\r\n\r\n              <View style={styles.barContainer}>\r\n                <View\r\n                  style={[\r\n                    styles.bar,\r\n                    { flex: barWidthFlex },\r\n                    isPaid && styles.paidBar,\r\n                  ]}\r\n                />\r\n                <Text style={[styles.amountText, isPaid && styles.paidAmount]}>\r\n                  {formatCurrency(player.amount)}\r\n                </Text>\r\n              </View>\r\n            </TouchableOpacity>\r\n          );\r\n        })}\r\n      </View>\r\n\r\n      <Text style={styles.note}>\r\n        Nhn vo ngi chi  nh du  thanh ton\r\n      </Text>\r\n\r\n      {renderPaymentModal()}\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    backgroundColor: \"#fff\",\r\n    borderRadius: 12,\r\n    padding: 16,\r\n    marginVertical: 8,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.1,\r\n    shadowRadius: 4,\r\n    elevation: 3,\r\n  },\r\n  header: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    marginBottom: 8,\r\n  },\r\n  title: {\r\n    fontSize: 18,\r\n    fontWeight: \"bold\",\r\n    color: \"#333\",\r\n  },\r\n  paymentButton: {\r\n    backgroundColor: \"#4caf50\",\r\n    paddingVertical: 6,\r\n    paddingHorizontal: 12,\r\n    borderRadius: 16,\r\n  },\r\n  paymentButtonText: {\r\n    color: \"white\",\r\n    fontSize: 12,\r\n    fontWeight: \"500\",\r\n  },\r\n  totalText: {\r\n    fontSize: 16,\r\n    color: \"#555\",\r\n    marginBottom: 16,\r\n  },\r\n  remainingText: {\r\n    color: \"#e53935\",\r\n  },\r\n  chartContainer: {\r\n    marginVertical: 12,\r\n  },\r\n  barRow: {\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    marginBottom: 12,\r\n  },\r\n  nameContainer: {\r\n    width: \"28%\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n  },\r\n  paidIcon: {\r\n    marginRight: 4,\r\n  },\r\n  nameText: {\r\n    fontSize: 14,\r\n    color: \"#444\",\r\n    marginRight: 8,\r\n    flex: 1,\r\n  },\r\n  barContainer: {\r\n    flex: 1,\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n  },\r\n  bar: {\r\n    height: 20,\r\n    backgroundColor: \"#4caf50\",\r\n    borderRadius: 4,\r\n    marginRight: 8,\r\n  },\r\n  amountText: {\r\n    fontSize: 14,\r\n    fontWeight: \"500\",\r\n    color: \"#333\",\r\n  },\r\n  paidText: {\r\n    color: \"#4caf50\",\r\n    textDecorationLine: \"line-through\",\r\n    textDecorationStyle: \"solid\",\r\n  },\r\n  paidBar: {\r\n    backgroundColor: \"#a5d6a7\", // lighter green\r\n    opacity: 0.7,\r\n  },\r\n  paidAmount: {\r\n    color: \"#4caf50\",\r\n  },\r\n  note: {\r\n    fontSize: 12,\r\n    color: \"#888\",\r\n    marginTop: 8,\r\n    fontStyle: \"italic\",\r\n  },\r\n  // Modal styles\r\n  modalOverlay: {\r\n    flex: 1,\r\n    backgroundColor: \"rgba(0,0,0,0.5)\",\r\n    justifyContent: \"flex-end\",\r\n  },\r\n  modalContainer: {\r\n    backgroundColor: \"white\",\r\n    borderTopLeftRadius: 16,\r\n    borderTopRightRadius: 16,\r\n    maxHeight: \"80%\",\r\n  },\r\n  modalHeader: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 12,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: \"#eee\",\r\n  },\r\n  modalTitle: {\r\n    fontSize: 18,\r\n    fontWeight: \"bold\",\r\n    color: \"#333\",\r\n  },\r\n  modalContent: {\r\n    padding: 16,\r\n  },\r\n  paymentRow: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    paddingVertical: 12,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: \"#eee\",\r\n  },\r\n  paymentInfo: {\r\n    flex: 1,\r\n  },\r\n  paymentName: {\r\n    fontSize: 16,\r\n    fontWeight: \"500\",\r\n    color: \"#333\",\r\n  },\r\n  paymentAmount: {\r\n    fontSize: 14,\r\n    color: \"#666\",\r\n    marginTop: 2,\r\n  },\r\n  paymentSummary: {\r\n    marginTop: 24,\r\n    paddingTop: 16,\r\n    borderTopWidth: 1,\r\n    borderTopColor: \"#eee\",\r\n  },\r\n  summaryTitle: {\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n    marginBottom: 12,\r\n    color: \"#333\",\r\n  },\r\n  summaryRow: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    paddingVertical: 8,\r\n  },\r\n  summaryTotal: {\r\n    fontWeight: \"500\",\r\n    color: \"#333\",\r\n  },\r\n  summaryPaid: {\r\n    color: \"#4caf50\",\r\n    fontWeight: \"500\",\r\n  },\r\n  summaryRemaining: {\r\n    color: \"#e53935\",\r\n    fontWeight: \"500\",\r\n  },\r\n});\r\n\r\nexport default ExpenseDistribution;\r\n","import React from \"react\";\r\nimport { TouchableOpacity, Text, StyleSheet, View } from \"react-native\";\r\nimport { Session } from \"../models/types\";\r\nimport { formatCurrency } from \"../utils/expenseUtils\";\r\nimport { CrossPlatformShare } from \"../utils\";\r\nimport { format } from \"date-fns\";\r\nimport Icon from \"./Icon\";\r\n\r\ntype ShareButtonProps = {\r\n  session: Session;\r\n  calculatedExpenses: {\r\n    totalAmount: number;\r\n    splitByPlayer: Record<string, number>;\r\n  };\r\n};\r\n\r\nconst ShareButton = ({ session, calculatedExpenses }: ShareButtonProps) => {\r\n  const handleShare = async () => {\r\n    try {\r\n      // Chun b ni dung tin nhn\r\n      const date = format(new Date(session.date), \"dd/MM/yyyy\");\r\n      const time = format(new Date(session.date), \"HH:mm\");\r\n\r\n      let message = ` BO CO CHI PH CU LNG\\n\\n`;\r\n      message += ` Ngy: ${date}\\n`;\r\n      message += ` Gi: ${time}\\n`;\r\n      message += ` a im: ${session.location}\\n`;\r\n      message += ` S ngi tham gia: ${session.players.length} ngi\\n`;\r\n\r\n      if (session.notes) {\r\n        message += ` Ghi ch: ${session.notes}\\n`;\r\n      }\r\n\r\n      message += `\\n----------------------\\n\\n`;\r\n\r\n      // Thm danh sch chi tit chi ph\r\n      message += ` CHI TIT CC KHON CHI:\\n\\n`;\r\n      session.expenses.forEach((expense, index) => {\r\n        const expenseType = getExpenseTypeLabel(expense.type);\r\n        message += `${index + 1}. ${expenseType}: ${formatCurrency(\r\n          expense.amount\r\n        )}`;\r\n        if (expense.description) {\r\n          message += ` (${expense.description})`;\r\n        }\r\n\r\n        // Thm thng tin v ngi chia s chi ph ny\r\n        if (\r\n          expense.divideAmong &&\r\n          expense.divideAmong.length > 0 &&\r\n          expense.divideAmong.length < session.players.length\r\n        ) {\r\n          const playerNames = expense.divideAmong\r\n            .map((id) => session.players.find((p) => p.id === id)?.name || \"\")\r\n            .filter((name) => name)\r\n            .join(\", \");\r\n          message += `\\n    Chia cho: ${playerNames}`;\r\n        }\r\n\r\n        message += \"\\n\\n\";\r\n      });\r\n\r\n      message += `----------------------\\n\\n`;\r\n      message += ` TNG CHI PH: ${formatCurrency(\r\n        calculatedExpenses.totalAmount\r\n      )}\\n\\n`;\r\n\r\n      // Thm chi ph mi ngi cn tr\r\n      message += ` CHI PH MI NGI:\\n\\n`;\r\n\r\n      // Sp xp theo tn ngi chi\r\n      const sortedPlayers = [...session.players].sort((a, b) =>\r\n        a.name.localeCompare(b.name)\r\n      );\r\n\r\n      sortedPlayers.forEach((player) => {\r\n        const amount = calculatedExpenses.splitByPlayer[player.id] || 0;\r\n        message += ` ${player.name}: ${formatCurrency(amount)}\\n`;\r\n      }); // Chia s tin nhn\r\n      await CrossPlatformShare.share({\r\n        message,\r\n        title: `Chi ph nh cu lng ngy ${date}`,\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Li khi chia s:\", error);\r\n    }\r\n  };\r\n\r\n  // Hm ly tn loi chi ph\r\n  const getExpenseTypeLabel = (type: string): string => {\r\n    switch (type) {\r\n      case \"court_fee\":\r\n        return \"Tin sn\";\r\n      case \"shuttle\":\r\n        return \"Tin cu\";\r\n      case \"drink\":\r\n        return \"Tin nc\";\r\n      case \"equipment\":\r\n        return \"Tin ph kin\";\r\n      case \"other\":\r\n        return \"Chi ph khc\";\r\n      default:\r\n        return \"Chi ph\";\r\n    }\r\n  };\r\n  return (\r\n    <TouchableOpacity style={styles.shareButton} onPress={handleShare}>\r\n      <Icon name=\"share-social-outline\" size={20} color=\"white\" />\r\n      <Text style={styles.shareText}>Chia s chi ph</Text>\r\n    </TouchableOpacity>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  shareButton: {\r\n    backgroundColor: \"#2196f3\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    paddingVertical: 12,\r\n    paddingHorizontal: 16,\r\n    borderRadius: 8,\r\n    marginVertical: 8,\r\n  },\r\n  shareText: {\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n    fontSize: 16,\r\n    marginLeft: 8,\r\n  },\r\n});\r\n\r\nexport default ShareButton;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  TouchableOpacity,\r\n  ScrollView,\r\n  ActivityIndicator,\r\n} from \"react-native\";\r\nimport { CrossPlatformAlert as Alert } from \"../utils\";\r\nimport { useNavigation, useRoute, RouteProp } from \"@react-navigation/native\";\r\nimport { format } from \"date-fns\";\r\nimport { vi } from \"date-fns/locale\";\r\nimport { getSessions, deleteSession } from \"../services/storageService\";\r\nimport { Session, Player, Expense, ExpenseType } from \"../models/types\";\r\nimport { calculateExpenses, formatCurrency } from \"../utils/expenseUtils\";\r\nimport ExpenseDistribution from \"../components/ExpenseDistribution\";\r\nimport ShareButton from \"../components/ShareButton\";\r\n\r\ntype RouteParams = {\r\n  SessionDetail: {\r\n    sessionId: string;\r\n  };\r\n};\r\n\r\nconst SessionDetailScreen = () => {\r\n  const navigation = useNavigation<any>();\r\n  const route = useRoute<RouteProp<RouteParams, \"SessionDetail\">>();\r\n  const { sessionId } = route.params;\r\n\r\n  const [session, setSession] = useState<Session | null>(null);\r\n  const [calculatedExpenses, setCalculatedExpenses] = useState<{\r\n    totalAmount: number;\r\n    splitByPlayer: Record<string, number>;\r\n  } | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadSessionDetails();\r\n  }, [sessionId]);\r\n\r\n  const loadSessionDetails = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const sessions = await getSessions();\r\n      const currentSession = sessions.find((s) => s.id === sessionId);\r\n\r\n      if (currentSession) {\r\n        setSession(currentSession);\r\n        const calculated = calculateExpenses(currentSession);\r\n        setCalculatedExpenses(calculated);\r\n      } else {\r\n        Alert.alert(\"Li\", \"Khng tm thy thng tin bui nh cu\");\r\n        navigation.goBack();\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Li khi ti chi tit bui nh cu:\", error);\r\n      Alert.alert(\"Li\", \"Khng th ti thng tin bui nh cu\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    Alert.alert(\r\n      \"Xc nhn xa\",\r\n      \"Bn c chc chn mun xa bui nh cu ny khng?\",\r\n      [\r\n        { text: \"Hy\", style: \"cancel\" },\r\n        {\r\n          text: \"Xa\",\r\n          style: \"destructive\",\r\n          onPress: async () => {\r\n            try {\r\n              await deleteSession(sessionId);\r\n              navigation.goBack();\r\n            } catch (error) {\r\n              Alert.alert(\"Li\", \"Khng th xa bui nh cu\");\r\n            }\r\n          },\r\n        },\r\n      ]\r\n    );\r\n  };\r\n\r\n  const getExpenseTypeLabel = (type: ExpenseType): string => {\r\n    switch (type) {\r\n      case ExpenseType.COURT_FEE:\r\n        return \"Tin sn\";\r\n      case ExpenseType.SHUTTLE:\r\n        return \"Tin cu\";\r\n      case ExpenseType.DRINK:\r\n        return \"Tin nc\";\r\n      case ExpenseType.EQUIPMENT:\r\n        return \"Tin ph kin\";\r\n      case ExpenseType.OTHER:\r\n        return \"Chi ph khc\";\r\n      default:\r\n        return \"Chi ph\";\r\n    }\r\n  };\r\n  const getExpenseTypeColor = (type: ExpenseType): string => {\r\n    switch (type) {\r\n      case ExpenseType.COURT_FEE:\r\n        return \"#4caf50\"; // Xanh l\r\n      case ExpenseType.SHUTTLE:\r\n        return \"#2196f3\"; // Xanh dng\r\n      case ExpenseType.DRINK:\r\n        return \"#ff9800\"; // Cam\r\n      case ExpenseType.EQUIPMENT:\r\n        return \"#9c27b0\"; // Tm\r\n      case ExpenseType.OTHER:\r\n        return \"#e91e63\"; // Hng m - mu ni bt hn cho chi ph khc\r\n      default:\r\n        return \"#607d8b\"; // Xm xanh\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <View style={[styles.container, styles.center]}>\r\n        <ActivityIndicator size=\"large\" color=\"#4caf50\" />\r\n      </View>\r\n    );\r\n  }\r\n\r\n  if (!session || !calculatedExpenses) {\r\n    return (\r\n      <View style={[styles.container, styles.center]}>\r\n        <Text>Khng tm thy thng tin</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <ScrollView contentContainerStyle={styles.scrollContent}>\r\n        {\" \"}\r\n        <View style={styles.header}>\r\n          <Text style={styles.dateText}>\r\n            {format(new Date(session.date), \"EEEE, dd/MM/yyyy\", { locale: vi })}\r\n          </Text>\r\n          <View style={styles.timeInfo}>\r\n            <Text style={styles.timeText}>\r\n              Thi gian: {format(new Date(session.date), \"HH:mm\")}\r\n              {session.endTime\r\n                ? ` - ${format(new Date(session.endTime), \"HH:mm\")}`\r\n                : \"\"}\r\n            </Text>\r\n            {session.duration && (\r\n              <Text style={styles.durationText}>\r\n                Thi lng:{\" \"}\r\n                {Math.floor(session.duration / 60) > 0\r\n                  ? `${Math.floor(session.duration / 60)} gi ${\r\n                      session.duration % 60\r\n                    } pht`\r\n                  : `${session.duration} pht`}\r\n              </Text>\r\n            )}\r\n          </View>\r\n          <Text style={styles.locationText}>{session.location}</Text>\r\n          {session.notes && (\r\n            <Text style={styles.notesText}>{session.notes}</Text>\r\n          )}\r\n        </View>\r\n        <View style={styles.section}>\r\n          <Text style={styles.sectionTitle}>Danh sch chi ph</Text>{\" \"}\r\n          {session.expenses.map((expense) => {\r\n            // Xc nh mu sc theo loi chi ph\r\n            const expenseTypeColor = getExpenseTypeColor(expense.type);\r\n            const hasCustomDivision =\r\n              expense.divideAmong && expense.divideAmong.length > 0;\r\n\r\n            return (\r\n              <View\r\n                key={expense.id}\r\n                style={[\r\n                  styles.expenseItem,\r\n                  { borderLeftColor: expenseTypeColor, borderLeftWidth: 4 },\r\n                ]}\r\n              >\r\n                <View style={styles.expenseHeader}>\r\n                  <View style={styles.expenseTypeContainer}>\r\n                    <Text\r\n                      style={[styles.expenseType, { color: expenseTypeColor }]}\r\n                    >\r\n                      {getExpenseTypeLabel(expense.type)}\r\n                    </Text>\r\n                    {hasCustomDivision && (\r\n                      <View\r\n                        style={[\r\n                          styles.customBadge,\r\n                          { backgroundColor: expenseTypeColor },\r\n                        ]}\r\n                      >\r\n                        <Text style={styles.customBadgeText}>Ty chnh</Text>\r\n                      </View>\r\n                    )}\r\n                  </View>\r\n                  <Text\r\n                    style={[\r\n                      styles.expenseAmount,\r\n                      expense.type === ExpenseType.OTHER\r\n                        ? { fontWeight: \"bold\" }\r\n                        : {},\r\n                    ]}\r\n                  >\r\n                    {formatCurrency(expense.amount)}\r\n                  </Text>\r\n                </View>\r\n\r\n                {expense.description && (\r\n                  <Text\r\n                    style={[\r\n                      styles.expenseDescription,\r\n                      expense.type === ExpenseType.OTHER\r\n                        ? { fontStyle: \"italic\" }\r\n                        : {},\r\n                    ]}\r\n                  >\r\n                    {\" \"}\r\n                    <Text>{expense.description}</Text>\r\n                  </Text>\r\n                )}\r\n\r\n                {/* Display the specific players for custom expense division */}\r\n                {hasCustomDivision && (\r\n                  <View\r\n                    style={[\r\n                      styles.expensePlayers,\r\n                      { backgroundColor: `${expenseTypeColor}08` },\r\n                    ]}\r\n                  >\r\n                    <Text style={styles.expensePlayersLabel}>\r\n                      Chi ph ny c chia cho:\r\n                    </Text>\r\n                    <View style={styles.expensePlayersList}>\r\n                      {expense.divideAmong.map((playerId) => {\r\n                        const player = session.players.find(\r\n                          (p) => p.id === playerId\r\n                        );\r\n                        return player ? (\r\n                          <Text\r\n                            key={playerId}\r\n                            style={[\r\n                              styles.expensePlayerName,\r\n                              {\r\n                                backgroundColor: `${expenseTypeColor}15`,\r\n                                borderColor: expenseTypeColor,\r\n                                color: expenseTypeColor,\r\n                              },\r\n                            ]}\r\n                          >\r\n                            {player.name}\r\n                          </Text>\r\n                        ) : null;\r\n                      })}\r\n                    </View>\r\n                  </View>\r\n                )}\r\n              </View>\r\n            );\r\n          })}\r\n          <View style={styles.totalExpense}>\r\n            <Text style={styles.totalExpenseLabel}>Tng chi ph:</Text>{\" \"}\r\n            <Text style={styles.totalExpenseAmount}>\r\n              <Text>{formatCurrency(calculatedExpenses.totalAmount)}</Text>\r\n            </Text>\r\n          </View>\r\n        </View>{\" \"}\r\n        <View style={styles.section}>\r\n          <Text style={styles.sectionTitle}>\r\n            Ngi tham gia ({session.players.length})\r\n          </Text>\r\n          {session.players.map((player) => (\r\n            <View key={player.id} style={styles.playerItem}>\r\n              <Text style={styles.playerName}>{player.name}</Text>{\" \"}\r\n              <Text style={styles.playerAmount}>\r\n                <Text>\r\n                  {formatCurrency(\r\n                    calculatedExpenses.splitByPlayer[player.id] || 0\r\n                  )}\r\n                </Text>\r\n              </Text>\r\n            </View>\r\n          ))}\r\n        </View>\r\n        <ExpenseDistribution\r\n          totalAmount={calculatedExpenses.totalAmount}\r\n          playerAmounts={session.players.map((player) => ({\r\n            id: player.id,\r\n            name: player.name,\r\n            amount: calculatedExpenses.splitByPlayer[player.id] || 0,\r\n          }))}\r\n        />{\" \"}\r\n        <ShareButton\r\n          session={session}\r\n          calculatedExpenses={calculatedExpenses}\r\n        />\r\n        <View style={styles.buttonContainer}>\r\n          <TouchableOpacity\r\n            style={[styles.button, styles.editButton]}\r\n            onPress={() =>\r\n              navigation.navigate(\"EditSession\", { sessionId: session.id })\r\n            }\r\n          >\r\n            <Text style={styles.buttonText}>Chnh sa</Text>\r\n          </TouchableOpacity>\r\n\r\n          <TouchableOpacity\r\n            style={[styles.button, styles.deleteButton]}\r\n            onPress={handleDelete}\r\n          >\r\n            <Text style={styles.buttonText}>Xa</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </ScrollView>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: \"#f5f5f5\",\r\n  },\r\n  center: {\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  scrollContent: {\r\n    padding: 16,\r\n  },\r\n  header: {\r\n    backgroundColor: \"white\",\r\n    borderRadius: 10,\r\n    padding: 16,\r\n    marginBottom: 16,\r\n    elevation: 2,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 1 },\r\n    shadowOpacity: 0.22,\r\n    shadowRadius: 2.22,\r\n  },\r\n  dateText: {\r\n    fontSize: 18,\r\n    fontWeight: \"bold\",\r\n    color: \"#333\",\r\n    marginBottom: 4,\r\n  },\r\n  locationText: {\r\n    fontSize: 16,\r\n    color: \"#555\",\r\n    marginBottom: 8,\r\n  },\r\n  notesText: {\r\n    fontSize: 14,\r\n    color: \"#777\",\r\n    fontStyle: \"italic\",\r\n  },\r\n  timeInfo: {\r\n    marginVertical: 8,\r\n  },\r\n  timeText: {\r\n    fontSize: 15,\r\n    color: \"#555\",\r\n    marginBottom: 4,\r\n  },\r\n  durationText: {\r\n    fontSize: 15,\r\n    color: \"#555\",\r\n    marginBottom: 4,\r\n  },\r\n  section: {\r\n    backgroundColor: \"white\",\r\n    borderRadius: 10,\r\n    padding: 16,\r\n    marginBottom: 16,\r\n    elevation: 2,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 1 },\r\n    shadowOpacity: 0.22,\r\n    shadowRadius: 2.22,\r\n  },\r\n  sectionTitle: {\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n    color: \"#333\",\r\n    marginBottom: 12,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: \"#eee\",\r\n    paddingBottom: 8,\r\n  },\r\n  expenseItem: {\r\n    marginBottom: 15,\r\n    paddingBottom: 12,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: \"#eeeeee\",\r\n    backgroundColor: \"#ffffff\",\r\n    borderRadius: 10,\r\n    padding: 12,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.1,\r\n    shadowRadius: 3,\r\n    elevation: 2,\r\n  },\r\n  expenseHeader: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    marginBottom: 2,\r\n  },\r\n  expenseTypeContainer: {\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    flex: 1,\r\n  },\r\n  expenseType: {\r\n    fontSize: 16,\r\n    fontWeight: \"600\",\r\n    color: \"#444\",\r\n  },\r\n  expenseAmount: {\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n    color: \"#2e7d32\",\r\n  },\r\n  expenseDescription: {\r\n    fontSize: 14,\r\n    color: \"#666\",\r\n    marginTop: 6,\r\n    paddingTop: 6,\r\n    paddingBottom: 2,\r\n    borderTopWidth: 1,\r\n    borderTopColor: \"#f8f8f8\",\r\n  },\r\n  customBadge: {\r\n    backgroundColor: \"#4caf50\",\r\n    paddingHorizontal: 8,\r\n    paddingVertical: 3,\r\n    borderRadius: 12,\r\n    marginLeft: 8,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 1 },\r\n    shadowOpacity: 0.2,\r\n    shadowRadius: 1,\r\n    elevation: 1,\r\n  },\r\n  customBadgeText: {\r\n    color: \"white\",\r\n    fontSize: 10,\r\n    fontWeight: \"bold\",\r\n    textShadowColor: \"rgba(0,0,0,0.2)\",\r\n    textShadowOffset: { width: 0, height: 1 },\r\n    textShadowRadius: 1,\r\n  },\r\n  expensePlayers: {\r\n    marginTop: 8,\r\n    backgroundColor: \"#fafafa\",\r\n    borderRadius: 8,\r\n    padding: 10,\r\n    borderWidth: 1,\r\n    borderColor: \"#eaeaea\",\r\n  },\r\n  expensePlayersLabel: {\r\n    fontSize: 12,\r\n    color: \"#666\",\r\n    fontStyle: \"italic\",\r\n    marginBottom: 6,\r\n    fontWeight: \"500\",\r\n  },\r\n  expensePlayersList: {\r\n    flexDirection: \"row\",\r\n    flexWrap: \"wrap\",\r\n    marginTop: 4,\r\n  },\r\n  expensePlayerName: {\r\n    fontSize: 12,\r\n    color: \"#4caf50\",\r\n    backgroundColor: \"#f0fff0\",\r\n    borderWidth: 1,\r\n    borderColor: \"#4caf50\",\r\n    borderRadius: 6,\r\n    paddingVertical: 4,\r\n    paddingHorizontal: 8,\r\n    marginRight: 8,\r\n    marginBottom: 6,\r\n    fontWeight: \"500\",\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 1 },\r\n    shadowOpacity: 0.1,\r\n    shadowRadius: 1,\r\n    elevation: 1,\r\n  },\r\n  totalExpense: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    marginTop: 8,\r\n    paddingTop: 12,\r\n    borderTopWidth: 1,\r\n    borderTopColor: \"#eee\",\r\n  },\r\n  totalExpenseLabel: {\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n    color: \"#333\",\r\n  },\r\n  totalExpenseAmount: {\r\n    fontSize: 18,\r\n    fontWeight: \"bold\",\r\n    color: \"#2e7d32\",\r\n  },\r\n  playerItem: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    paddingVertical: 8,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: \"#f0f0f0\",\r\n  },\r\n  playerName: {\r\n    fontSize: 15,\r\n    fontWeight: \"500\",\r\n    color: \"#444\",\r\n  },\r\n  playerAmount: {\r\n    fontSize: 15,\r\n    fontWeight: \"500\",\r\n    color: \"#2e7d32\",\r\n  },\r\n  buttonContainer: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    marginTop: 8,\r\n    marginBottom: 24,\r\n  },\r\n  button: {\r\n    flex: 1,\r\n    padding: 14,\r\n    borderRadius: 8,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    marginHorizontal: 6,\r\n  },\r\n  editButton: {\r\n    backgroundColor: \"#2196f3\",\r\n  },\r\n  deleteButton: {\r\n    backgroundColor: \"#f44336\",\r\n  },\r\n  buttonText: {\r\n    color: \"white\",\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n  },\r\n  modalButton: {\r\n    backgroundColor: \"#4caf50\",\r\n    paddingVertical: 10,\r\n    paddingHorizontal: 20,\r\n    borderRadius: 4,\r\n    marginHorizontal: 8,\r\n  },\r\n  modalButtonText: {\r\n    color: \"#fff\",\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n  },\r\n});\r\n\r\nexport default SessionDetailScreen;\r\n","import React from \"react\";\r\nimport { View, StyleSheet, Platform } from \"react-native\";\r\nimport DateTimePicker from \"@react-native-community/datetimepicker\";\r\n\r\ninterface WebDateTimePickerProps {\r\n  value: Date;\r\n  mode: \"date\" | \"time\";\r\n  display?: \"default\" | \"spinner\" | \"calendar\" | \"clock\";\r\n  onChange: (event: any, date?: Date) => void;\r\n}\r\n\r\nconst WebDateTimePicker: React.FC<WebDateTimePickerProps> = ({\r\n  value,\r\n  mode,\r\n  display = \"default\",\r\n  onChange,\r\n}) => {\r\n  // Trn web, s dng input HTML gc\r\n  if (Platform.OS === \"web\") {\r\n    const inputType = mode === \"date\" ? \"date\" : \"time\";\r\n\r\n    // nh dng gi tr cho input HTML\r\n    const formatValue = () => {\r\n      if (mode === \"date\") {\r\n        return value.toISOString().split(\"T\")[0]; // YYYY-MM-DD\r\n      } else {\r\n        return `${String(value.getHours()).padStart(2, \"0\")}:${String(\r\n          value.getMinutes()\r\n        ).padStart(2, \"0\")}`;\r\n      }\r\n    };\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n      const newValue = e.target.value;\r\n      if (newValue) {\r\n        let newDate: Date;\r\n\r\n        if (mode === \"date\") {\r\n          // m bo gi li gi v pht t gi tr hin ti\r\n          newDate = new Date(newValue);\r\n          if (!isNaN(newDate.getTime())) {\r\n            newDate.setHours(value.getHours(), value.getMinutes(), 0, 0);\r\n          } else {\r\n            newDate = new Date(value); // S dng li gi tr c nu parse tht bi\r\n            console.warn(\"Khng th parse ngy t input:\", newValue);\r\n          }\r\n        } else {\r\n          const [hours, minutes] = newValue.split(\":\");\r\n          newDate = new Date(value);\r\n          if (hours !== undefined && minutes !== undefined) {\r\n            newDate.setHours(parseInt(hours, 10) || 0);\r\n            newDate.setMinutes(parseInt(minutes, 10) || 0);\r\n          }\r\n        }\r\n\r\n        // Kim tra xem date c hp l khng\r\n        if (!isNaN(newDate.getTime())) {\r\n          onChange(\r\n            { type: \"set\", nativeEvent: { timestamp: newDate.getTime() } },\r\n            newDate\r\n          );\r\n        } else {\r\n          console.warn(\"To date khng hp l t input:\", newValue);\r\n        }\r\n      }\r\n    };\r\n\r\n    return (\r\n      <View style={styles.container}>\r\n        <input\r\n          type={inputType}\r\n          value={formatValue()}\r\n          onChange={handleChange}\r\n          style={styles.input}\r\n        />\r\n      </View>\r\n    );\r\n  }\r\n\r\n  // Trn thit b di ng, s dng DateTimePicker gc\r\n  return (\r\n    <DateTimePicker\r\n      value={value}\r\n      mode={mode}\r\n      display={display}\r\n      onChange={onChange}\r\n    />\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    width: \"100%\",\r\n    marginVertical: 8,\r\n  },\r\n  input: {\r\n    height: 40,\r\n    width: \"100%\",\r\n    borderWidth: 1,\r\n    borderColor: \"#ccc\",\r\n    borderRadius: 5,\r\n    paddingHorizontal: 10,\r\n    fontSize: 16,\r\n  },\r\n});\r\n\r\nexport default WebDateTimePicker;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  ScrollView,\r\n} from \"react-native\";\r\nimport { CrossPlatformAlert as Alert } from \"../utils\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { format } from \"date-fns\";\r\nimport { vi } from \"date-fns/locale\";\r\nimport { getPlayers, addPlayer, addSession } from \"../services/storageService\";\r\nimport { ExpenseType, Player, Expense } from \"../models/types\";\r\nimport { generateId, formatCurrency } from \"../utils/expenseUtils\";\r\nimport WebDateTimePicker from \"../components/web/WebDateTimePicker\";\r\n\r\nconst NewSessionScreen = () => {\r\n  const navigation = useNavigation<any>();\r\n  const [date, setDate] = useState(new Date());\r\n  const [endTime, setEndTime] = useState<Date | null>(null);\r\n  const [location, setLocation] = useState(\"\");\r\n  const [notes, setNotes] = useState(\"\");\r\n  const [courtFeePerHour, setCourtFeePerHour] = useState(\"\");\r\n  const [showDatePicker, setShowDatePicker] = useState(false);\r\n  const [showEndTimePicker, setShowEndTimePicker] = useState(false);\r\n\r\n  const [allPlayers, setAllPlayers] = useState<Player[]>([]);\r\n  const [selectedPlayers, setSelectedPlayers] = useState<string[]>([]);\r\n  const [newPlayerName, setNewPlayerName] = useState(\"\");\r\n\r\n  const [expenses, setExpenses] = useState<Expense[]>([]);\r\n  const [currentExpense, setCurrentExpense] = useState<{\r\n    type: ExpenseType;\r\n    amount: string;\r\n    description: string;\r\n    divideAmong?: string[];\r\n  }>({\r\n    type: ExpenseType.COURT_FEE,\r\n    amount: \"\",\r\n    description: \"\",\r\n    divideAmong: [],\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadPlayers();\r\n  }, []);\r\n\r\n  const loadPlayers = async () => {\r\n    try {\r\n      const players = await getPlayers();\r\n      setAllPlayers(players);\r\n    } catch (error) {\r\n      console.error(\"Li khi ti danh sch ngi chi:\", error);\r\n    }\r\n  };\r\n  const onChangeDate = (event: any, selectedDate?: Date) => {\r\n    setShowDatePicker(false);\r\n    if (selectedDate) {\r\n      setDate(selectedDate);\r\n    }\r\n  };\r\n\r\n  // Handle end time selection\r\n  const handleEndTimeChange = (event: any, selectedDate?: Date) => {\r\n    setShowEndTimePicker(false);\r\n    if (selectedDate) {\r\n      setEndTime(selectedDate);\r\n    }\r\n  };\r\n\r\n  const handleAddPlayer = async () => {\r\n    if (!newPlayerName.trim()) {\r\n      Alert.alert(\"Li\", \"Vui lng nhp tn ngi chi\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const newPlayer = await addPlayer(newPlayerName.trim());\r\n      setAllPlayers([...allPlayers, newPlayer]);\r\n      setSelectedPlayers([...selectedPlayers, newPlayer.id]);\r\n      setNewPlayerName(\"\");\r\n    } catch (error) {\r\n      Alert.alert(\"Li\", \"Khng th thm ngi chi mi\");\r\n    }\r\n  };\r\n\r\n  const togglePlayerSelection = (playerId: string) => {\r\n    if (selectedPlayers.includes(playerId)) {\r\n      setSelectedPlayers(selectedPlayers.filter((id) => id !== playerId));\r\n    } else {\r\n      setSelectedPlayers([...selectedPlayers, playerId]);\r\n    }\r\n  };\r\n  const handleAddExpense = () => {\r\n    if (!currentExpense.amount || parseFloat(currentExpense.amount) <= 0) {\r\n      Alert.alert(\"Li\", \"Vui lng nhp s tin hp l\");\r\n      return;\r\n    }\r\n\r\n    // For non-general expense types, check if players are selected\r\n    if (\r\n      shouldShowPlayerSelection(currentExpense.type) &&\r\n      (!currentExpense.divideAmong || currentExpense.divideAmong.length === 0)\r\n    ) {\r\n      Alert.alert(\r\n        \"Cha chn ngi tham gia\",\r\n        \"Vui lng chn t nht mt ngi tham gia  chi tr chi ph ny.\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    const newExpense: Expense = {\r\n      id: generateId(),\r\n      type: currentExpense.type,\r\n      amount: parseFloat(currentExpense.amount),\r\n      description: currentExpense.description,\r\n      divideAmong: currentExpense.divideAmong?.length\r\n        ? currentExpense.divideAmong\r\n        : undefined,\r\n    };\r\n\r\n    setExpenses([...expenses, newExpense]);\r\n    setCurrentExpense({\r\n      type: ExpenseType.COURT_FEE,\r\n      amount: \"\",\r\n      description: \"\",\r\n      divideAmong: [],\r\n    });\r\n  };\r\n\r\n  const removeExpense = (id: string) => {\r\n    setExpenses(expenses.filter((expense) => expense.id !== id));\r\n  };\r\n\r\n  const getExpenseTypeLabel = (type: ExpenseType): string => {\r\n    switch (type) {\r\n      case ExpenseType.COURT_FEE:\r\n        return \"Tin sn\";\r\n      case ExpenseType.SHUTTLE:\r\n        return \"Tin cu\";\r\n      case ExpenseType.DRINK:\r\n        return \"Tin nc\";\r\n      case ExpenseType.EQUIPMENT:\r\n        return \"Tin ph kin\";\r\n      case ExpenseType.OTHER:\r\n        return \"Chi ph khc\";\r\n      default:\r\n        return \"Chi ph\";\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!location.trim()) {\r\n      Alert.alert(\"Li\", \"Vui lng nhp a im nh cu\");\r\n      return;\r\n    }\r\n\r\n    if (selectedPlayers.length === 0) {\r\n      Alert.alert(\"Li\", \"Vui lng chn t nht mt ngi tham gia\");\r\n      return;\r\n    }\r\n\r\n    if (expenses.length === 0) {\r\n      Alert.alert(\"Li\", \"Vui lng thm t nht mt khon chi ph\");\r\n      return;\r\n    }\r\n    try {\r\n      const selectedPlayerObjects = allPlayers.filter((p) =>\r\n        selectedPlayers.includes(p.id)\r\n      ); // Calculate duration if end time is set\r\n      const duration = calculateDuration();\r\n\r\n      // Parse court fee per hour if provided\r\n      const hourlyFee = courtFeePerHour\r\n        ? parseFloat(courtFeePerHour)\r\n        : undefined;\r\n\r\n      await addSession({\r\n        date: date.toISOString(),\r\n        endTime: endTime ? endTime.toISOString() : undefined,\r\n        duration: duration,\r\n        courtFeePerHour: hourlyFee,\r\n        location: location.trim(),\r\n        notes: notes.trim() || undefined,\r\n        players: selectedPlayerObjects,\r\n        expenses: expenses,\r\n      });\r\n\r\n      Alert.alert(\"Thnh cng\", \" thm bui nh cu mi\", [\r\n        { text: \"OK\", onPress: () => navigation.goBack() },\r\n      ]);\r\n    } catch (error) {\r\n      Alert.alert(\"Li\", \"Khng th lu bui nh cu\");\r\n    }\r\n  };\r\n\r\n  // Calculate duration between start and end time in minutes\r\n  const calculateDuration = (): number | undefined => {\r\n    if (date && endTime) {\r\n      const startDate = new Date(date);\r\n      const end = new Date(endTime);\r\n\r\n      // Set the end time to use the same date as the start time\r\n      end.setFullYear(\r\n        startDate.getFullYear(),\r\n        startDate.getMonth(),\r\n        startDate.getDate()\r\n      );\r\n\r\n      // If end time is earlier than start time, assume it's the next day\r\n      if (end < startDate) {\r\n        end.setDate(end.getDate() + 1);\r\n      }\r\n\r\n      // Calculate duration in minutes\r\n      return Math.round((end.getTime() - startDate.getTime()) / (1000 * 60));\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  // Calculate court fee based on duration and hourly rate\r\n  const calculateCourtFee = (): number => {\r\n    const duration = calculateDuration();\r\n    if (duration && courtFeePerHour) {\r\n      const hourlyRate = parseFloat(courtFeePerHour);\r\n      const hours = duration / 60;\r\n      return Math.round(hourlyRate * hours);\r\n    }\r\n    return 0;\r\n  };\r\n  // Add court fee from hourly rate\r\n  const addCourtFeeFromRate = () => {\r\n    if (!courtFeePerHour || parseFloat(courtFeePerHour) <= 0) {\r\n      Alert.alert(\"Li\", \"Vui lng nhp gi thu sn hp l\");\r\n      return;\r\n    }\r\n\r\n    if (!endTime) {\r\n      Alert.alert(\r\n        \"Li\",\r\n        \"Vui lng chn thi gian kt thc  tnh chi ph thu sn\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    const fee = calculateCourtFee();\r\n    if (fee <= 0) {\r\n      Alert.alert(\"Li\", \"Khng th tnh chi ph thu sn\");\r\n      return;\r\n    }\r\n\r\n    const duration = calculateDuration();\r\n    let hours = 0;\r\n    let minutes = 0;\r\n\r\n    if (duration) {\r\n      hours = Math.floor(duration / 60);\r\n      minutes = duration % 60;\r\n    }\r\n\r\n    const hourText = hours > 0 ? hours + \" gi \" : \"\";\r\n    const minuteText = minutes > 0 ? minutes + \" pht\" : \"\";\r\n    const durationText = hourText + minuteText;\r\n\r\n    const rateText = formatCurrency(parseFloat(courtFeePerHour)) + \"/gi\";\r\n    const desc = \"Sn \" + durationText + \" (\" + rateText + \")\";\r\n\r\n    const newExpense = {\r\n      id: generateId(),\r\n      type: ExpenseType.COURT_FEE,\r\n      amount: fee,\r\n      description: desc,\r\n    };\r\n\r\n    setExpenses([...expenses, newExpense]);\r\n    Alert.alert(\"Thnh cng\", \" thm chi ph thu sn\");\r\n  };\r\n\r\n  // Helper to check if expense type should show player selection\r\n  const shouldShowPlayerSelection = (type: ExpenseType): boolean => {\r\n    return [\r\n      ExpenseType.DRINK,\r\n      ExpenseType.EQUIPMENT,\r\n      ExpenseType.OTHER,\r\n    ].includes(type);\r\n  };\r\n\r\n  // Toggle a player in the divideAmong list\r\n  const togglePlayerInExpense = (playerId: string) => {\r\n    const divideAmong = currentExpense.divideAmong || [];\r\n\r\n    if (divideAmong.includes(playerId)) {\r\n      // Remove player\r\n      setCurrentExpense({\r\n        ...currentExpense,\r\n        divideAmong: divideAmong.filter((id) => id !== playerId),\r\n      });\r\n    } else {\r\n      // Add player\r\n      setCurrentExpense({\r\n        ...currentExpense,\r\n        divideAmong: [...divideAmong, playerId],\r\n      });\r\n    }\r\n  };\r\n\r\n  // Reset divideAmong when expense type changes\r\n  const handleExpenseTypeChange = (type: ExpenseType) => {\r\n    setCurrentExpense({\r\n      ...currentExpense,\r\n      type,\r\n      // Only keep divideAmong if it's a type that uses custom division\r\n      divideAmong: shouldShowPlayerSelection(type)\r\n        ? currentExpense.divideAmong || []\r\n        : [],\r\n    });\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <ScrollView>\r\n        <View style={styles.section}>\r\n          <Text style={styles.label}>Ngy</Text>\r\n          <TouchableOpacity\r\n            onPress={() => setShowDatePicker(true)}\r\n            style={styles.datePicker}\r\n          >\r\n            <Text style={styles.dateText}>\r\n              {format(date, \"dd/MM/yyyy\", { locale: vi })}\r\n            </Text>\r\n          </TouchableOpacity>{\" \"}\r\n          {showDatePicker && (\r\n            <WebDateTimePicker\r\n              value={date}\r\n              mode=\"date\"\r\n              display=\"default\"\r\n              onChange={onChangeDate}\r\n            />\r\n          )}\r\n        </View>\r\n        <View style={styles.section}>\r\n          <Text style={styles.label}>Thi gian kt thc</Text>\r\n          <TouchableOpacity\r\n            onPress={() => setShowEndTimePicker(true)}\r\n            style={styles.datePicker}\r\n          >\r\n            <Text style={styles.dateText}>\r\n              {endTime\r\n                ? format(endTime, \"HH:mm\", { locale: vi })\r\n                : \"Cha chn thi gian\"}\r\n            </Text>\r\n          </TouchableOpacity>{\" \"}\r\n          {showEndTimePicker && (\r\n            <WebDateTimePicker\r\n              value={endTime || new Date()}\r\n              mode=\"time\"\r\n              display=\"default\"\r\n              onChange={handleEndTimeChange}\r\n            />\r\n          )}\r\n        </View>\r\n        <View style={styles.section}>\r\n          <Text style={styles.label}>a im</Text>\r\n          <TextInput\r\n            style={styles.input}\r\n            value={location}\r\n            onChangeText={setLocation}\r\n          />\r\n        </View>\r\n        <View style={styles.section}>\r\n          <Text style={styles.label}>Ghi ch</Text>\r\n          <TextInput\r\n            style={styles.input}\r\n            value={notes}\r\n            onChangeText={setNotes}\r\n            multiline\r\n          />\r\n        </View>\r\n        <View style={styles.section}>\r\n          <Text style={styles.label}>Gi thu sn (VN/gi)</Text>\r\n          <TextInput\r\n            style={styles.input}\r\n            value={courtFeePerHour}\r\n            onChangeText={setCourtFeePerHour}\r\n            keyboardType=\"numeric\"\r\n          />\r\n        </View>\r\n        <View style={styles.section}>\r\n          <Text style={styles.label}>Ngi chi</Text>\r\n          <View style={styles.playersContainer}>\r\n            {allPlayers.map((player) => (\r\n              <TouchableOpacity\r\n                key={player.id}\r\n                onPress={() => togglePlayerSelection(player.id)}\r\n                style={[\r\n                  styles.playerButton,\r\n                  selectedPlayers.includes(player.id) && styles.selectedPlayer,\r\n                ]}\r\n              >\r\n                <Text\r\n                  style={[\r\n                    styles.playerName,\r\n                    selectedPlayers.includes(player.id) &&\r\n                      styles.selectedPlayerText,\r\n                  ]}\r\n                >\r\n                  {player.name}\r\n                </Text>\r\n              </TouchableOpacity>\r\n            ))}\r\n          </View>\r\n          <View style={styles.addPlayerContainer}>\r\n            <TextInput\r\n              style={styles.addPlayerInput}\r\n              value={newPlayerName}\r\n              onChangeText={setNewPlayerName}\r\n              placeholder=\"Nhp tn ngi chi mi\"\r\n            />\r\n            <TouchableOpacity\r\n              onPress={handleAddPlayer}\r\n              style={styles.addPlayerButton}\r\n            >\r\n              <Text style={styles.addPlayerButtonText}>\r\n                <Text>Thm</Text>\r\n              </Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n        </View>\r\n        <View style={styles.section}>\r\n          <Text style={styles.label}>Chi ph</Text>\r\n          {expenses.map((expense) => (\r\n            <View key={expense.id} style={styles.expenseItem}>\r\n              {\" \"}\r\n              <Text style={styles.expenseText}>\r\n                <Text>{getExpenseTypeLabel(expense.type)}: </Text>\r\n                <Text>{formatCurrency(expense.amount)} </Text>\r\n                <TouchableOpacity\r\n                  onPress={() => removeExpense(expense.id)}\r\n                  style={styles.removeExpenseButton}\r\n                >\r\n                  <Text style={styles.removeExpenseButtonText}>\r\n                    <Text>X</Text>\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              </Text>\r\n            </View>\r\n          ))}\r\n          <View style={styles.addExpenseContainer}>\r\n            {\" \"}\r\n            <View style={styles.expenseTypeSelector}>\r\n              <Text style={styles.expenseTypeLabel}>Loi chi ph:</Text>\r\n              <View style={styles.expenseTypeOptions}>\r\n                {Object.values(ExpenseType).map((type) => (\r\n                  <TouchableOpacity\r\n                    key={type}\r\n                    style={[\r\n                      styles.expenseTypeOption,\r\n                      currentExpense.type === type &&\r\n                        styles.selectedExpenseType,\r\n                    ]}\r\n                    onPress={() => handleExpenseTypeChange(type)}\r\n                  >\r\n                    <Text\r\n                      style={[\r\n                        styles.expenseTypeText,\r\n                        currentExpense.type === type &&\r\n                          styles.selectedExpenseTypeText,\r\n                      ]}\r\n                    >\r\n                      {getExpenseTypeLabel(type)}\r\n                    </Text>\r\n                    <View style={styles.radioContainer}>\r\n                      <View\r\n                        style={[\r\n                          styles.radioOuter,\r\n                          currentExpense.type === type &&\r\n                            styles.radioOuterSelected,\r\n                        ]}\r\n                      >\r\n                        {currentExpense.type === type && (\r\n                          <View style={styles.radioInner} />\r\n                        )}\r\n                      </View>\r\n                    </View>\r\n                  </TouchableOpacity>\r\n                ))}\r\n              </View>\r\n            </View>\r\n            <TextInput\r\n              style={styles.expenseInput}\r\n              placeholder=\"S tin\"\r\n              value={currentExpense.amount}\r\n              onChangeText={(value) =>\r\n                setCurrentExpense({\r\n                  ...currentExpense,\r\n                  amount: value.replace(/[^0-9]/g, \"\"),\r\n                })\r\n              }\r\n              keyboardType=\"numeric\"\r\n            />\r\n            <TextInput\r\n              style={styles.expenseInput}\r\n              placeholder=\"M t (khng bt buc)\"\r\n              value={currentExpense.description}\r\n              onChangeText={(value) =>\r\n                setCurrentExpense({ ...currentExpense, description: value })\r\n              }\r\n            />\r\n            {shouldShowPlayerSelection(currentExpense.type) && (\r\n              <View style={styles.playerSelectionContainer}>\r\n                <Text style={styles.playerSelectionLabel}>\r\n                  Chia chi ph cho:\r\n                </Text>\r\n                <View style={styles.playerSelectionList}>\r\n                  {\" \"}\r\n                  {allPlayers.map((player) => (\r\n                    <TouchableOpacity\r\n                      key={player.id}\r\n                      style={[\r\n                        styles.playerSelectItem,\r\n                        currentExpense.divideAmong?.includes(player.id) &&\r\n                          styles.playerSelectItemSelected,\r\n                      ]}\r\n                      onPress={() => togglePlayerInExpense(player.id)}\r\n                    >\r\n                      <View style={styles.checkboxContainer}>\r\n                        <View\r\n                          style={[\r\n                            styles.checkbox,\r\n                            currentExpense.divideAmong?.includes(player.id) &&\r\n                              styles.checkboxSelected,\r\n                          ]}\r\n                        >\r\n                          {currentExpense.divideAmong?.includes(player.id) && (\r\n                            <Text style={styles.checkmark}></Text>\r\n                          )}\r\n                        </View>\r\n                      </View>\r\n                      <Text\r\n                        style={[\r\n                          styles.playerSelectName,\r\n                          currentExpense.divideAmong?.includes(player.id) &&\r\n                            styles.playerSelectNameSelected,\r\n                        ]}\r\n                      >\r\n                        {player.name}\r\n                      </Text>\r\n                    </TouchableOpacity>\r\n                  ))}\r\n                </View>\r\n              </View>\r\n            )}\r\n            <TouchableOpacity\r\n              onPress={handleAddExpense}\r\n              style={styles.addExpenseButton}\r\n            >\r\n              <Text style={styles.addExpenseButtonText}>\r\n                <Text>Thm chi ph</Text>\r\n              </Text>\r\n            </TouchableOpacity>\r\n            {courtFeePerHour && endTime && (\r\n              <TouchableOpacity\r\n                style={[styles.addExpenseButton, styles.courtFeeButton]}\r\n                onPress={addCourtFeeFromRate}\r\n              >\r\n                {\" \"}\r\n                <Text style={styles.addExpenseButtonText}>\r\n                  <Text>\r\n                    Tnh tin sn (\r\n                    {formatCurrency(parseFloat(courtFeePerHour) || 0)}/gi)\r\n                  </Text>\r\n                </Text>\r\n              </TouchableOpacity>\r\n            )}\r\n          </View>\r\n        </View>{\" \"}\r\n        <TouchableOpacity onPress={handleSubmit} style={styles.submitButton}>\r\n          <Text style={styles.submitButtonText}>\r\n            <Text>Lu bui nh cu</Text>\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </ScrollView>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    padding: 16,\r\n    backgroundColor: \"#fff\",\r\n  },\r\n  section: {\r\n    marginBottom: 24,\r\n  },\r\n  label: {\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n    marginBottom: 8,\r\n  },\r\n  datePicker: {\r\n    padding: 12,\r\n    borderWidth: 1,\r\n    borderColor: \"#ccc\",\r\n    borderRadius: 8,\r\n    alignItems: \"center\",\r\n  },\r\n  dateText: {\r\n    fontSize: 16,\r\n  },\r\n  input: {\r\n    padding: 12,\r\n    borderWidth: 1,\r\n    borderColor: \"#ccc\",\r\n    borderRadius: 8,\r\n    fontSize: 16,\r\n  },\r\n  playersContainer: {\r\n    flexDirection: \"row\",\r\n    flexWrap: \"wrap\",\r\n    marginTop: 8,\r\n  },\r\n  playerButton: {\r\n    padding: 12,\r\n    borderWidth: 1,\r\n    borderColor: \"#007bff\",\r\n    borderRadius: 8,\r\n    marginRight: 8,\r\n    marginBottom: 8,\r\n    backgroundColor: \"#f0f8ff\",\r\n  },\r\n  selectedPlayer: {\r\n    backgroundColor: \"#007bff\",\r\n  },\r\n  playerName: {\r\n    fontSize: 16,\r\n    color: \"#007bff\",\r\n  },\r\n  selectedPlayerText: {\r\n    color: \"#fff\",\r\n  },\r\n  addPlayerContainer: {\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    marginTop: 16,\r\n  },\r\n  addPlayerInput: {\r\n    flex: 1,\r\n    padding: 12,\r\n    borderWidth: 1,\r\n    borderColor: \"#007bff\",\r\n    borderRadius: 8,\r\n    fontSize: 16,\r\n    marginRight: 8,\r\n  },\r\n  addPlayerButton: {\r\n    padding: 12,\r\n    backgroundColor: \"#007bff\",\r\n    borderRadius: 8,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  addPlayerButtonText: {\r\n    color: \"#fff\",\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n  },\r\n  expenseItem: {\r\n    padding: 12,\r\n    borderWidth: 1,\r\n    borderColor: \"#ccc\",\r\n    borderRadius: 8,\r\n    marginBottom: 8,\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n  },\r\n  expenseText: {\r\n    fontSize: 16,\r\n  },\r\n  removeExpenseButton: {\r\n    padding: 8,\r\n    backgroundColor: \"#ff4d4d\",\r\n    borderRadius: 8,\r\n  },\r\n  removeExpenseButtonText: {\r\n    color: \"#fff\",\r\n    fontWeight: \"bold\",\r\n  },\r\n  addExpenseContainer: {\r\n    flexDirection: \"column\",\r\n    width: \"100%\",\r\n    marginTop: 16,\r\n  },\r\n  expenseTypeSelector: {\r\n    marginBottom: 16,\r\n    width: \"100%\",\r\n  },\r\n  expenseTypeLabel: {\r\n    fontSize: 15,\r\n    fontWeight: \"bold\",\r\n    marginBottom: 10,\r\n    color: \"#333\",\r\n  },\r\n  expenseTypeOptions: {\r\n    flexDirection: \"column\",\r\n    width: \"100%\",\r\n  },\r\n  expenseTypeOption: {\r\n    padding: 12,\r\n    borderWidth: 1,\r\n    borderColor: \"#4caf50\",\r\n    borderRadius: 8,\r\n    marginBottom: 8,\r\n    backgroundColor: \"#f0fff0\",\r\n    width: \"100%\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n  selectedExpenseType: {\r\n    backgroundColor: \"#4caf50\",\r\n  },\r\n  expenseTypeText: {\r\n    fontSize: 15,\r\n    color: \"#4caf50\",\r\n    fontWeight: \"500\",\r\n    flex: 1,\r\n  },\r\n  selectedExpenseTypeText: {\r\n    color: \"#fff\",\r\n    fontWeight: \"bold\",\r\n  },\r\n  expenseInput: {\r\n    padding: 12,\r\n    borderWidth: 1,\r\n    borderColor: \"#ccc\",\r\n    borderRadius: 8,\r\n    fontSize: 16,\r\n    marginBottom: 12,\r\n  },\r\n  playerSelectionContainer: {\r\n    marginBottom: 12,\r\n  },\r\n  playerSelectionLabel: {\r\n    fontSize: 14,\r\n    fontWeight: \"bold\",\r\n    marginBottom: 8,\r\n  },\r\n  playerSelectionList: {\r\n    flexDirection: \"column\",\r\n    width: \"100%\",\r\n  },\r\n  playerSelectItem: {\r\n    padding: 10,\r\n    borderWidth: 1,\r\n    borderColor: \"#4caf50\",\r\n    borderRadius: 8,\r\n    marginBottom: 8,\r\n    backgroundColor: \"#f0fff0\",\r\n    width: \"100%\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n  },\r\n  playerSelectItemSelected: {\r\n    backgroundColor: \"#4caf50\",\r\n  },\r\n  playerSelectName: {\r\n    fontSize: 15,\r\n    color: \"#4caf50\",\r\n    flex: 1,\r\n    fontWeight: \"500\",\r\n  },\r\n  playerSelectNameSelected: {\r\n    color: \"#fff\",\r\n    fontWeight: \"bold\",\r\n  },\r\n  addExpenseButton: {\r\n    backgroundColor: \"#4caf50\",\r\n    padding: 12,\r\n    borderRadius: 8,\r\n    alignItems: \"center\",\r\n    marginTop: 8,\r\n    marginBottom: 12,\r\n  },\r\n  addExpenseButtonText: {\r\n    color: \"#fff\",\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n  },\r\n  checkboxContainer: {\r\n    marginRight: 10,\r\n  },\r\n  checkbox: {\r\n    width: 20,\r\n    height: 20,\r\n    borderWidth: 1,\r\n    borderColor: \"#4caf50\",\r\n    borderRadius: 4,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#fff\",\r\n  },\r\n  checkboxSelected: {\r\n    backgroundColor: \"#4caf50\",\r\n  },\r\n  checkmark: {\r\n    color: \"#fff\",\r\n    fontSize: 12,\r\n    fontWeight: \"bold\",\r\n  },\r\n  radioContainer: {\r\n    marginLeft: 10,\r\n  },\r\n  radioOuter: {\r\n    width: 22,\r\n    height: 22,\r\n    borderRadius: 11,\r\n    borderWidth: 2,\r\n    borderColor: \"#4caf50\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#fff\",\r\n  },\r\n  radioOuterSelected: {\r\n    borderColor: \"#4caf50\",\r\n    backgroundColor: \"#f0fff0\",\r\n  },\r\n  radioInner: {\r\n    width: 12,\r\n    height: 12,\r\n    borderRadius: 6,\r\n    backgroundColor: \"#4caf50\",\r\n  },\r\n  courtFeeButton: {\r\n    backgroundColor: \"#2196f3\",\r\n  },\r\n  submitButton: {\r\n    backgroundColor: \"#4caf50\",\r\n    padding: 16,\r\n    borderRadius: 8,\r\n    alignItems: \"center\",\r\n    marginTop: 24,\r\n  },\r\n  submitButtonText: {\r\n    color: \"#fff\",\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n  },\r\n});\r\n\r\nexport default NewSessionScreen;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  ScrollView,\r\n  ActivityIndicator,\r\n} from \"react-native\";\r\nimport { CrossPlatformAlert as Alert } from \"../utils\";\r\nimport { useNavigation, useRoute, RouteProp } from \"@react-navigation/native\";\r\nimport { format } from \"date-fns\";\r\nimport { vi } from \"date-fns/locale\";\r\nimport WebDateTimePicker from \"../components/web/WebDateTimePicker\";\r\nimport {\r\n  getPlayers,\r\n  getSessions,\r\n  updateSession,\r\n} from \"../services/storageService\";\r\nimport { ExpenseType, Player, Expense, Session } from \"../models/types\";\r\nimport { generateId, formatCurrency } from \"../utils/expenseUtils\";\r\n\r\ntype RouteParams = {\r\n  EditSession: {\r\n    sessionId: string;\r\n  };\r\n};\r\n\r\nconst EditSessionScreen = () => {\r\n  const navigation = useNavigation<any>();\r\n  const route = useRoute<RouteProp<RouteParams, \"EditSession\">>();\r\n  const { sessionId } = route.params;\r\n\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [originalSession, setOriginalSession] = useState<Session | null>(null);\r\n  const [date, setDate] = useState(new Date());\r\n  const [endTime, setEndTime] = useState<Date | null>(null);\r\n  const [location, setLocation] = useState(\"\");\r\n  const [notes, setNotes] = useState(\"\");\r\n  const [courtFeePerHour, setCourtFeePerHour] = useState(\"\");\r\n  const [showDatePicker, setShowDatePicker] = useState(false);\r\n  const [showEndTimePicker, setShowEndTimePicker] = useState(false);\r\n\r\n  const [allPlayers, setAllPlayers] = useState<Player[]>([]);\r\n  const [selectedPlayers, setSelectedPlayers] = useState<string[]>([]);\r\n  const [newPlayerName, setNewPlayerName] = useState(\"\");\r\n\r\n  const [expenses, setExpenses] = useState<Expense[]>([]);\r\n  const [currentExpense, setCurrentExpense] = useState<{\r\n    type: ExpenseType;\r\n    amount: string;\r\n    description: string;\r\n    divideAmong?: string[];\r\n  }>({\r\n    type: ExpenseType.COURT_FEE,\r\n    amount: \"\",\r\n    description: \"\",\r\n    divideAmong: [],\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadSession();\r\n    loadPlayers();\r\n  }, [sessionId]);\r\n\r\n  const loadSession = async () => {\r\n    try {\r\n      const sessions = await getSessions();\r\n      const session = sessions.find((s) => s.id === sessionId);\r\n\r\n      if (session) {\r\n        setOriginalSession(session);\r\n\r\n        // Set the form values from the session\r\n        setDate(new Date(session.date));\r\n        setLocation(session.location);\r\n        setNotes(session.notes || \"\");\r\n        setExpenses([...session.expenses]);\r\n        setSelectedPlayers(session.players.map((player) => player.id));\r\n\r\n        // Set end time if available\r\n        if (session.endTime) {\r\n          setEndTime(new Date(session.endTime));\r\n        }\r\n\r\n        // Set court fee per hour if available\r\n        if (session.courtFeePerHour) {\r\n          setCourtFeePerHour(session.courtFeePerHour.toString());\r\n        }\r\n      } else {\r\n        Alert.alert(\"Li\", \"Khng tm thy bui nh cu\");\r\n        navigation.goBack();\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Li khi ti thng tin bui nh cu:\", error);\r\n      Alert.alert(\"Li\", \"Khng th ti thng tin bui nh cu\");\r\n      navigation.goBack();\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadPlayers = async () => {\r\n    try {\r\n      const players = await getPlayers();\r\n      setAllPlayers(players);\r\n    } catch (error) {\r\n      console.error(\"Li khi ti danh sch ngi chi:\", error);\r\n    }\r\n  };\r\n\r\n  const onChangeDate = (event: any, selectedDate?: Date) => {\r\n    setShowDatePicker(false);\r\n    if (selectedDate) {\r\n      setDate(selectedDate);\r\n    }\r\n  };\r\n\r\n  // Handle end time selection\r\n  const handleEndTimeChange = (event: any, selectedDate?: Date) => {\r\n    setShowEndTimePicker(false);\r\n    if (selectedDate) {\r\n      setEndTime(selectedDate);\r\n    }\r\n  };\r\n\r\n  // Calculate duration between start and end time in minutes\r\n  const calculateDuration = (): number | undefined => {\r\n    if (date && endTime) {\r\n      const startDate = new Date(date);\r\n      const end = new Date(endTime);\r\n\r\n      // Set the end time to use the same date as the start time\r\n      end.setFullYear(\r\n        startDate.getFullYear(),\r\n        startDate.getMonth(),\r\n        startDate.getDate()\r\n      );\r\n\r\n      // If end time is earlier than start time, assume it's the next day\r\n      if (end < startDate) {\r\n        end.setDate(end.getDate() + 1);\r\n      }\r\n\r\n      // Calculate duration in minutes\r\n      return Math.round((end.getTime() - startDate.getTime()) / (1000 * 60));\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  // Calculate court fee based on duration and hourly rate\r\n  const calculateCourtFee = (): number => {\r\n    const duration = calculateDuration();\r\n    if (duration && courtFeePerHour) {\r\n      const hourlyRate = parseFloat(courtFeePerHour);\r\n      const hours = duration / 60;\r\n      return Math.round(hourlyRate * hours);\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  // Add court fee from hourly rate\r\n  const addCourtFeeFromRate = () => {\r\n    if (!courtFeePerHour || parseFloat(courtFeePerHour) <= 0) {\r\n      Alert.alert(\"Li\", \"Vui lng nhp gi thu sn hp l\");\r\n      return;\r\n    }\r\n\r\n    if (!endTime) {\r\n      Alert.alert(\r\n        \"Li\",\r\n        \"Vui lng chn thi gian kt thc  tnh chi ph thu sn\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    const fee = calculateCourtFee();\r\n    if (fee <= 0) {\r\n      Alert.alert(\"Li\", \"Khng th tnh chi ph thu sn\");\r\n      return;\r\n    }\r\n\r\n    const duration = calculateDuration();\r\n    let hours = 0;\r\n    let minutes = 0;\r\n\r\n    if (duration) {\r\n      hours = Math.floor(duration / 60);\r\n      minutes = duration % 60;\r\n    }\r\n\r\n    const hourText = hours > 0 ? hours + \" gi \" : \"\";\r\n    const minuteText = minutes > 0 ? minutes + \" pht\" : \"\";\r\n    const durationText = hourText + minuteText;\r\n\r\n    const rateText = formatCurrency(parseFloat(courtFeePerHour)) + \"/gi\";\r\n    const desc = \"Sn \" + durationText + \" (\" + rateText + \")\";\r\n\r\n    const newExpense = {\r\n      id: generateId(),\r\n      type: ExpenseType.COURT_FEE,\r\n      amount: fee,\r\n      description: desc,\r\n    };\r\n\r\n    setExpenses([...expenses, newExpense]);\r\n    Alert.alert(\"Thnh cng\", \" thm chi ph thu sn\");\r\n  };\r\n\r\n  const togglePlayerSelection = (playerId: string) => {\r\n    if (selectedPlayers.includes(playerId)) {\r\n      setSelectedPlayers(selectedPlayers.filter((id) => id !== playerId));\r\n    } else {\r\n      setSelectedPlayers([...selectedPlayers, playerId]);\r\n    }\r\n  };\r\n\r\n  // Toggle a player in the divideAmong list\r\n  const togglePlayerInExpense = (playerId: string) => {\r\n    const divideAmong = currentExpense.divideAmong || [];\r\n\r\n    if (divideAmong.includes(playerId)) {\r\n      // Remove player\r\n      setCurrentExpense({\r\n        ...currentExpense,\r\n        divideAmong: divideAmong.filter((id) => id !== playerId),\r\n      });\r\n    } else {\r\n      // Add player\r\n      setCurrentExpense({\r\n        ...currentExpense,\r\n        divideAmong: [...divideAmong, playerId],\r\n      });\r\n    }\r\n  };\r\n\r\n  // Reset divideAmong when expense type changes\r\n  const handleExpenseTypeChange = (type: ExpenseType) => {\r\n    setCurrentExpense({\r\n      ...currentExpense,\r\n      type,\r\n      // Only keep divideAmong if it's a type that uses custom division\r\n      divideAmong: shouldShowPlayerSelection(type)\r\n        ? currentExpense.divideAmong || []\r\n        : [],\r\n    });\r\n  };\r\n  const handleAddExpense = () => {\r\n    if (!currentExpense.amount || parseFloat(currentExpense.amount) <= 0) {\r\n      Alert.alert(\"Li\", \"Vui lng nhp s tin hp l\");\r\n      return;\r\n    }\r\n\r\n    // For non-general expense types, check if players are selected\r\n    if (\r\n      shouldShowPlayerSelection(currentExpense.type) &&\r\n      (!currentExpense.divideAmong || currentExpense.divideAmong.length === 0)\r\n    ) {\r\n      Alert.alert(\r\n        \"Cha chn ngi tham gia\",\r\n        \"Vui lng chn t nht mt ngi tham gia  chi tr chi ph ny.\"\r\n      );\r\n      return;\r\n    }\r\n\r\n    const newExpense: Expense = {\r\n      id: generateId(),\r\n      type: currentExpense.type,\r\n      amount: parseFloat(currentExpense.amount),\r\n      description: currentExpense.description,\r\n      divideAmong: currentExpense.divideAmong?.length\r\n        ? currentExpense.divideAmong\r\n        : undefined,\r\n    };\r\n\r\n    setExpenses([...expenses, newExpense]);\r\n    setCurrentExpense({\r\n      type: ExpenseType.COURT_FEE,\r\n      amount: \"\",\r\n      description: \"\",\r\n      divideAmong: [],\r\n    });\r\n  };\r\n\r\n  const removeExpense = (id: string) => {\r\n    setExpenses(expenses.filter((expense) => expense.id !== id));\r\n  };\r\n\r\n  const getExpenseTypeLabel = (type: ExpenseType): string => {\r\n    switch (type) {\r\n      case ExpenseType.COURT_FEE:\r\n        return \"Tin sn\";\r\n      case ExpenseType.SHUTTLE:\r\n        return \"Tin cu\";\r\n      case ExpenseType.DRINK:\r\n        return \"Tin nc\";\r\n      case ExpenseType.EQUIPMENT:\r\n        return \"Tin ph kin\";\r\n      case ExpenseType.OTHER:\r\n        return \"Chi ph khc\";\r\n      default:\r\n        return \"Chi ph\";\r\n    }\r\n  };\r\n\r\n  const shouldShowPlayerSelection = (type: ExpenseType): boolean => {\r\n    return [\r\n      ExpenseType.DRINK,\r\n      ExpenseType.EQUIPMENT,\r\n      ExpenseType.OTHER,\r\n    ].includes(type);\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!location.trim()) {\r\n      Alert.alert(\"Li\", \"Vui lng nhp a im nh cu\");\r\n      return;\r\n    }\r\n\r\n    if (selectedPlayers.length === 0) {\r\n      Alert.alert(\"Li\", \"Vui lng chn t nht mt ngi tham gia\");\r\n      return;\r\n    }\r\n\r\n    if (expenses.length === 0) {\r\n      Alert.alert(\"Li\", \"Vui lng thm t nht mt khon chi ph\");\r\n      return;\r\n    }\r\n\r\n    if (!originalSession) {\r\n      Alert.alert(\"Li\", \"Khng tm thy thng tin gc ca bui nh cu\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const selectedPlayerObjects = allPlayers.filter((p) =>\r\n        selectedPlayers.includes(p.id)\r\n      ); // Calculate duration if end time is set\r\n      const duration = calculateDuration();\r\n\r\n      // Parse court fee per hour if provided\r\n      const hourlyFee = courtFeePerHour\r\n        ? parseFloat(courtFeePerHour)\r\n        : undefined;\r\n\r\n      await updateSession({\r\n        ...originalSession,\r\n        date: date.toISOString(),\r\n        endTime: endTime ? endTime.toISOString() : undefined,\r\n        duration: duration,\r\n        courtFeePerHour: hourlyFee,\r\n        location: location.trim(),\r\n        notes: notes.trim() || undefined,\r\n        players: selectedPlayerObjects,\r\n        expenses: expenses,\r\n      });\r\n\r\n      Alert.alert(\"Thnh cng\", \" cp nht bui nh cu\", [\r\n        { text: \"OK\", onPress: () => navigation.goBack() },\r\n      ]);\r\n    } catch (error) {\r\n      Alert.alert(\"Li\", \"Khng th cp nht bui nh cu\");\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <View style={styles.loadingContainer}>\r\n        <ActivityIndicator size=\"large\" color=\"#4caf50\" />\r\n        <Text style={styles.loadingText}>ang ti...</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ScrollView style={styles.container}>\r\n      <View style={styles.section}>\r\n        <Text style={styles.sectionTitle}>Thng tin c bn</Text>\r\n        <TouchableOpacity\r\n          style={styles.dateInput}\r\n          onPress={() => setShowDatePicker(true)}\r\n        >\r\n          <Text style={styles.dateText}>\r\n            {format(date, \"EEEE, dd/MM/yyyy\", { locale: vi })}\r\n          </Text>\r\n        </TouchableOpacity>{\" \"}\r\n        {showDatePicker && (\r\n          <WebDateTimePicker\r\n            value={date}\r\n            mode=\"date\"\r\n            display=\"default\"\r\n            onChange={onChangeDate}\r\n          />\r\n        )}\r\n        <View style={styles.timeInputContainer}>\r\n          <Text style={styles.timeInputLabel}>Thi gian bt u:</Text>\r\n          <TouchableOpacity\r\n            style={styles.timeInput}\r\n            onPress={() => {\r\n              const now = new Date();\r\n              setDate((prev) => {\r\n                const newDate = new Date(prev);\r\n                newDate.setHours(now.getHours(), now.getMinutes(), 0, 0);\r\n                return newDate;\r\n              });\r\n              setShowDatePicker(true);\r\n            }}\r\n          >\r\n            <Text style={styles.timeText}>{format(date, \"HH:mm\")}</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n        <View style={styles.timeInputContainer}>\r\n          <Text style={styles.timeInputLabel}>Thi gian kt thc:</Text>\r\n          <TouchableOpacity\r\n            style={styles.timeInput}\r\n            onPress={() => setShowEndTimePicker(true)}\r\n          >\r\n            <Text style={styles.timeText}>\r\n              {endTime ? format(endTime, \"HH:mm\") : \"Chn gi kt thc\"}\r\n            </Text>\r\n          </TouchableOpacity>\r\n        </View>{\" \"}\r\n        {showEndTimePicker && (\r\n          <WebDateTimePicker\r\n            value={endTime || new Date()}\r\n            mode=\"time\"\r\n            display=\"default\"\r\n            onChange={handleEndTimeChange}\r\n          />\r\n        )}{\" \"}\r\n        <TextInput\r\n          style={styles.input}\r\n          placeholder=\"a im\"\r\n          value={location}\r\n          onChangeText={setLocation}\r\n        />\r\n        <View style={styles.feeContainer}>\r\n          <Text style={styles.feeLabel}>Gi thu sn (VN/1 gi):</Text>\r\n          <TextInput\r\n            style={styles.feeInput}\r\n            placeholder=\"Nhp gi sn\"\r\n            value={courtFeePerHour}\r\n            onChangeText={(value) =>\r\n              setCourtFeePerHour(value.replace(/[^0-9]/g, \"\"))\r\n            }\r\n            keyboardType=\"numeric\"\r\n          />\r\n        </View>\r\n        <TextInput\r\n          style={[styles.input, styles.multilineInput]}\r\n          placeholder=\"Ghi ch (khng bt buc)\"\r\n          value={notes}\r\n          onChangeText={setNotes}\r\n          multiline\r\n        />\r\n      </View>\r\n\r\n      <View style={styles.section}>\r\n        <Text style={styles.sectionTitle}>Ngi tham gia</Text>\r\n\r\n        <View style={styles.playerList}>\r\n          {allPlayers.map((player) => (\r\n            <TouchableOpacity\r\n              key={player.id}\r\n              style={[\r\n                styles.playerItem,\r\n                selectedPlayers.includes(player.id) &&\r\n                  styles.playerItemSelected,\r\n              ]}\r\n              onPress={() => togglePlayerSelection(player.id)}\r\n            >\r\n              <Text\r\n                style={[\r\n                  styles.playerName,\r\n                  selectedPlayers.includes(player.id) &&\r\n                    styles.playerNameSelected,\r\n                ]}\r\n              >\r\n                {player.name}\r\n              </Text>\r\n            </TouchableOpacity>\r\n          ))}\r\n        </View>\r\n      </View>\r\n\r\n      <View style={styles.section}>\r\n        <Text style={styles.sectionTitle}>Chi ph</Text>\r\n\r\n        {expenses.length > 0 && (\r\n          <View style={styles.expenseList}>\r\n            {expenses.map((expense) => (\r\n              <View key={expense.id} style={styles.expenseItem}>\r\n                <View style={styles.expenseHeader}>\r\n                  {\" \"}\r\n                  <Text style={styles.expenseType}>\r\n                    <Text>{getExpenseTypeLabel(expense.type)}</Text>\r\n                  </Text>{\" \"}\r\n                  <Text style={styles.expenseAmount}>\r\n                    <Text>{formatCurrency(expense.amount)}</Text>\r\n                  </Text>\r\n                </View>\r\n\r\n                {expense.description && (\r\n                  <Text style={styles.expenseDescription}>\r\n                    {\" \"}\r\n                    <Text>{expense.description}</Text>\r\n                  </Text>\r\n                )}\r\n\r\n                {/* Display the specific players for custom expense division */}\r\n                {expense.divideAmong && expense.divideAmong.length > 0 && (\r\n                  <View style={styles.expensePlayers}>\r\n                    <Text style={styles.expensePlayersLabel}>\r\n                      Chi ph chia cho:\r\n                    </Text>\r\n                    <View style={styles.expensePlayersList}>\r\n                      {expense.divideAmong.map((playerId) => {\r\n                        const player = allPlayers.find(\r\n                          (p) => p.id === playerId\r\n                        );\r\n                        return player ? (\r\n                          <Text key={playerId} style={styles.expensePlayerName}>\r\n                            <Text>{player.name}</Text>\r\n                          </Text>\r\n                        ) : null;\r\n                      })}\r\n                    </View>\r\n                  </View>\r\n                )}\r\n\r\n                <TouchableOpacity\r\n                  style={styles.removeButton}\r\n                  onPress={() => removeExpense(expense.id)}\r\n                >\r\n                  <Text style={styles.removeButtonText}>Xa</Text>\r\n                </TouchableOpacity>\r\n              </View>\r\n            ))}\r\n          </View>\r\n        )}\r\n\r\n        <View style={styles.newExpenseContainer}>\r\n          <View style={styles.selectContainer}>\r\n            <Text style={styles.selectLabel}>Loi chi ph:</Text>\r\n            <View style={styles.selectOptions}>\r\n              {Object.values(ExpenseType).map((type) => (\r\n                <TouchableOpacity\r\n                  key={type}\r\n                  style={[\r\n                    styles.selectOption,\r\n                    currentExpense.type === type && styles.selectOptionSelected,\r\n                  ]}\r\n                  onPress={() => handleExpenseTypeChange(type)}\r\n                >\r\n                  <Text\r\n                    style={[\r\n                      styles.selectOptionText,\r\n                      currentExpense.type === type &&\r\n                        styles.selectOptionTextSelected,\r\n                    ]}\r\n                  >\r\n                    {getExpenseTypeLabel(type)}\r\n                  </Text>\r\n                </TouchableOpacity>\r\n              ))}\r\n            </View>\r\n          </View>\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"S tin\"\r\n            value={currentExpense.amount}\r\n            onChangeText={(value) =>\r\n              setCurrentExpense({\r\n                ...currentExpense,\r\n                amount: value.replace(/[^0-9]/g, \"\"),\r\n              })\r\n            }\r\n            keyboardType=\"numeric\"\r\n          />\r\n          <TextInput\r\n            style={styles.input}\r\n            placeholder=\"M t (khng bt buc)\"\r\n            value={currentExpense.description}\r\n            onChangeText={(value) =>\r\n              setCurrentExpense({ ...currentExpense, description: value })\r\n            }\r\n          />{\" \"}\r\n          {shouldShowPlayerSelection(currentExpense.type) && (\r\n            <View style={styles.playerSelectionContainer}>\r\n              <Text style={styles.playerSelectionLabel}>\r\n                Chia s chi ph cho:\r\n              </Text>\r\n              <View style={styles.playerSelectionList}>\r\n                {allPlayers.map((player) => (\r\n                  <TouchableOpacity\r\n                    key={player.id}\r\n                    style={[\r\n                      styles.playerSelectItem,\r\n                      currentExpense.divideAmong?.includes(player.id) &&\r\n                        styles.playerSelectItemSelected,\r\n                    ]}\r\n                    onPress={() => togglePlayerInExpense(player.id)}\r\n                  >\r\n                    <Text\r\n                      style={[\r\n                        styles.playerSelectName,\r\n                        currentExpense.divideAmong?.includes(player.id) &&\r\n                          styles.playerSelectNameSelected,\r\n                      ]}\r\n                    >\r\n                      {player.name}\r\n                    </Text>\r\n                  </TouchableOpacity>\r\n                ))}\r\n              </View>\r\n            </View>\r\n          )}\r\n          <TouchableOpacity\r\n            style={styles.addExpenseButton}\r\n            onPress={handleAddExpense}\r\n          >\r\n            <Text style={styles.addExpenseButtonText}>Thm chi ph</Text>\r\n          </TouchableOpacity>\r\n          {courtFeePerHour && endTime && (\r\n            <TouchableOpacity\r\n              style={[styles.addExpenseButton, styles.courtFeeButton]}\r\n              onPress={addCourtFeeFromRate}\r\n            >\r\n              {\" \"}\r\n              <Text style={styles.addExpenseButtonText}>\r\n                <Text>\r\n                  Tnh tin sn (\r\n                  {formatCurrency(parseFloat(courtFeePerHour) || 0)}/gi)\r\n                </Text>\r\n              </Text>\r\n            </TouchableOpacity>\r\n          )}\r\n        </View>\r\n      </View>\r\n\r\n      <View style={styles.buttonContainer}>\r\n        <TouchableOpacity style={styles.submitButton} onPress={handleSubmit}>\r\n          <Text style={styles.submitButtonText}>\r\n            <Text>Cp nht</Text>\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    </ScrollView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    padding: 16,\r\n    backgroundColor: \"#fff\",\r\n  },\r\n  loadingContainer: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  loadingText: {\r\n    marginTop: 12,\r\n    fontSize: 16,\r\n    color: \"#555\",\r\n  },\r\n  section: {\r\n    marginBottom: 24,\r\n  },\r\n  sectionTitle: {\r\n    fontSize: 18,\r\n    fontWeight: \"bold\",\r\n    marginBottom: 12,\r\n    color: \"#333\",\r\n  },\r\n  dateInput: {\r\n    backgroundColor: \"#f0f0f0\",\r\n    paddingVertical: 12,\r\n    paddingHorizontal: 16,\r\n    borderRadius: 8,\r\n    marginBottom: 12,\r\n  },\r\n  dateText: {\r\n    fontSize: 16,\r\n    color: \"#333\",\r\n  },\r\n  timeInputContainer: {\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n    marginBottom: 12,\r\n  },\r\n  timeInputLabel: {\r\n    fontSize: 16,\r\n    color: \"#333\",\r\n    flex: 1,\r\n  },\r\n  timeInput: {\r\n    backgroundColor: \"#f0f0f0\",\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 10,\r\n    borderRadius: 8,\r\n    flex: 1,\r\n    marginLeft: 8,\r\n  },\r\n  timeText: {\r\n    fontSize: 16,\r\n    textAlign: \"center\",\r\n    color: \"#444\",\r\n  },\r\n  input: {\r\n    backgroundColor: \"#f0f0f0\",\r\n    paddingVertical: 12,\r\n    paddingHorizontal: 16,\r\n    borderRadius: 8,\r\n    marginBottom: 12,\r\n    fontSize: 16,\r\n  },\r\n  multilineInput: {\r\n    minHeight: 80,\r\n    textAlignVertical: \"top\",\r\n  },\r\n  playerList: {\r\n    flexDirection: \"row\",\r\n    flexWrap: \"wrap\",\r\n    marginBottom: 12,\r\n  },\r\n  playerItem: {\r\n    backgroundColor: \"#f0f0f0\",\r\n    paddingVertical: 8,\r\n    paddingHorizontal: 12,\r\n    borderRadius: 16,\r\n    margin: 4,\r\n  },\r\n  playerItemSelected: {\r\n    backgroundColor: \"#4caf50\",\r\n  },\r\n  playerName: {\r\n    fontSize: 14,\r\n    color: \"#444\",\r\n  },\r\n  playerNameSelected: {\r\n    color: \"white\",\r\n  },\r\n  newPlayerContainer: {\r\n    flexDirection: \"row\",\r\n  },\r\n  newPlayerInput: {\r\n    flex: 1,\r\n    backgroundColor: \"#f0f0f0\",\r\n    paddingVertical: 12,\r\n    paddingHorizontal: 16,\r\n    borderRadius: 8,\r\n    marginRight: 8,\r\n    fontSize: 16,\r\n  },\r\n  addPlayerButton: {\r\n    backgroundColor: \"#2196f3\",\r\n    paddingHorizontal: 16,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    borderRadius: 8,\r\n  },\r\n  addPlayerButtonText: {\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n  },\r\n  expenseList: {\r\n    marginBottom: 16,\r\n  },\r\n  expenseItem: {\r\n    backgroundColor: \"#f9f9f9\",\r\n    padding: 12,\r\n    borderRadius: 8,\r\n    marginBottom: 8,\r\n  },\r\n  expenseHeader: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    marginBottom: 4,\r\n  },\r\n  expenseType: {\r\n    fontSize: 15,\r\n    fontWeight: \"500\",\r\n    color: \"#444\",\r\n  },\r\n  expenseAmount: {\r\n    fontSize: 15,\r\n    fontWeight: \"bold\",\r\n    color: \"#2e7d32\",\r\n  },\r\n  expenseDescription: {\r\n    fontSize: 14,\r\n    color: \"#777\",\r\n    marginBottom: 8,\r\n  },\r\n  removeButton: {\r\n    alignSelf: \"flex-end\",\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 4,\r\n    backgroundColor: \"#f44336\",\r\n    borderRadius: 4,\r\n  },\r\n  removeButtonText: {\r\n    color: \"white\",\r\n    fontSize: 12,\r\n  },\r\n  newExpenseContainer: {\r\n    marginTop: 8,\r\n  },\r\n  selectContainer: {\r\n    marginBottom: 12,\r\n  },\r\n  selectLabel: {\r\n    fontSize: 14,\r\n    color: \"#555\",\r\n    marginBottom: 6,\r\n  },\r\n  selectOptions: {\r\n    flexDirection: \"row\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  selectOption: {\r\n    backgroundColor: \"#f0f0f0\",\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 8,\r\n    borderRadius: 16,\r\n    margin: 4,\r\n  },\r\n  selectOptionSelected: {\r\n    backgroundColor: \"#2196f3\",\r\n  },\r\n  selectOptionText: {\r\n    fontSize: 14,\r\n    color: \"#444\",\r\n  },\r\n  selectOptionTextSelected: {\r\n    color: \"white\",\r\n    fontWeight: \"500\",\r\n  },\r\n  addExpenseButton: {\r\n    backgroundColor: \"#4caf50\",\r\n    paddingVertical: 12,\r\n    borderRadius: 8,\r\n    alignItems: \"center\",\r\n    marginTop: 8,\r\n  },\r\n  addExpenseButtonText: {\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n    fontSize: 16,\r\n  },\r\n  buttonContainer: {\r\n    marginTop: 16,\r\n    marginBottom: 30,\r\n  },\r\n  submitButton: {\r\n    backgroundColor: \"#2e7d32\",\r\n    paddingVertical: 14,\r\n    borderRadius: 8,\r\n    alignItems: \"center\",\r\n  },\r\n  submitButtonText: {\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n    fontSize: 18,\r\n  },\r\n  feeContainer: {\r\n    marginBottom: 12,\r\n  },\r\n  feeLabel: {\r\n    fontSize: 16,\r\n    color: \"#333\",\r\n    marginBottom: 8,\r\n  },\r\n  feeInput: {\r\n    backgroundColor: \"#f0f0f0\",\r\n    paddingVertical: 12,\r\n    paddingHorizontal: 16,\r\n    borderRadius: 8,\r\n    fontSize: 16,\r\n  },\r\n  courtFeeButton: {\r\n    backgroundColor: \"#2196f3\",\r\n    marginTop: 8,\r\n  },\r\n  playerSelectionContainer: {\r\n    marginTop: 12,\r\n    padding: 12,\r\n    borderRadius: 8,\r\n    backgroundColor: \"#f9f9f9\",\r\n    borderWidth: 1,\r\n    borderColor: \"#ddd\",\r\n  },\r\n  playerSelectionLabel: {\r\n    fontSize: 16,\r\n    color: \"#333\",\r\n    marginBottom: 8,\r\n  },\r\n  playerSelectionList: {\r\n    flexDirection: \"row\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  playerSelectItem: {\r\n    backgroundColor: \"#f0f0f0\",\r\n    paddingVertical: 8,\r\n    paddingHorizontal: 12,\r\n    borderRadius: 16,\r\n    margin: 4,\r\n  },\r\n  playerSelectItemSelected: {\r\n    backgroundColor: \"#4caf50\",\r\n  },\r\n  playerSelectName: {\r\n    fontSize: 14,\r\n    color: \"#444\",\r\n  },\r\n  playerSelectNameSelected: {\r\n    color: \"white\",\r\n  },\r\n  expensePlayers: {\r\n    marginTop: 6,\r\n    marginBottom: 8,\r\n  },\r\n  expensePlayersLabel: {\r\n    fontSize: 12,\r\n    color: \"#666\",\r\n    fontStyle: \"italic\",\r\n  },\r\n  expensePlayersList: {\r\n    flexDirection: \"row\",\r\n    flexWrap: \"wrap\",\r\n    marginTop: 4,\r\n  },\r\n  expensePlayerName: {\r\n    fontSize: 12,\r\n    color: \"#4caf50\",\r\n    backgroundColor: \"#f0fff0\",\r\n    borderWidth: 1,\r\n    borderColor: \"#4caf50\",\r\n    borderRadius: 4,\r\n    paddingVertical: 2,\r\n    paddingHorizontal: 6,\r\n    marginRight: 6,\r\n    marginBottom: 4,\r\n  },\r\n});\r\n\r\nexport default EditSessionScreen;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  TouchableOpacity,\r\n  FlatList,\r\n} from \"react-native\";\r\nimport { CrossPlatformAlert as Alert } from \"../utils\";\r\nimport { getPlayers, deletePlayer } from \"../services/storageService\";\r\nimport { Player } from \"../models/types\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\n\r\nconst PlayersScreen = () => {\r\n  const navigation = useNavigation<any>();\r\n  const [players, setPlayers] = useState<Player[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadPlayers();\r\n\r\n    // Reload khi quay li mn hnh\r\n    const unsubscribe = navigation.addListener(\"focus\", () => {\r\n      loadPlayers();\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, [navigation]);\r\n\r\n  const loadPlayers = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const data = await getPlayers();\r\n      // Sp xp theo tn\r\n      const sortedPlayers = [...data].sort((a, b) =>\r\n        a.name.localeCompare(b.name)\r\n      );\r\n      setPlayers(sortedPlayers);\r\n    } catch (error) {\r\n      console.error(\"Li khi ti danh sch ngi chi:\", error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeletePlayer = (player: Player) => {\r\n    Alert.alert(\r\n      \"Xc nhn xa\",\r\n      `Bn c chc chn mun xa ngi chi \"${player.name}\" khng?`,\r\n      [\r\n        { text: \"Hy\", style: \"cancel\" },\r\n        {\r\n          text: \"Xa\",\r\n          style: \"destructive\",\r\n          onPress: async () => {\r\n            try {\r\n              await deletePlayer(player.id);\r\n              loadPlayers();\r\n            } catch (error) {\r\n              Alert.alert(\"Li\", \"Khng th xa ngi chi\");\r\n            }\r\n          },\r\n        },\r\n      ]\r\n    );\r\n  };\r\n\r\n  const renderItem = ({ item }: { item: Player }) => (\r\n    <View style={styles.playerItem}>\r\n      <Text style={styles.playerName}>{item.name}</Text>\r\n      <TouchableOpacity\r\n        style={styles.deleteButton}\r\n        onPress={() => handleDeletePlayer(item)}\r\n      >\r\n        <Text style={styles.deleteButtonText}>Xa</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <FlatList\r\n        data={players}\r\n        renderItem={renderItem}\r\n        keyExtractor={(item) => item.id}\r\n        contentContainerStyle={styles.listContainer}\r\n        ListEmptyComponent={\r\n          <Text style={styles.emptyText}>\r\n            {isLoading\r\n              ? \"ang ti...\"\r\n              : \"Cha c ngi chi no. Hy thm ngi chi mi!\"}\r\n          </Text>\r\n        }\r\n      />\r\n\r\n      <TouchableOpacity\r\n        style={styles.addButton}\r\n        onPress={() => navigation.navigate(\"AddPlayer\")}\r\n      >\r\n        <Text style={styles.addButtonText}>+ Thm ngi chi</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: \"#f5f5f5\",\r\n  },\r\n  listContainer: {\r\n    padding: 16,\r\n    paddingBottom: 80,\r\n  },\r\n  playerItem: {\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n    backgroundColor: \"white\",\r\n    padding: 16,\r\n    borderRadius: 8,\r\n    marginBottom: 12,\r\n    elevation: 2,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 1 },\r\n    shadowOpacity: 0.22,\r\n    shadowRadius: 2.22,\r\n  },\r\n  playerName: {\r\n    fontSize: 16,\r\n    color: \"#333\",\r\n  },\r\n  deleteButton: {\r\n    backgroundColor: \"#f44336\",\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 6,\r\n    borderRadius: 4,\r\n  },\r\n  deleteButtonText: {\r\n    color: \"white\",\r\n    fontSize: 14,\r\n    fontWeight: \"500\",\r\n  },\r\n  emptyText: {\r\n    textAlign: \"center\",\r\n    marginTop: 40,\r\n    fontSize: 16,\r\n    color: \"#666\",\r\n  },\r\n  addButton: {\r\n    position: \"absolute\",\r\n    bottom: 20,\r\n    left: 20,\r\n    right: 20,\r\n    backgroundColor: \"#4caf50\",\r\n    paddingVertical: 14,\r\n    borderRadius: 8,\r\n    alignItems: \"center\",\r\n    elevation: 4,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.23,\r\n    shadowRadius: 2.62,\r\n  },\r\n  addButtonText: {\r\n    color: \"white\",\r\n    fontSize: 16,\r\n    fontWeight: \"bold\",\r\n  },\r\n});\r\n\r\nexport default PlayersScreen;\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  TextInput,\r\n  TouchableOpacity,\r\n} from \"react-native\";\r\nimport { CrossPlatformAlert as Alert } from \"../utils\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { addPlayer } from \"../services/storageService\";\r\n\r\nconst AddPlayerScreen = () => {\r\n  const navigation = useNavigation<any>();\r\n  const [name, setName] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const handleSave = async () => {\r\n    if (!name.trim()) {\r\n      Alert.alert(\"Li\", \"Vui lng nhp tn ngi chi\");\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      await addPlayer(name.trim());\r\n      navigation.goBack();\r\n    } catch (error) {\r\n      Alert.alert(\"Li\", \"Khng th thm ngi chi\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.formContainer}>\r\n        <Text style={styles.label}>Tn ngi chi</Text>\r\n        <TextInput\r\n          style={styles.input}\r\n          placeholder=\"Nhp tn ngi chi\"\r\n          value={name}\r\n          onChangeText={setName}\r\n          autoCapitalize=\"words\"\r\n          autoFocus\r\n        />\r\n\r\n        <TouchableOpacity\r\n          style={styles.saveButton}\r\n          onPress={handleSave}\r\n          disabled={isLoading}\r\n        >\r\n          <Text style={styles.saveButtonText}>\r\n            {isLoading ? \"ang lu...\" : \"Lu ngi chi\"}\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: \"#f5f5f5\",\r\n    padding: 16,\r\n  },\r\n  formContainer: {\r\n    backgroundColor: \"white\",\r\n    borderRadius: 10,\r\n    padding: 16,\r\n    elevation: 2,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: { width: 0, height: 1 },\r\n    shadowOpacity: 0.22,\r\n    shadowRadius: 2.22,\r\n  },\r\n  label: {\r\n    fontSize: 16,\r\n    color: \"#555\",\r\n    marginBottom: 8,\r\n  },\r\n  input: {\r\n    borderWidth: 1,\r\n    borderColor: \"#ddd\",\r\n    borderRadius: 8,\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 10,\r\n    fontSize: 16,\r\n    marginBottom: 20,\r\n  },\r\n  saveButton: {\r\n    backgroundColor: \"#4caf50\",\r\n    paddingVertical: 14,\r\n    borderRadius: 8,\r\n    alignItems: \"center\",\r\n  },\r\n  saveButtonText: {\r\n    color: \"white\",\r\n    fontWeight: \"bold\",\r\n    fontSize: 16,\r\n  },\r\n});\r\n\r\nexport default AddPlayerScreen;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  ScrollView,\r\n  TouchableOpacity,\r\n  Alert,\r\n  ActivityIndicator,\r\n} from \"react-native\";\r\nimport { getSessions } from \"../services/storageService\";\r\nimport { Session, ExpenseType } from \"../models/types\";\r\nimport { formatCurrency } from \"../utils/expenseUtils\";\r\nimport { format } from \"date-fns\";\r\nimport { vi } from \"date-fns/locale\";\r\n\r\nconst StatsScreen = () => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [sessions, setSessions] = useState<Session[]>([]);\r\n  const [statsView, setStatsView] = useState<\"byMonth\" | \"byType\" | \"byPlayer\">(\r\n    \"byMonth\"\r\n  );\r\n\r\n  useEffect(() => {\r\n    loadSessions();\r\n  }, []);\r\n\r\n  const loadSessions = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const loadedSessions = await getSessions();\r\n      // Sp xp theo ngy mi nht n c nht\r\n      const sortedSessions = loadedSessions.sort(\r\n        (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()\r\n      );\r\n      setSessions(sortedSessions);\r\n    } catch (error) {\r\n      console.error(\"Li khi ti d liu phin:\", error);\r\n      Alert.alert(\"Li\", \"Khng th ti d liu thng k\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Hm ly tn thng t date\r\n  const getMonthYearKey = (dateStr: string) => {\r\n    const date = new Date(dateStr);\r\n    return `${date.getMonth() + 1}/${date.getFullYear()}`;\r\n  };\r\n\r\n  // Hm ly tn hin th cho thng\r\n  const getMonthYearDisplay = (monthYearKey: string) => {\r\n    const [month, year] = monthYearKey.split(\"/\");\r\n    return `Thng ${month}/${year}`;\r\n  };\r\n\r\n  // Tnh ton thng k theo thng\r\n  const getStatsByMonth = () => {\r\n    const monthStats: { [key: string]: { total: number; sessions: number } } =\r\n      {};\r\n\r\n    sessions.forEach((session) => {\r\n      const monthYearKey = getMonthYearKey(session.date);\r\n\r\n      if (!monthStats[monthYearKey]) {\r\n        monthStats[monthYearKey] = { total: 0, sessions: 0 };\r\n      }\r\n\r\n      session.expenses.forEach((expense) => {\r\n        monthStats[monthYearKey].total += expense.amount;\r\n      });\r\n\r\n      monthStats[monthYearKey].sessions += 1;\r\n    });\r\n\r\n    return Object.keys(monthStats)\r\n      .sort((a, b) => {\r\n        const [monthA, yearA] = a.split(\"/\").map(Number);\r\n        const [monthB, yearB] = b.split(\"/\").map(Number);\r\n\r\n        if (yearA !== yearB) {\r\n          return yearB - yearA;\r\n        }\r\n        return monthB - monthA;\r\n      })\r\n      .map((key) => ({\r\n        label: getMonthYearDisplay(key),\r\n        total: monthStats[key].total,\r\n        sessions: monthStats[key].sessions,\r\n      }));\r\n  };\r\n\r\n  // Tnh ton thng k theo loi chi ph\r\n  const getStatsByType = () => {\r\n    const typeStats: { [key in ExpenseType]: number } = {\r\n      [ExpenseType.COURT_FEE]: 0,\r\n      [ExpenseType.SHUTTLE]: 0,\r\n      [ExpenseType.DRINK]: 0,\r\n      [ExpenseType.EQUIPMENT]: 0,\r\n      [ExpenseType.OTHER]: 0,\r\n    };\r\n\r\n    sessions.forEach((session) => {\r\n      session.expenses.forEach((expense) => {\r\n        typeStats[expense.type] += expense.amount;\r\n      });\r\n    });\r\n\r\n    return Object.entries(typeStats)\r\n      .map(([type, amount]) => ({\r\n        type: type as ExpenseType,\r\n        amount,\r\n      }))\r\n      .sort((a, b) => b.amount - a.amount);\r\n  };\r\n\r\n  // Tnh ton thng k theo ngi chi\r\n  const getStatsByPlayer = () => {\r\n    const playerStats: {\r\n      [playerId: string]: { name: string; sessions: number; totalPaid: number };\r\n    } = {};\r\n\r\n    sessions.forEach((session) => {\r\n      // Tng chi ph cho bui ny\r\n      let sessionTotal = 0;\r\n      session.expenses.forEach((expense) => {\r\n        sessionTotal += expense.amount;\r\n      });\r\n\r\n      // Tnh s ngi tham gia\r\n      const playerCount = session.players.length;\r\n      if (playerCount === 0) return;\r\n\r\n      // Chia u chi ph\r\n      const perPlayerCost = sessionTotal / playerCount;\r\n\r\n      // Cp nht thng k cho tng ngi chi\r\n      session.players.forEach((player) => {\r\n        if (!playerStats[player.id]) {\r\n          playerStats[player.id] = {\r\n            name: player.name,\r\n            sessions: 0,\r\n            totalPaid: 0,\r\n          };\r\n        }\r\n\r\n        playerStats[player.id].sessions += 1;\r\n        playerStats[player.id].totalPaid += perPlayerCost;\r\n      });\r\n    });\r\n\r\n    return Object.values(playerStats).sort((a, b) => b.totalPaid - a.totalPaid);\r\n  };\r\n\r\n  // Ly tn hin th cho loi chi ph\r\n  const getExpenseTypeLabel = (type: ExpenseType): string => {\r\n    switch (type) {\r\n      case ExpenseType.COURT_FEE:\r\n        return \"Tin sn\";\r\n      case ExpenseType.SHUTTLE:\r\n        return \"Tin cu\";\r\n      case ExpenseType.DRINK:\r\n        return \"Tin nc\";\r\n      case ExpenseType.EQUIPMENT:\r\n        return \"Tin ph kin\";\r\n      case ExpenseType.OTHER:\r\n        return \"Chi ph khc\";\r\n      default:\r\n        return \"Chi ph\";\r\n    }\r\n  };\r\n\r\n  const renderByMonth = () => {\r\n    const monthlyStats = getStatsByMonth();\r\n\r\n    if (monthlyStats.length === 0) {\r\n      return (\r\n        <View style={styles.emptyState}>\r\n          <Text style={styles.emptyText}>Khng c d liu</Text>\r\n        </View>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <View style={styles.statsContainer}>\r\n        {monthlyStats.map((item, index) => (\r\n          <View key={index} style={styles.statsCard}>\r\n            <Text style={styles.statsTitle}>{item.label}</Text>\r\n            <Text style={styles.statsSubtitle}>{item.sessions} bui chi</Text>\r\n            <Text style={styles.statsAmount}>\r\n              {formatCurrency(item.total)}\r\n            </Text>{\" \"}\r\n            <Text style={styles.statsAverage}>\r\n              <Text>Trung bnh: </Text>\r\n              <Text>{formatCurrency(item.total / item.sessions)} / bui</Text>\r\n            </Text>\r\n          </View>\r\n        ))}\r\n      </View>\r\n    );\r\n  };\r\n\r\n  const renderByType = () => {\r\n    const typeStats = getStatsByType();\r\n    const totalExpenses = typeStats.reduce((sum, item) => sum + item.amount, 0);\r\n\r\n    if (totalExpenses === 0) {\r\n      return (\r\n        <View style={styles.emptyState}>\r\n          <Text style={styles.emptyText}>Khng c d liu</Text>\r\n        </View>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <View style={styles.statsContainer}>\r\n        <View style={styles.statsSummary}>\r\n          <Text style={styles.statsTotalLabel}>Tng chi ph:</Text>\r\n          <Text style={styles.statsTotal}>{formatCurrency(totalExpenses)}</Text>\r\n        </View>\r\n\r\n        {typeStats.map((item, index) => (\r\n          <View key={index} style={styles.statsRow}>\r\n            <View style={styles.statsTypeInfo}>\r\n              <Text style={styles.statsTypeLabel}>\r\n                {getExpenseTypeLabel(item.type)}\r\n              </Text>\r\n              <Text style={styles.statsTypePercentage}>\r\n                {Math.round((item.amount / totalExpenses) * 100)}%\r\n              </Text>\r\n            </View>\r\n            <Text style={styles.statsTypeAmount}>\r\n              {formatCurrency(item.amount)}\r\n            </Text>\r\n          </View>\r\n        ))}\r\n      </View>\r\n    );\r\n  };\r\n\r\n  const renderByPlayer = () => {\r\n    const playerStats = getStatsByPlayer();\r\n\r\n    if (playerStats.length === 0) {\r\n      return (\r\n        <View style={styles.emptyState}>\r\n          <Text style={styles.emptyText}>Khng c d liu</Text>\r\n        </View>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <View style={styles.statsContainer}>\r\n        {playerStats.map((item, index) => (\r\n          <View key={index} style={styles.statsCard}>\r\n            <Text style={styles.statsTitle}>{item.name}</Text>\r\n            <Text style={styles.statsSubtitle}>\r\n              {item.sessions} ln tham gia\r\n            </Text>\r\n            <Text style={styles.statsAmount}>\r\n              {formatCurrency(item.totalPaid)}\r\n            </Text>{\" \"}\r\n            <Text style={styles.statsAverage}>\r\n              <Text>Trung bnh: </Text>\r\n              <Text>\r\n                {formatCurrency(item.totalPaid / item.sessions)} / ln\r\n              </Text>\r\n            </Text>\r\n          </View>\r\n        ))}\r\n      </View>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.tabContainer}>\r\n        <TouchableOpacity\r\n          style={[styles.tab, statsView === \"byMonth\" && styles.activeTab]}\r\n          onPress={() => setStatsView(\"byMonth\")}\r\n        >\r\n          <Text\r\n            style={[\r\n              styles.tabText,\r\n              statsView === \"byMonth\" && styles.activeTabText,\r\n            ]}\r\n          >\r\n            Theo thng\r\n          </Text>\r\n        </TouchableOpacity>\r\n\r\n        <TouchableOpacity\r\n          style={[styles.tab, statsView === \"byType\" && styles.activeTab]}\r\n          onPress={() => setStatsView(\"byType\")}\r\n        >\r\n          <Text\r\n            style={[\r\n              styles.tabText,\r\n              statsView === \"byType\" && styles.activeTabText,\r\n            ]}\r\n          >\r\n            Theo loi\r\n          </Text>\r\n        </TouchableOpacity>\r\n\r\n        <TouchableOpacity\r\n          style={[styles.tab, statsView === \"byPlayer\" && styles.activeTab]}\r\n          onPress={() => setStatsView(\"byPlayer\")}\r\n        >\r\n          <Text\r\n            style={[\r\n              styles.tabText,\r\n              statsView === \"byPlayer\" && styles.activeTabText,\r\n            ]}\r\n          >\r\n            Theo ngi chi\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n\r\n      <ScrollView style={styles.content}>\r\n        {isLoading ? (\r\n          <View style={styles.loadingContainer}>\r\n            <ActivityIndicator size=\"large\" color=\"#4caf50\" />\r\n            <Text style={styles.loadingText}>ang ti...</Text>\r\n          </View>\r\n        ) : (\r\n          <>\r\n            {statsView === \"byMonth\" && renderByMonth()}\r\n            {statsView === \"byType\" && renderByType()}\r\n            {statsView === \"byPlayer\" && renderByPlayer()}\r\n          </>\r\n        )}\r\n      </ScrollView>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: \"#fff\",\r\n  },\r\n  loadingContainer: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    padding: 20,\r\n  },\r\n  loadingText: {\r\n    marginTop: 12,\r\n    fontSize: 16,\r\n    color: \"#555\",\r\n  },\r\n  tabContainer: {\r\n    flexDirection: \"row\",\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: \"#e0e0e0\",\r\n    backgroundColor: \"#fff\",\r\n  },\r\n  tab: {\r\n    flex: 1,\r\n    paddingVertical: 12,\r\n    alignItems: \"center\",\r\n  },\r\n  activeTab: {\r\n    borderBottomWidth: 2,\r\n    borderBottomColor: \"#4caf50\",\r\n  },\r\n  tabText: {\r\n    fontSize: 14,\r\n    color: \"#666\",\r\n  },\r\n  activeTabText: {\r\n    color: \"#4caf50\",\r\n    fontWeight: \"bold\",\r\n  },\r\n  content: {\r\n    flex: 1,\r\n    padding: 16,\r\n  },\r\n  emptyState: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    padding: 40,\r\n  },\r\n  emptyText: {\r\n    fontSize: 16,\r\n    color: \"#888\",\r\n  },\r\n  statsContainer: {\r\n    paddingBottom: 20,\r\n  },\r\n  statsCard: {\r\n    backgroundColor: \"#f9f9f9\",\r\n    borderRadius: 8,\r\n    padding: 16,\r\n    marginBottom: 12,\r\n  },\r\n  statsTitle: {\r\n    fontSize: 18,\r\n    fontWeight: \"bold\",\r\n    color: \"#333\",\r\n    marginBottom: 4,\r\n  },\r\n  statsSubtitle: {\r\n    fontSize: 14,\r\n    color: \"#666\",\r\n    marginBottom: 12,\r\n  },\r\n  statsAmount: {\r\n    fontSize: 20,\r\n    fontWeight: \"bold\",\r\n    color: \"#2e7d32\",\r\n    marginBottom: 4,\r\n  },\r\n  statsAverage: {\r\n    fontSize: 14,\r\n    color: \"#666\",\r\n  },\r\n  statsSummary: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    marginBottom: 16,\r\n  },\r\n  statsTotalLabel: {\r\n    fontSize: 16,\r\n    color: \"#333\",\r\n  },\r\n  statsTotal: {\r\n    fontSize: 18,\r\n    fontWeight: \"bold\",\r\n    color: \"#2e7d32\",\r\n  },\r\n  statsRow: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    paddingVertical: 12,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: \"#f0f0f0\",\r\n  },\r\n  statsTypeInfo: {\r\n    flex: 1,\r\n  },\r\n  statsTypeLabel: {\r\n    fontSize: 16,\r\n    color: \"#333\",\r\n  },\r\n  statsTypePercentage: {\r\n    fontSize: 14,\r\n    color: \"#888\",\r\n    marginTop: 2,\r\n  },\r\n  statsTypeAmount: {\r\n    fontSize: 16,\r\n    fontWeight: \"500\",\r\n    color: \"#2e7d32\",\r\n  },\r\n});\r\n\r\nexport default StatsScreen;\r\n","import { NavigationContainer } from \"@react-navigation/native\";\r\nimport { createNativeStackNavigator } from \"@react-navigation/native-stack\";\r\nimport { createBottomTabNavigator } from \"@react-navigation/bottom-tabs\";\r\nimport { View, Platform } from \"react-native\";\r\nimport Icon from \"../components/Icon\";\r\n\r\nimport HomeScreen from \"../screens/HomeScreen\";\r\nimport SessionDetailScreen from \"../screens/SessionDetailScreen\";\r\nimport NewSessionScreen from \"../screens/NewSessionScreen\";\r\nimport EditSessionScreen from \"../screens/EditSessionScreen\";\r\nimport PlayersScreen from \"../screens/PlayersScreen\";\r\nimport AddPlayerScreen from \"../screens/AddPlayerScreen\";\r\nimport StatsScreen from \"../screens/StatsScreen\";\r\n\r\n// Define types for navigation\r\nexport type RootStackParamList = {\r\n  MainTabs: undefined;\r\n  SessionDetail: { sessionId: string };\r\n  NewSession: undefined;\r\n  EditSession: { sessionId: string };\r\n  AddPlayer: undefined;\r\n};\r\n\r\nexport type MainTabsParamList = {\r\n  Home: undefined;\r\n  Players: undefined;\r\n  Stats: undefined;\r\n};\r\n\r\nconst Stack = createNativeStackNavigator<RootStackParamList>();\r\nconst Tab = createBottomTabNavigator<MainTabsParamList>();\r\n\r\n// Main Tab Navigator\r\nconst MainTabNavigator = () => {\r\n  return (\r\n    <Tab.Navigator\r\n      id={undefined}\r\n      screenOptions={({ route }) => ({\r\n        headerShown: true,\r\n        tabBarActiveTintColor: \"#4caf50\",\r\n        tabBarInactiveTintColor: \"gray\",\r\n        tabBarStyle: {\r\n          paddingBottom: 5,\r\n          height: 60,\r\n        },        tabBarIcon: ({ focused, color, size }) => {\r\n          let iconName: string;\r\n\r\n          if (route.name === \"Home\") {\r\n            iconName = focused ? \"home\" : \"home-outline\";\r\n          } else if (route.name === \"Players\") {\r\n            iconName = focused ? \"people\" : \"people-outline\";\r\n          } else if (route.name === \"Stats\") {\r\n            iconName = focused ? \"stats-chart\" : \"stats-chart-outline\";\r\n          } else {\r\n            iconName = \"help-outline\";\r\n          }\r\n          \r\n          // Important: Xc nh kch thc r rng v tng kch thc biu tng\r\n          const iconSize = Platform.OS === 'web' ? size * 1.2 : size;\r\n          \r\n          return (\r\n            <View style={{ \r\n              width: size, \r\n              height: size, \r\n              alignItems: 'center', \r\n              justifyContent: 'center' \r\n            }}>\r\n              <Icon\r\n                name={iconName}\r\n                size={iconSize}\r\n                color={color}\r\n              />\r\n            </View>\r\n          );\r\n        },\r\n      })}\r\n    >\r\n      <Tab.Screen\r\n        name=\"Home\"\r\n        component={HomeScreen}\r\n        options={{ title: \"Trang ch\" }}\r\n      />\r\n      <Tab.Screen\r\n        name=\"Players\"\r\n        component={PlayersScreen}\r\n        options={{ title: \"Ngi chi\" }}\r\n      />\r\n      <Tab.Screen\r\n        name=\"Stats\"\r\n        component={StatsScreen}\r\n        options={{ title: \"Thng k\" }}\r\n      />\r\n    </Tab.Navigator>\r\n  );\r\n};\r\n\r\n// Main App Navigation\r\nconst AppNavigator = () => {\r\n  return (\r\n    <NavigationContainer>\r\n      <Stack.Navigator\r\n        id={undefined}\r\n        initialRouteName=\"MainTabs\"\r\n        screenOptions={{\r\n          headerStyle: {\r\n            backgroundColor: \"#4caf50\",\r\n          },\r\n          headerTintColor: \"#fff\",\r\n          headerTitleStyle: {\r\n            fontWeight: \"bold\",\r\n          },\r\n        }}\r\n      >\r\n        <Stack.Screen\r\n          name=\"MainTabs\"\r\n          component={MainTabNavigator}\r\n          options={{ headerShown: false }}\r\n        />\r\n        <Stack.Screen\r\n          name=\"SessionDetail\"\r\n          component={SessionDetailScreen}\r\n          options={{ title: \"Chi tit bui nh cu\" }}\r\n        />\r\n        <Stack.Screen\r\n          name=\"NewSession\"\r\n          component={NewSessionScreen}\r\n          options={{ title: \"Thm bui nh cu mi\" }}\r\n        />\r\n        <Stack.Screen\r\n          name=\"EditSession\"\r\n          component={EditSessionScreen}\r\n          options={{ title: \"Chnh sa bui nh cu\" }}\r\n        />\r\n        <Stack.Screen\r\n          name=\"AddPlayer\"\r\n          component={AddPlayerScreen}\r\n          options={{ title: \"Thm ngi chi mi\" }}\r\n        />\r\n      </Stack.Navigator>\r\n    </NavigationContainer>\r\n  );\r\n};\r\n\r\nexport default AppNavigator;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { StatusBar } from \"expo-status-bar\";\r\nimport { SafeAreaProvider } from \"react-native-safe-area-context\";\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  Image,\r\n  ActivityIndicator,\r\n  Platform,\r\n} from \"react-native\";\r\nimport AppNavigator from \"./src/navigation/AppNavigator\";\r\n\r\n// Font Awesome setup\r\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\r\nimport { fas } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { far } from \"@fortawesome/free-regular-svg-icons\";\r\nimport { fab } from \"@fortawesome/free-brands-svg-icons\";\r\nimport { dom } from \"@fortawesome/fontawesome-svg-core\";\r\n\r\n// Add all icons to the library so we can use them\r\nlibrary.add(fas, far, fab);\r\n\r\n// Configure Font Awesome for web rendering\r\nif (Platform.OS === \"web\") {\r\n  // Trnh li vi DOM v cu hnh ng cch cho web\r\n  dom.watch();\r\n  \r\n  // Thm CSS  m bo icon c hin th ng\r\n  const style = document.createElement('style');\r\n  style.type = 'text/css';\r\n  style.appendChild(document.createTextNode(`\r\n    .svg-inline--fa {\r\n      display: inline-block;\r\n      width: 1em;\r\n      height: 1em;\r\n      overflow: visible;\r\n      vertical-align: -0.125em;\r\n    }\r\n  `));\r\n  document.head.appendChild(style);\r\n}\r\n\r\nexport default function App() {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // Gi lp thi gian ti ng dng\r\n    setTimeout(() => {\r\n      setIsLoading(false);\r\n    }, 2000);\r\n  }, []);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <View style={styles.splashContainer}>\r\n        <Image\r\n          source={require(\"./assets/icon.png\")}\r\n          style={styles.splashImage}\r\n        />\r\n        <Text style={styles.splashTitle}>CauLongApp</Text>\r\n        <Text style={styles.splashSubtitle}>Qun l chi ph nh cu lng</Text>\r\n        <ActivityIndicator size=\"large\" color=\"#4caf50\" style={styles.loader} />\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <SafeAreaProvider>\r\n      <StatusBar style=\"auto\" />\r\n      <AppNavigator />\r\n    </SafeAreaProvider>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  splashContainer: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#ffffff\",\r\n  },\r\n  splashImage: {\r\n    width: 120,\r\n    height: 120,\r\n    resizeMode: \"contain\",\r\n    marginBottom: 20,\r\n  },\r\n  splashTitle: {\r\n    fontSize: 28,\r\n    fontWeight: \"bold\",\r\n    color: \"#4caf50\",\r\n    marginBottom: 8,\r\n  },\r\n  splashSubtitle: {\r\n    fontSize: 16,\r\n    color: \"#666\",\r\n    marginBottom: 40,\r\n  },\r\n  loader: {\r\n    marginTop: 20,\r\n  },\r\n});\r\n","import { registerRootComponent } from \"expo\";\nimport App from \"./App\";\n\n// ng k service worker cho PWA nu ang chy trong web\nif (typeof document !== \"undefined\") {\n  // Dynamic import cho web environment\n  import(\"./web/register-service-worker\").catch((err) =>\n    console.error(\"Error loading service worker:\", err)\n  );\n}\n\n// registerRootComponent calls AppRegistry.registerComponent('main', () => App);\n// It also ensures that whether you load the app in Expo Go or in a native build,\n// the environment is set up appropriately\nregisterRootComponent(App);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + \"6b0745a1\" + \".chunk.js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"web:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [76], () => (__webpack_require__(8699)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["isWeb","platformHelper","directIconMapping","fas","faHome","far","faUsers","faChartBar","faQuestionCircle","faList","faPlus","faPlusCircle","faShare","faShareAlt","faEdit","faTrash","faTrashAlt","faMinus","faMinusCircle","faCheck","faCheckCircle","faTimes","faTimesCircle","faArrowLeft","faArrowRight","faCalendar","faClock","faChevronDown","faChevronUp","faChevronRight","faChevronLeft","faBars","faEllipsisV","faEllipsisH","faSearch","faFilter","faBell","faShoppingCart","faCog","faUser","styles","StyleSheet","create","fallbackContainer","alignItems","justifyContent","WebIconFA","name","size","color","style","iconDefinition","webStyle","Object","assign","display","width","height","console","warn","_jsx","View","children","FontAwesomeIcon","icon","faQuestion","error","Text","fontSize","Icon","Ionicons","formatCurrency","amount","Intl","NumberFormat","currency","format","generateId","Math","random","toString","substring","Date","now","SESSIONS_KEY","PLAYERS_KEY","saveSessions","async","AsyncStorage","setItem","JSON","stringify","sessions","getSessions","getItem","parse","savePlayers","players","getPlayers","addPlayer","newPlayer","id","push","container","flex","backgroundColor","searchContainer","flexDirection","paddingHorizontal","paddingVertical","borderBottomWidth","borderBottomColor","searchBar","borderRadius","marginRight","searchIcon","searchInput","filterButton","borderWidth","borderColor","listContainer","padding","paddingBottom","modalOverlay","modalContainer","borderTopLeftRadius","borderTopRightRadius","maxHeight","modalHeader","modalTitle","fontWeight","modalContent","filterLabel","marginBottom","marginTop","timeRangeButtons","timeRangeButton","timeRangeButtonActive","timeRangeText","timeRangeTextActive","filterInput","sortOptions","flexWrap","sortOption","sortOptionActive","sortOptionText","sortOptionTextActive","filterActions","resetButton","resetButtonText","applyButton","applyButtonText","emptyText","textAlign","sessionItem","elevation","shadowColor","shadowOffset","shadowOpacity","shadowRadius","sessionHeader","sessionDate","sessionLocation","sessionInfo","sessionInfoLeft","playerCount","sessionDuration","expenseAmount","addButton","position","bottom","right","addButtonText","HomeScreen","navigation","useNavigation","setSessions","useState","filteredSessions","setFilteredSessions","isLoading","setIsLoading","searchText","setSearchText","isFilterModalVisible","setIsFilterModalVisible","filterOptions","setFilterOptions","timeRange","location","setSortOption","useEffect","loadSessions","addListener","applyFilters","sortedSessions","sort","a","b","date","getTime","result","lowerSearchText","toLowerCase","filter","session","includes","notes","today","startDate","subDays","isWithinInterval","start","end","duration","expenses","reduce","sum","expense","_jsxs","TextInput","placeholder","value","onChangeText","TouchableOpacity","onPress","FlatList","data","renderItem","item","totalExpense","navigate","sessionId","locale","vi","length","floor","keyExtractor","contentContainerStyle","ListEmptyComponent","Modal","visible","animationType","transparent","onRequestClose","ScrollView","label","map","option","text","WebAlertManager","alert","title","message","buttons","options","window","setTimeout","some","btn","confirmResult","confirm","cancelButton","find","confirmButton","alertContainer","document","createElement","body","appendChild","destroyAlert","contains","removeChild","centeredView","modalView","maxWidth","modalMessage","buttonsContainer","button","minWidth","margin","destructiveButton","buttonText","destructiveText","cancelText","share","navigator","url","action","textarea","select","execCommand","ExpenseType","marginVertical","header","paymentButton","paymentButtonText","totalText","remainingText","chartContainer","barRow","nameContainer","paidIcon","nameText","barContainer","bar","amountText","paidText","textDecorationLine","textDecorationStyle","paidBar","opacity","paidAmount","note","fontStyle","paymentRow","paymentInfo","paymentName","paymentAmount","paymentSummary","paddingTop","borderTopWidth","borderTopColor","summaryTitle","summaryRow","summaryTotal","summaryPaid","summaryRemaining","ExpenseDistribution","totalAmount","playerAmounts","onShowPaymentStatus","showPaymentModal","setShowPaymentModal","paymentStatus","setPaymentStatus","sortedPlayers","maxAmount","max","p","togglePaymentStatus","playerId","prev","totalPaid","every","player","remainingAmount","barWidthFlex","isPaid","numberOfLines","ellipsizeMode","Switch","onValueChange","trackColor","false","true","thumbColor","shareButton","shareText","marginLeft","ShareButton","calculatedExpenses","getExpenseTypeLabel","type","time","forEach","index","expenseType","description","divideAmong","playerNames","join","localeCompare","splitByPlayer","CrossPlatformShare","center","scrollContent","dateText","locationText","notesText","timeInfo","timeText","durationText","section","sectionTitle","expenseItem","expenseHeader","expenseTypeContainer","expenseDescription","customBadge","customBadgeText","textShadowColor","textShadowOffset","textShadowRadius","expensePlayers","expensePlayersLabel","expensePlayersList","expensePlayerName","totalExpenseLabel","totalExpenseAmount","playerItem","playerName","playerAmount","buttonContainer","marginHorizontal","editButton","deleteButton","modalButton","modalButtonText","SessionDetailScreen","route","useRoute","params","setSession","setCalculatedExpenses","loadSessionDetails","currentSession","s","calculated","playersToSplit","amountPerPlayer","calculateExpenses","Alert","goBack","COURT_FEE","SHUTTLE","DRINK","EQUIPMENT","OTHER","ActivityIndicator","endTime","expenseTypeColor","getExpenseTypeColor","hasCustomDivision","borderLeftColor","borderLeftWidth","handleDelete","updatedSessions","deleteSession","input","WebDateTimePicker","mode","onChange","inputType","formatValue","toISOString","split","String","getHours","padStart","getMinutes","handleChange","e","newValue","target","newDate","isNaN","setHours","hours","minutes","undefined","parseInt","setMinutes","nativeEvent","timestamp","datePicker","playersContainer","playerButton","selectedPlayer","selectedPlayerText","addPlayerContainer","addPlayerInput","addPlayerButton","addPlayerButtonText","expenseText","removeExpenseButton","removeExpenseButtonText","addExpenseContainer","expenseTypeSelector","expenseTypeLabel","expenseTypeOptions","expenseTypeOption","selectedExpenseType","expenseTypeText","selectedExpenseTypeText","expenseInput","playerSelectionContainer","playerSelectionLabel","playerSelectionList","playerSelectItem","playerSelectItemSelected","playerSelectName","playerSelectNameSelected","addExpenseButton","addExpenseButtonText","checkboxContainer","checkbox","checkboxSelected","checkmark","radioContainer","radioOuter","radioOuterSelected","radioInner","courtFeeButton","submitButton","submitButtonText","NewSessionScreen","setDate","setEndTime","setLocation","setNotes","courtFeePerHour","setCourtFeePerHour","showDatePicker","setShowDatePicker","showEndTimePicker","setShowEndTimePicker","allPlayers","setAllPlayers","selectedPlayers","setSelectedPlayers","newPlayerName","setNewPlayerName","setExpenses","currentExpense","setCurrentExpense","loadPlayers","calculateDuration","setFullYear","getFullYear","getMonth","getDate","round","shouldShowPlayerSelection","onChangeDate","event","selectedDate","handleEndTimeChange","multiline","keyboardType","togglePlayerSelection","trim","removeExpense","values","handleExpenseTypeChange","replace","togglePlayerInExpense","handleAddExpense","parseFloat","newExpense","addCourtFeeFromRate","fee","calculateCourtFee","hourlyRate","desc","selectedPlayerObjects","hourlyFee","newSession","addSession","loadingContainer","loadingText","dateInput","timeInputContainer","timeInputLabel","timeInput","multilineInput","minHeight","textAlignVertical","playerList","playerItemSelected","playerNameSelected","newPlayerContainer","newPlayerInput","expenseList","removeButton","alignSelf","removeButtonText","newExpenseContainer","selectContainer","selectLabel","selectOptions","selectOption","selectOptionSelected","selectOptionText","selectOptionTextSelected","feeContainer","feeLabel","feeInput","EditSessionScreen","originalSession","setOriginalSession","loadSession","findIndex","updatedSession","Error","updateSession","deleteButtonText","left","PlayersScreen","setPlayers","handleDeletePlayer","updatedPlayers","deletePlayer","formContainer","saveButton","saveButtonText","AddPlayerScreen","setName","autoCapitalize","autoFocus","disabled","tabContainer","tab","activeTab","tabText","activeTabText","content","emptyState","statsContainer","statsCard","statsTitle","statsSubtitle","statsAmount","statsAverage","statsSummary","statsTotalLabel","statsTotal","statsRow","statsTypeInfo","statsTypeLabel","statsTypePercentage","statsTypeAmount","StatsScreen","statsView","setStatsView","getMonthYearDisplay","monthYearKey","month","year","getStatsByMonth","monthStats","dateStr","getMonthYearKey","total","keys","monthA","yearA","Number","monthB","yearB","key","_Fragment","renderByMonth","monthlyStats","renderByType","typeStats","getStatsByType","entries","totalExpenses","renderByPlayer","playerStats","getStatsByPlayer","sessionTotal","perPlayerCost","Stack","createNativeStackNavigator","Tab","createBottomTabNavigator","MainTabNavigator","Navigator","screenOptions","headerShown","tabBarActiveTintColor","tabBarInactiveTintColor","tabBarStyle","tabBarIcon","focused","iconName","iconSize","Screen","component","AppNavigator","NavigationContainer","initialRouteName","headerStyle","headerTintColor","headerTitleStyle","library","add","fab","dom","watch","createTextNode","head","splashContainer","splashImage","resizeMode","splashTitle","splashSubtitle","loader","catch","err","registerRootComponent","Image","source","require","SafeAreaProvider","StatusBar","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","splice","r","n","getter","__esModule","d","leafPrototypes","getProto","getPrototypeOf","obj","t","this","then","ns","def","current","indexOf","getOwnPropertyNames","definition","o","defineProperty","enumerable","get","f","chunkId","Promise","all","promises","u","miniCssF","g","globalThis","Function","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","l","done","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","timeout","nc","setAttribute","src","onScriptComplete","onerror","onload","clearTimeout","doneFns","parentNode","bind","Symbol","toStringTag","installedChunks","installedChunkData","promise","resolve","reject","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}