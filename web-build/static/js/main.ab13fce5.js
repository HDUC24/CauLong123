(()=>{"use strict";var e={8699:(e,t,n)=>{var o=n(3806),a=n(6665),i=n(3049),r=n(8833),l=n(3929),s=n(6283),d=n(3668),c=n(484),u=n(530),h=n(1248),f=n(4420),m=n(6313),g=n(2442);const p=!0,y=p;var x=n(8519),b=n(2061),j=n(2352),T=n(397);const C={home:b.fas.faHome,"home-outline":j.far.faHome,people:b.fas.faUsers,"people-outline":j.far.faUsers,"stats-chart":b.fas.faChartBar,"stats-chart-outline":j.far.faChartBar,"help-outline":j.far.faQuestionCircle,list:b.fas.faList,"list-outline":j.far.faList,"home-sharp":b.fas.faHome,"people-sharp":b.fas.faUsers,"stats-chart-sharp":b.fas.faChartBar,add:b.fas.faPlus,"add-circle":b.fas.faPlusCircle,"add-circle-outline":j.far.faPlusCircle,share:b.fas.faShare,"share-social":b.fas.faShareAlt,"share-social-outline":j.far.faShareAlt,create:b.fas.faEdit,"create-outline":j.far.faEdit,trash:b.fas.faTrash,"trash-outline":j.far.faTrashAlt,remove:b.fas.faMinus,"remove-circle":b.fas.faMinusCircle,"remove-circle-outline":j.far.faMinusCircle,checkmark:b.fas.faCheck,"checkmark-circle":b.fas.faCheckCircle,"checkmark-circle-outline":j.far.faCheckCircle,close:b.fas.faTimes,"close-circle":b.fas.faTimesCircle,"close-circle-outline":j.far.faTimesCircle,"arrow-back":b.fas.faArrowLeft,"arrow-forward":b.fas.faArrowRight,calendar:b.fas.faCalendar,"calendar-outline":j.far.faCalendar,time:b.fas.faClock,"time-outline":j.far.faClock,"chevron-down":b.fas.faChevronDown,"chevron-up":b.fas.faChevronUp,"chevron-forward":b.fas.faChevronRight,"chevron-back":b.fas.faChevronLeft,menu:b.fas.faBars,"ellipsis-vertical":b.fas.faEllipsisV,"ellipsis-horizontal":b.fas.faEllipsisH,search:b.fas.faSearch,"search-outline":j.far.faSearch,filter:b.fas.faFilter,"filter-outline":j.far.faFilter,notifications:b.fas.faBell,"notifications-outline":j.far.faBell,cart:b.fas.faShoppingCart,"cart-outline":j.far.faShoppingCart,settings:b.fas.faCog,"settings-outline":j.far.faCog,person:b.fas.faUser,"person-outline":j.far.faUser},w=d.default.create({fallbackContainer:{alignItems:"center",justifyContent:"center"}}),S=({name:e,size:t=24,color:n,style:o})=>{const a=C[e],i=Object.assign({},o,{display:"flex",alignItems:"center",justifyContent:"center",width:t,height:t});try{return a||console.warn(`No icon mapping found for: ${e}, using question mark`),(0,T.jsx)(l.default,{style:i,children:(0,T.jsx)(x.FontAwesomeIcon,{icon:a||b.fas.faQuestion,size:t,color:n})})}catch(r){return console.error(`Error rendering icon ${e}:`,r),(0,T.jsx)(l.default,{style:[i,w.fallbackContainer],children:(0,T.jsx)(s.default,{style:{color:n||"#000",fontSize:t?.8*t:20},children:"?"})})}},v=({name:e,size:t=24,color:n,style:o})=>y?(0,T.jsx)(S,{name:e,size:t,color:n,style:o}):(0,T.jsx)(g.default,{name:e,size:t,color:n,style:o});var B=n(932),k=n(5648),I=n(6773),R=n(8264),z=n(2772),E=n(691),P=n(9439),O=n(9246),L=n(6869),D=n(5259);const A=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),W=()=>Math.random().toString(36).substring(2)+Date.now().toString(36),H="badminton_sessions",N="badminton_players",V=async e=>{try{await D.default.setItem(H,JSON.stringify(e))}catch(t){throw console.error("L\u1ed7i khi l\u01b0u sessions:",t),t}},M=async()=>{try{const e=await D.default.getItem(H);return e?JSON.parse(e):[]}catch(e){return console.error("L\u1ed7i khi \u0111\u1ecdc sessions:",e),[]}},F=async e=>{try{await D.default.setItem(N,JSON.stringify(e))}catch(t){throw console.error("L\u1ed7i khi l\u01b0u players:",t),t}},$=async()=>{try{const e=await D.default.getItem(N);return e?JSON.parse(e):[]}catch(e){return console.error("L\u1ed7i khi \u0111\u1ecdc players:",e),[]}},U=async e=>{try{const t=await $(),n={id:W(),name:e};return t.push(n),await F(t),n}catch(t){throw console.error("L\u1ed7i khi th\xeam ng\u01b0\u1eddi ch\u01a1i:",t),t}},K=d.default.create({container:{flex:1,backgroundColor:"#f5f5f5"},searchContainer:{flexDirection:"row",paddingHorizontal:16,paddingVertical:10,backgroundColor:"white",borderBottomWidth:1,borderBottomColor:"#eee"},searchBar:{flex:1,flexDirection:"row",alignItems:"center",backgroundColor:"#f0f0f0",borderRadius:20,paddingHorizontal:12,marginRight:8},searchIcon:{marginRight:8},searchInput:{flex:1,height:36,fontSize:14},filterButton:{width:36,height:36,justifyContent:"center",alignItems:"center",borderWidth:1,borderColor:"#4caf50",borderRadius:18},listContainer:{padding:16,paddingBottom:80},modalOverlay:{flex:1,backgroundColor:"rgba(0,0,0,0.5)",justifyContent:"flex-end"},modalContainer:{backgroundColor:"white",borderTopLeftRadius:16,borderTopRightRadius:16,maxHeight:"80%"},modalHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:16,paddingVertical:12,borderBottomWidth:1,borderBottomColor:"#eee"},modalTitle:{fontSize:18,fontWeight:"bold",color:"#333"},modalContent:{padding:16},filterLabel:{fontSize:16,fontWeight:"500",marginBottom:8,marginTop:12,color:"#333"},timeRangeButtons:{flexDirection:"row",marginBottom:16},timeRangeButton:{flex:1,paddingVertical:8,paddingHorizontal:12,borderRadius:20,borderWidth:1,borderColor:"#ddd",marginRight:8,alignItems:"center"},timeRangeButtonActive:{backgroundColor:"#4caf50",borderColor:"#4caf50"},timeRangeText:{color:"#555"},timeRangeTextActive:{color:"white",fontWeight:"500"},filterInput:{borderWidth:1,borderColor:"#ddd",borderRadius:8,padding:10,marginBottom:16},sortOptions:{flexDirection:"row",flexWrap:"wrap",marginBottom:16},sortOption:{flex:1,paddingVertical:8,paddingHorizontal:12,borderRadius:20,borderWidth:1,borderColor:"#ddd",marginRight:8,marginBottom:8,alignItems:"center"},sortOptionActive:{backgroundColor:"#4caf50",borderColor:"#4caf50"},sortOptionText:{color:"#555",fontSize:13},sortOptionTextActive:{color:"white",fontWeight:"500",fontSize:13},filterActions:{flexDirection:"row",justifyContent:"flex-end",marginTop:16},resetButton:{paddingVertical:10,paddingHorizontal:16,marginRight:12},resetButtonText:{color:"#666",fontSize:16},applyButton:{backgroundColor:"#4caf50",paddingVertical:10,paddingHorizontal:20,borderRadius:8},applyButtonText:{color:"white",fontWeight:"500",fontSize:16},emptyText:{textAlign:"center",marginTop:40,fontSize:16,color:"#666"},sessionItem:{backgroundColor:"white",borderRadius:10,padding:16,marginBottom:16,elevation:2,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.22,shadowRadius:2.22},sessionHeader:{flexDirection:"row",justifyContent:"space-between",marginBottom:8},sessionDate:{fontSize:16,fontWeight:"bold",color:"#333"},sessionLocation:{fontSize:14,color:"#666"},sessionInfo:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginTop:8},sessionInfoLeft:{flexDirection:"column"},playerCount:{fontSize:14,color:"#555"},sessionDuration:{fontSize:13,color:"#666",marginTop:2},expenseAmount:{fontSize:16,fontWeight:"bold",color:"#2e7d32"},addButton:{position:"absolute",bottom:20,right:20,width:56,height:56,borderRadius:28,backgroundColor:"#4caf50",justifyContent:"center",alignItems:"center",elevation:5,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:3.84},addButtonText:{fontSize:24,color:"white",fontWeight:"bold"}}),_=()=>{const e=(0,h.useNavigation)(),[t,n]=(0,a.useState)([]),[o,i]=(0,a.useState)([]),[r,d]=(0,a.useState)(!0),[c,u]=(0,a.useState)(""),[f,m]=(0,a.useState)(!1),[g,p]=(0,a.useState)({timeRange:"all",location:""}),[y,x]=(0,a.useState)("dateDesc");(0,a.useEffect)((()=>{b();return e.addListener("focus",(()=>{b()}))}),[e]),(0,a.useEffect)((()=>{j()}),[t,c,g,y]);const b=async()=>{d(!0);try{const e=[...await M()].sort(((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()));n(e),i(e)}catch(e){console.error("L\u1ed7i khi t\u1ea3i sessions:",e)}finally{d(!1)}},j=()=>{let e=[...t];if(c){const t=c.toLowerCase();e=e.filter((e=>e.location.toLowerCase().includes(t)||e.notes&&e.notes.toLowerCase().includes(t)))}if("all"!==g.timeRange){const t=new Date,n="week"===g.timeRange?(0,E.subDays)(t,7):(0,E.subDays)(t,30);e=e.filter((e=>{const o=new Date(e.date);return(0,P.isWithinInterval)(o,{start:n,end:t})}))}g.location&&(e=e.filter((e=>e.location.toLowerCase().includes(g.location.toLowerCase())))),e.sort(((e,t)=>{switch(y){case"dateDesc":return new Date(t.date).getTime()-new Date(e.date).getTime();case"dateAsc":return new Date(e.date).getTime()-new Date(t.date).getTime();case"durationDesc":return(t.duration||0)-(e.duration||0);case"durationAsc":return(e.duration||0)-(t.duration||0);case"costDesc":return t.expenses.reduce(((e,t)=>e+t.amount),0)-e.expenses.reduce(((e,t)=>e+t.amount),0);case"costAsc":return e.expenses.reduce(((e,t)=>e+t.amount),0)-t.expenses.reduce(((e,t)=>e+t.amount),0);default:return 0}})),i(e)};return(0,T.jsxs)(l.default,{style:K.container,children:[(0,T.jsxs)(l.default,{style:K.searchContainer,children:[(0,T.jsxs)(l.default,{style:K.searchBar,children:[" ",(0,T.jsx)(v,{name:"search",size:20,color:"#666",style:K.searchIcon}),(0,T.jsx)(I.default,{style:K.searchInput,placeholder:"T\xecm ki\u1ebfm theo \u0111\u1ecba \u0111i\u1ec3m...",value:c,onChangeText:u}),c?(0,T.jsx)(k.default,{onPress:()=>u(""),children:(0,T.jsx)(v,{name:"close-circle",size:18,color:"#666"})}):null]})," ",(0,T.jsx)(k.default,{style:K.filterButton,onPress:()=>m(!0),children:(0,T.jsx)(v,{name:"options",size:20,color:"#4caf50"})})]}),(0,T.jsx)(B.default,{data:o,renderItem:({item:t})=>{const n=t.expenses.reduce(((e,t)=>e+t.amount),0);return(0,T.jsxs)(k.default,{style:K.sessionItem,onPress:()=>e.navigate("SessionDetail",{sessionId:t.id}),children:[(0,T.jsxs)(l.default,{style:K.sessionHeader,children:[" ",(0,T.jsx)(s.default,{style:K.sessionDate,children:(0,T.jsx)(s.default,{children:(0,O.format)(new Date(t.date),"EEEE, dd/MM/yyyy",{locale:L.vi})})}),(0,T.jsx)(s.default,{style:K.sessionLocation,children:(0,T.jsx)(s.default,{children:t.location})})]}),(0,T.jsxs)(l.default,{style:K.sessionInfo,children:[(0,T.jsxs)(l.default,{style:K.sessionInfoLeft,children:[(0,T.jsxs)(s.default,{style:K.playerCount,children:[t.players.length," ",(0,T.jsx)(s.default,{children:"ng\u01b0\u1eddi tham gia"})]}),t.duration&&(0,T.jsx)(s.default,{style:K.sessionDuration,children:(0,T.jsx)(s.default,{children:Math.floor(t.duration/60)>0?`${Math.floor(t.duration/60)} gi\u1edd ${t.duration%60} ph\xfat`:`${t.duration} ph\xfat`})})]})," ",(0,T.jsx)(s.default,{style:K.expenseAmount,children:(0,T.jsx)(s.default,{children:A(n)})})]})]})},keyExtractor:e=>e.id,contentContainerStyle:K.listContainer,ListEmptyComponent:(0,T.jsx)(s.default,{style:K.emptyText,children:r?"\u0110ang t\u1ea3i...":0===o.length&&t.length>0?"Kh\xf4ng t\xecm th\u1ea5y k\u1ebft qu\u1ea3 n\xe0o.":"Ch\u01b0a c\xf3 bu\u1ed5i \u0111\xe1nh c\u1ea7u n\xe0o. Th\xeam bu\u1ed5i \u0111\xe1nh c\u1ea7u m\u1edbi!"})}),(0,T.jsx)(R.default,{visible:f,animationType:"slide",transparent:!0,onRequestClose:()=>m(!1),children:(0,T.jsx)(l.default,{style:K.modalOverlay,children:(0,T.jsxs)(l.default,{style:K.modalContainer,children:[(0,T.jsxs)(l.default,{style:K.modalHeader,children:[(0,T.jsxs)(s.default,{style:K.modalTitle,children:[" ",(0,T.jsx)(s.default,{children:"L\u1ecdc bu\u1ed5i \u0111\xe1nh c\u1ea7u"})]})," ",(0,T.jsx)(k.default,{onPress:()=>m(!1),children:(0,T.jsx)(v,{name:"close",size:24,color:"#333"})})]}),(0,T.jsxs)(z.default,{style:K.modalContent,children:[(0,T.jsxs)(s.default,{style:K.filterLabel,children:[" ",(0,T.jsx)(s.default,{children:"Kho\u1ea3ng th\u1eddi gian:"})]}),(0,T.jsx)(l.default,{style:K.timeRangeButtons,children:[{value:"all",label:"T\u1ea5t c\u1ea3"},{value:"week",label:"Tu\u1ea7n n\xe0y"},{value:"month",label:"Th\xe1ng n\xe0y"}].map((e=>(0,T.jsx)(k.default,{style:[K.timeRangeButton,g.timeRange===e.value&&K.timeRangeButtonActive],onPress:()=>p(Object.assign({},g,{timeRange:e.value})),children:(0,T.jsx)(s.default,{style:g.timeRange===e.value?K.timeRangeTextActive:K.timeRangeText,children:(0,T.jsx)(s.default,{children:e.label})})},e.value)))})," ",(0,T.jsx)(s.default,{style:K.filterLabel,children:(0,T.jsx)(s.default,{children:"\u0110\u1ecba \u0111i\u1ec3m:"})}),(0,T.jsx)(I.default,{style:K.filterInput,value:g.location,onChangeText:e=>p(Object.assign({},g,{location:e})),placeholder:"Nh\u1eadp t\xean \u0111\u1ecba \u0111i\u1ec3m"}),(0,T.jsx)(s.default,{style:K.filterLabel,children:(0,T.jsx)(s.default,{children:"S\u1eafp x\u1ebfp theo:"})}),(0,T.jsxs)(l.default,{style:K.sortOptions,children:[[{value:"dateDesc",label:"M\u1edbi nh\u1ea5t"},{value:"dateAsc",label:"C\u0169 nh\u1ea5t"},{value:"durationDesc",label:"Th\u1eddi l\u01b0\u1ee3ng"},{value:"costDesc",label:"Chi ph\xed"}].map((e=>(0,T.jsx)(k.default,{style:[K.sortOption,y===e.value&&K.sortOptionActive],onPress:()=>x(e.value),children:(0,T.jsx)(s.default,{style:y===e.value?K.sortOptionTextActive:K.sortOptionText,children:e.label})},e.value)))," "]}),(0,T.jsx)(s.default,{style:K.filterLabel,children:(0,T.jsx)(s.default,{children:"S\u1eafp x\u1ebfp theo:"})}),(0,T.jsx)(l.default,{style:K.sortOptions,children:[{value:"dateDesc",label:"Ng\xe0y (m\u1edbi nh\u1ea5t tr\u01b0\u1edbc)"},{value:"dateAsc",label:"Ng\xe0y (c\u0169 nh\u1ea5t tr\u01b0\u1edbc)"},{value:"durationDesc",label:"Th\u1eddi gian (gi\u1ea3m d\u1ea7n)"},{value:"durationAsc",label:"Th\u1eddi gian (t\u0103ng d\u1ea7n)"},{value:"costDesc",label:"Chi ph\xed (cao \u0111\u1ebfn th\u1ea5p)"},{value:"costAsc",label:"Chi ph\xed (th\u1ea5p \u0111\u1ebfn cao)"}].map((e=>(0,T.jsx)(k.default,{style:[K.sortOption,y===e.value&&K.sortOptionActive],onPress:()=>x(e.value),children:(0,T.jsx)(s.default,{style:y===e.value?K.sortOptionTextActive:K.sortOptionText,children:e.label})},e.value)))}),(0,T.jsxs)(l.default,{style:K.filterActions,children:[(0,T.jsx)(k.default,{style:K.resetButton,onPress:()=>{p({timeRange:"all",location:""}),u(""),x("dateDesc")},children:(0,T.jsx)(s.default,{style:K.resetButtonText,children:(0,T.jsx)(s.default,{children:"\u0110\u1eb7t l\u1ea1i"})})}),(0,T.jsx)(k.default,{style:K.applyButton,onPress:()=>m(!1),children:(0,T.jsx)(s.default,{style:K.applyButtonText,children:(0,T.jsx)(s.default,{children:"\xc1p d\u1ee5ng"})})})]})]})]})})}),(0,T.jsx)(k.default,{style:K.addButton,onPress:()=>e.navigate("NewSession"),children:(0,T.jsx)(s.default,{style:K.addButtonText,children:"+"})})]})},Q=(e,t,n,o)=>{try{if(!n||n.length<=1)return window.alert(`${e}\n${t||""}`),void(n&&n[0]&&n[0].onPress&&setTimeout((()=>n[0].onPress?.()),0));if(2===n.length){if(n.some((e=>"cancel"===e.style))){const o=window.confirm(`${e}\n${t||""}`),a=n.find((e=>"cancel"===e.style)),i=n.find((e=>"cancel"!==e.style));return void(o&&i?.onPress?setTimeout((()=>i.onPress?.()),0):!o&&a?.onPress&&setTimeout((()=>a.onPress?.()),0))}}const o=document.createElement("div");o.id="web-alert-container",document.body.appendChild(o);const a=()=>{o&&document.body.contains(o)&&document.body.removeChild(o)};if(!n||0===n.length)return window.alert(t?`${e}\n\n${t}`:e),void a();if(2===n.length&&"cancel"===n[0].style&&"destructive"===n[1].style)return window.confirm(t?`${e}\n\n${t}`:e)?n[1].onPress&&n[1].onPress():n[0].onPress&&n[0].onPress(),void a();window.alert(t?`${e}\n\n${t}`:e),n[0]&&n[0].onPress&&n[0].onPress(),a()}catch(a){console.error("Error showing web alert:",a),window.alert(`${e}\n${t||""}`)}},G=(d.default.create({centeredView:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},modalView:{backgroundColor:"white",borderRadius:10,padding:20,width:"80%",maxWidth:400,alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:4,elevation:5},modalTitle:{fontSize:18,fontWeight:"bold",marginBottom:10,textAlign:"center"},modalMessage:{fontSize:16,marginBottom:20,textAlign:"center"},buttonsContainer:{flexDirection:"row",justifyContent:"space-around",width:"100%"},button:{padding:10,borderRadius:5,minWidth:80,backgroundColor:"#2196F3",margin:5},destructiveButton:{backgroundColor:"#f44336"},cancelButton:{backgroundColor:"#9e9e9e"},buttonText:{color:"white",fontWeight:"bold",textAlign:"center"},destructiveText:{color:"white"},cancelText:{color:"white"}}),{alert:(e,t,n,o)=>{Q(e,t,n,o)}}),q={share:async e=>{try{if(navigator.share)return await navigator.share({title:e.title,text:e.message,url:e.url}),{action:"sharedAction"};{const t=document.createElement("textarea");return t.value=e.message||"",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),alert("N\u1ed9i dung \u0111\xe3 \u0111\u01b0\u1ee3c sao ch\xe9p v\xe0o clipboard!"),{action:"sharedAction"}}}catch(t){return console.error("Error sharing content:",t),{action:"dismissedAction"}}}};let X=function(e){return e.COURT_FEE="court_fee",e.SHUTTLE="shuttle",e.DRINK="drink",e.EQUIPMENT="equipment",e.OTHER="other",e}({});var Y=n(4037);const J=d.default.create({container:{backgroundColor:"#fff",borderRadius:12,padding:16,marginVertical:8,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:8},title:{fontSize:18,fontWeight:"bold",color:"#333"},paymentButton:{backgroundColor:"#4caf50",paddingVertical:6,paddingHorizontal:12,borderRadius:16},paymentButtonText:{color:"white",fontSize:12,fontWeight:"500"},totalText:{fontSize:16,color:"#555",marginBottom:16},remainingText:{color:"#e53935"},chartContainer:{marginVertical:12},barRow:{flexDirection:"row",alignItems:"center",marginBottom:12},nameContainer:{width:"28%",flexDirection:"row",alignItems:"center"},paidIcon:{marginRight:4},nameText:{fontSize:14,color:"#444",marginRight:8,flex:1},barContainer:{flex:1,flexDirection:"row",alignItems:"center"},bar:{height:20,backgroundColor:"#4caf50",borderRadius:4,marginRight:8},amountText:{fontSize:14,fontWeight:"500",color:"#333"},paidText:{color:"#4caf50",textDecorationLine:"line-through",textDecorationStyle:"solid"},paidBar:{backgroundColor:"#a5d6a7",opacity:.7},paidAmount:{color:"#4caf50"},note:{fontSize:12,color:"#888",marginTop:8,fontStyle:"italic"},modalOverlay:{flex:1,backgroundColor:"rgba(0,0,0,0.5)",justifyContent:"flex-end"},modalContainer:{backgroundColor:"white",borderTopLeftRadius:16,borderTopRightRadius:16,maxHeight:"80%"},modalHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:16,paddingVertical:12,borderBottomWidth:1,borderBottomColor:"#eee"},modalTitle:{fontSize:18,fontWeight:"bold",color:"#333"},modalContent:{padding:16},paymentRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingVertical:12,borderBottomWidth:1,borderBottomColor:"#eee"},paymentInfo:{flex:1},paymentName:{fontSize:16,fontWeight:"500",color:"#333"},paymentAmount:{fontSize:14,color:"#666",marginTop:2},paymentSummary:{marginTop:24,paddingTop:16,borderTopWidth:1,borderTopColor:"#eee"},summaryTitle:{fontSize:16,fontWeight:"bold",marginBottom:12,color:"#333"},summaryRow:{flexDirection:"row",justifyContent:"space-between",paddingVertical:8},summaryTotal:{fontWeight:"500",color:"#333"},summaryPaid:{color:"#4caf50",fontWeight:"500"},summaryRemaining:{color:"#e53935",fontWeight:"500"}}),Z=({totalAmount:e,playerAmounts:t,onShowPaymentStatus:n})=>{const[o,i]=(0,a.useState)(!1),[r,d]=(0,a.useState)({}),c=[...t].sort(((e,t)=>t.amount-e.amount)),u=Math.max(...t.map((e=>e.amount)),1),h=e=>{d((t=>Object.assign({},t,{[e]:!t[e]})))},f=(c.every((e=>r[e.id])),c.reduce(((e,t)=>e+(r[t.id]?t.amount:0)),0)),m=e-f;return(0,T.jsxs)(l.default,{style:J.container,children:[(0,T.jsxs)(l.default,{style:J.header,children:[(0,T.jsx)(s.default,{style:J.title,children:"Ph\xe2n b\u1ed5 chi ph\xed"}),(0,T.jsx)(k.default,{style:J.paymentButton,onPress:()=>i(!0),children:(0,T.jsx)(s.default,{style:J.paymentButtonText,children:"Theo d\xf5i thanh to\xe1n"})})]}),(0,T.jsxs)(s.default,{style:J.totalText,children:["T\u1ed5ng chi ph\xed: ",A(e),m>0&&f>0&&(0,T.jsxs)(s.default,{style:J.remainingText,children:[" ","(C\xf2n thi\u1ebfu: ",A(m),")"]})]}),(0,T.jsx)(l.default,{style:J.chartContainer,children:c.map((e=>{const t=Math.max(e.amount/u*100,5)/100,n=r[e.id]||!1;return(0,T.jsxs)(k.default,{style:J.barRow,onPress:()=>h(e.id),children:[(0,T.jsxs)(l.default,{style:J.nameContainer,children:[" ",n&&(0,T.jsx)(v,{name:"checkmark-circle",size:16,color:"#4caf50",style:J.paidIcon}),(0,T.jsx)(s.default,{style:[J.nameText,n&&J.paidText],numberOfLines:1,ellipsizeMode:"tail",children:e.name})]}),(0,T.jsxs)(l.default,{style:J.barContainer,children:[(0,T.jsx)(l.default,{style:[J.bar,{flex:t},n&&J.paidBar]}),(0,T.jsx)(s.default,{style:[J.amountText,n&&J.paidAmount],children:A(e.amount)})]})]},e.id)}))}),(0,T.jsx)(s.default,{style:J.note,children:"Nh\u1ea5n v\xe0o ng\u01b0\u1eddi ch\u01a1i \u0111\u1ec3 \u0111\xe1nh d\u1ea5u \u0111\xe3 thanh to\xe1n"}),(0,T.jsx)(R.default,{visible:o,animationType:"slide",transparent:!0,onRequestClose:()=>i(!1),children:(0,T.jsx)(l.default,{style:J.modalOverlay,children:(0,T.jsxs)(l.default,{style:J.modalContainer,children:[(0,T.jsxs)(l.default,{style:J.modalHeader,children:[(0,T.jsx)(s.default,{style:J.modalTitle,children:"Theo d\xf5i thanh to\xe1n"})," ",(0,T.jsx)(k.default,{onPress:()=>i(!1),children:(0,T.jsx)(v,{name:"close",size:24,color:"#333"})})]}),(0,T.jsxs)(z.default,{style:J.modalContent,children:[c.map((e=>(0,T.jsxs)(l.default,{style:J.paymentRow,children:[(0,T.jsxs)(l.default,{style:J.paymentInfo,children:[(0,T.jsx)(s.default,{style:J.paymentName,children:e.name}),(0,T.jsx)(s.default,{style:J.paymentAmount,children:A(e.amount)})]}),(0,T.jsx)(Y.default,{value:r[e.id]||!1,onValueChange:()=>h(e.id),trackColor:{false:"#e0e0e0",true:"#b9dfbb"},thumbColor:r[e.id]?"#4caf50":"#f4f3f4"})]},e.id))),(0,T.jsxs)(l.default,{style:J.paymentSummary,children:[(0,T.jsx)(s.default,{style:J.summaryTitle,children:"T\u1ed5ng quan"}),(0,T.jsxs)(l.default,{style:J.summaryRow,children:[(0,T.jsx)(s.default,{children:"T\u1ed5ng chi ph\xed:"}),(0,T.jsx)(s.default,{style:J.summaryTotal,children:A(e)})]}),(0,T.jsxs)(l.default,{style:J.summaryRow,children:[(0,T.jsx)(s.default,{children:"\u0110\xe3 thu:"}),(0,T.jsx)(s.default,{style:J.summaryPaid,children:A(f)})]}),(0,T.jsxs)(l.default,{style:J.summaryRow,children:[(0,T.jsx)(s.default,{children:"C\xf2n l\u1ea1i:"}),(0,T.jsx)(s.default,{style:J.summaryRemaining,children:A(m)})]})]})]})]})})})]})},ee=d.default.create({shareButton:{backgroundColor:"#2196f3",flexDirection:"row",alignItems:"center",justifyContent:"center",paddingVertical:12,paddingHorizontal:16,borderRadius:8,marginVertical:8},shareText:{color:"white",fontWeight:"bold",fontSize:16,marginLeft:8}}),te=({session:e,calculatedExpenses:t})=>{const n=e=>{switch(e){case"court_fee":return"Ti\u1ec1n s\xe2n";case"shuttle":return"Ti\u1ec1n c\u1ea7u";case"drink":return"Ti\u1ec1n n\u01b0\u1edbc";case"equipment":return"Ti\u1ec1n ph\u1ee5 ki\u1ec7n";case"other":return"Chi ph\xed kh\xe1c";default:return"Chi ph\xed"}};return(0,T.jsxs)(k.default,{style:ee.shareButton,onPress:async()=>{try{const o=(0,O.format)(new Date(e.date),"dd/MM/yyyy"),a=(0,O.format)(new Date(e.date),"HH:mm");let i="\ud83d\udccb B\xc1O C\xc1O CHI PH\xcd C\u1ea6U L\xd4NG\n\n";i+=`\ud83d\uddd3\ufe0f Ng\xe0y: ${o}\n`,i+=`\ud83d\udd52 Gi\u1edd: ${a}\n`,i+=`\ud83d\udccd \u0110\u1ecba \u0111i\u1ec3m: ${e.location}\n`,i+=`\ud83d\udc65 S\u1ed1 ng\u01b0\u1eddi tham gia: ${e.players.length} ng\u01b0\u1eddi\n`,e.notes&&(i+=`\ud83d\udcdd Ghi ch\xfa: ${e.notes}\n`),i+="\n----------------------\n\n",i+="\ud83e\uddfe CHI TI\u1ebeT C\xc1C KHO\u1ea2N CHI:\n\n",e.expenses.forEach(((t,o)=>{const a=n(t.type);if(i+=`${o+1}. ${a}: ${A(t.amount)}`,t.description&&(i+=` (${t.description})`),t.divideAmong&&t.divideAmong.length>0&&t.divideAmong.length<e.players.length){const n=t.divideAmong.map((t=>e.players.find((e=>e.id===t))?.name||"")).filter((e=>e)).join(", ");i+=`\n   \u2192 Chia cho: ${n}`}i+="\n\n"})),i+="----------------------\n\n",i+=`\ud83d\udcb0 T\u1ed4NG CHI PH\xcd: ${A(t.totalAmount)}\n\n`,i+="\ud83d\udcb8 CHI PH\xcd M\u1ed6I NG\u01af\u1edcI:\n\n";[...e.players].sort(((e,t)=>e.name.localeCompare(t.name))).forEach((e=>{const n=t.splitByPlayer[e.id]||0;i+=`\u2022 ${e.name}: ${A(n)}\n`})),await q.share({message:i,title:`Chi ph\xed \u0111\xe1nh c\u1ea7u l\xf4ng ng\xe0y ${o}`})}catch(o){console.error("L\u1ed7i khi chia s\u1ebb:",o)}},children:[(0,T.jsx)(v,{name:"share-social-outline",size:20,color:"white"}),(0,T.jsx)(s.default,{style:ee.shareText,children:"Chia s\u1ebb chi ph\xed"})]})},ne=d.default.create({container:{flex:1,backgroundColor:"#f5f5f5"},center:{justifyContent:"center",alignItems:"center"},scrollContent:{padding:16},header:{backgroundColor:"white",borderRadius:10,padding:16,marginBottom:16,elevation:2,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.22,shadowRadius:2.22},dateText:{fontSize:18,fontWeight:"bold",color:"#333",marginBottom:4},locationText:{fontSize:16,color:"#555",marginBottom:8},notesText:{fontSize:14,color:"#777",fontStyle:"italic"},timeInfo:{marginVertical:8},timeText:{fontSize:15,color:"#555",marginBottom:4},durationText:{fontSize:15,color:"#555",marginBottom:4},section:{backgroundColor:"white",borderRadius:10,padding:16,marginBottom:16,elevation:2,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.22,shadowRadius:2.22},sectionTitle:{fontSize:16,fontWeight:"bold",color:"#333",marginBottom:12,borderBottomWidth:1,borderBottomColor:"#eee",paddingBottom:8},expenseItem:{marginBottom:15,paddingBottom:12,borderBottomWidth:1,borderBottomColor:"#eeeeee",backgroundColor:"#ffffff",borderRadius:10,padding:12,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:3,elevation:2},expenseHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:2},expenseTypeContainer:{flexDirection:"row",alignItems:"center",flex:1},expenseType:{fontSize:16,fontWeight:"600",color:"#444"},expenseAmount:{fontSize:16,fontWeight:"bold",color:"#2e7d32"},expenseDescription:{fontSize:14,color:"#666",marginTop:6,paddingTop:6,paddingBottom:2,borderTopWidth:1,borderTopColor:"#f8f8f8"},customBadge:{backgroundColor:"#4caf50",paddingHorizontal:8,paddingVertical:3,borderRadius:12,marginLeft:8,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.2,shadowRadius:1,elevation:1},customBadgeText:{color:"white",fontSize:10,fontWeight:"bold",textShadowColor:"rgba(0,0,0,0.2)",textShadowOffset:{width:0,height:1},textShadowRadius:1},expensePlayers:{marginTop:8,backgroundColor:"#fafafa",borderRadius:8,padding:10,borderWidth:1,borderColor:"#eaeaea"},expensePlayersLabel:{fontSize:12,color:"#666",fontStyle:"italic",marginBottom:6,fontWeight:"500"},expensePlayersList:{flexDirection:"row",flexWrap:"wrap",marginTop:4},expensePlayerName:{fontSize:12,color:"#4caf50",backgroundColor:"#f0fff0",borderWidth:1,borderColor:"#4caf50",borderRadius:6,paddingVertical:4,paddingHorizontal:8,marginRight:8,marginBottom:6,fontWeight:"500",shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.1,shadowRadius:1,elevation:1},totalExpense:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginTop:8,paddingTop:12,borderTopWidth:1,borderTopColor:"#eee"},totalExpenseLabel:{fontSize:16,fontWeight:"bold",color:"#333"},totalExpenseAmount:{fontSize:18,fontWeight:"bold",color:"#2e7d32"},playerItem:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingVertical:8,borderBottomWidth:1,borderBottomColor:"#f0f0f0"},playerName:{fontSize:15,fontWeight:"500",color:"#444"},playerAmount:{fontSize:15,fontWeight:"500",color:"#2e7d32"},buttonContainer:{flexDirection:"row",justifyContent:"space-between",marginTop:8,marginBottom:24},button:{flex:1,padding:14,borderRadius:8,justifyContent:"center",alignItems:"center",marginHorizontal:6},editButton:{backgroundColor:"#2196f3"},deleteButton:{backgroundColor:"#f44336"},buttonText:{color:"white",fontSize:16,fontWeight:"bold"},modalButton:{backgroundColor:"#4caf50",paddingVertical:10,paddingHorizontal:20,borderRadius:4,marginHorizontal:8},modalButtonText:{color:"#fff",fontSize:16,fontWeight:"bold"}}),oe=()=>{const e=(0,h.useNavigation)(),t=(0,h.useRoute)(),{sessionId:n}=t.params,[o,i]=(0,a.useState)(null),[r,d]=(0,a.useState)(null),[c,f]=(0,a.useState)(!0);(0,a.useEffect)((()=>{m()}),[n]);const m=async()=>{f(!0);try{const t=(await M()).find((e=>e.id===n));if(t){i(t);const e=(e=>{const t={totalAmount:0,splitByPlayer:{}};return e.players.forEach((e=>{t.splitByPlayer[e.id]=0})),e.expenses.forEach((n=>{t.totalAmount+=n.amount;const o=n.divideAmong?e.players.filter((e=>n.divideAmong?.includes(e.id))):e.players;if(0===o.length)return;const a=n.amount/o.length;o.forEach((e=>{t.splitByPlayer[e.id]+=a}))})),t})(t);d(e)}else G.alert("L\u1ed7i","Kh\xf4ng t\xecm th\u1ea5y th\xf4ng tin bu\u1ed5i \u0111\xe1nh c\u1ea7u"),e.goBack()}catch(t){console.error("L\u1ed7i khi t\u1ea3i chi ti\u1ebft bu\u1ed5i \u0111\xe1nh c\u1ea7u:",t),G.alert("L\u1ed7i","Kh\xf4ng th\u1ec3 t\u1ea3i th\xf4ng tin bu\u1ed5i \u0111\xe1nh c\u1ea7u")}finally{f(!1)}},g=e=>{switch(e){case X.COURT_FEE:return"Ti\u1ec1n s\xe2n";case X.SHUTTLE:return"Ti\u1ec1n c\u1ea7u";case X.DRINK:return"Ti\u1ec1n n\u01b0\u1edbc";case X.EQUIPMENT:return"Ti\u1ec1n ph\u1ee5 ki\u1ec7n";case X.OTHER:return"Chi ph\xed kh\xe1c";default:return"Chi ph\xed"}};return c?(0,T.jsx)(l.default,{style:[ne.container,ne.center],children:(0,T.jsx)(u.default,{size:"large",color:"#4caf50"})}):o&&r?(0,T.jsx)(l.default,{style:ne.container,children:(0,T.jsxs)(z.default,{contentContainerStyle:ne.scrollContent,children:[" ",(0,T.jsxs)(l.default,{style:ne.header,children:[(0,T.jsx)(s.default,{style:ne.dateText,children:(0,O.format)(new Date(o.date),"EEEE, dd/MM/yyyy",{locale:L.vi})}),(0,T.jsxs)(l.default,{style:ne.timeInfo,children:[(0,T.jsxs)(s.default,{style:ne.timeText,children:["Th\u1eddi gian: ",(0,O.format)(new Date(o.date),"HH:mm"),o.endTime?` - ${(0,O.format)(new Date(o.endTime),"HH:mm")}`:""]}),o.duration&&(0,T.jsxs)(s.default,{style:ne.durationText,children:["Th\u1eddi l\u01b0\u1ee3ng:"," ",Math.floor(o.duration/60)>0?`${Math.floor(o.duration/60)} gi\u1edd ${o.duration%60} ph\xfat`:`${o.duration} ph\xfat`]})]}),(0,T.jsx)(s.default,{style:ne.locationText,children:o.location}),o.notes&&(0,T.jsx)(s.default,{style:ne.notesText,children:o.notes})]}),(0,T.jsxs)(l.default,{style:ne.section,children:[(0,T.jsx)(s.default,{style:ne.sectionTitle,children:"Danh s\xe1ch chi ph\xed"})," ",o.expenses.map((e=>{const t=(e=>{switch(e){case X.COURT_FEE:return"#4caf50";case X.SHUTTLE:return"#2196f3";case X.DRINK:return"#ff9800";case X.EQUIPMENT:return"#9c27b0";case X.OTHER:return"#e91e63";default:return"#607d8b"}})(e.type),n=e.divideAmong&&e.divideAmong.length>0;return(0,T.jsxs)(l.default,{style:[ne.expenseItem,{borderLeftColor:t,borderLeftWidth:4}],children:[(0,T.jsxs)(l.default,{style:ne.expenseHeader,children:[(0,T.jsxs)(l.default,{style:ne.expenseTypeContainer,children:[(0,T.jsx)(s.default,{style:[ne.expenseType,{color:t}],children:g(e.type)}),n&&(0,T.jsx)(l.default,{style:[ne.customBadge,{backgroundColor:t}],children:(0,T.jsx)(s.default,{style:ne.customBadgeText,children:"T\xf9y ch\u1ec9nh"})})]}),(0,T.jsx)(s.default,{style:[ne.expenseAmount,e.type===X.OTHER?{fontWeight:"bold"}:{}],children:A(e.amount)})]}),e.description&&(0,T.jsxs)(s.default,{style:[ne.expenseDescription,e.type===X.OTHER?{fontStyle:"italic"}:{}],children:[" ",(0,T.jsx)(s.default,{children:e.description})]}),n&&(0,T.jsxs)(l.default,{style:[ne.expensePlayers,{backgroundColor:`${t}08`}],children:[(0,T.jsx)(s.default,{style:ne.expensePlayersLabel,children:"Chi ph\xed n\xe0y \u0111\u01b0\u1ee3c chia cho:"}),(0,T.jsx)(l.default,{style:ne.expensePlayersList,children:e.divideAmong.map((e=>{const n=o.players.find((t=>t.id===e));return n?(0,T.jsx)(s.default,{style:[ne.expensePlayerName,{backgroundColor:`${t}15`,borderColor:t,color:t}],children:n.name},e):null}))})]})]},e.id)})),(0,T.jsxs)(l.default,{style:ne.totalExpense,children:[(0,T.jsx)(s.default,{style:ne.totalExpenseLabel,children:"T\u1ed5ng chi ph\xed:"})," ",(0,T.jsx)(s.default,{style:ne.totalExpenseAmount,children:(0,T.jsx)(s.default,{children:A(r.totalAmount)})})]})]})," ",(0,T.jsxs)(l.default,{style:ne.section,children:[(0,T.jsxs)(s.default,{style:ne.sectionTitle,children:["Ng\u01b0\u1eddi tham gia (",o.players.length,")"]}),o.players.map((e=>(0,T.jsxs)(l.default,{style:ne.playerItem,children:[(0,T.jsx)(s.default,{style:ne.playerName,children:e.name})," ",(0,T.jsx)(s.default,{style:ne.playerAmount,children:(0,T.jsx)(s.default,{children:A(r.splitByPlayer[e.id]||0)})})]},e.id)))]}),(0,T.jsx)(Z,{totalAmount:r.totalAmount,playerAmounts:o.players.map((e=>({id:e.id,name:e.name,amount:r.splitByPlayer[e.id]||0})))})," ",(0,T.jsx)(te,{session:o,calculatedExpenses:r}),(0,T.jsxs)(l.default,{style:ne.buttonContainer,children:[(0,T.jsx)(k.default,{style:[ne.button,ne.editButton],onPress:()=>e.navigate("EditSession",{sessionId:o.id}),children:(0,T.jsx)(s.default,{style:ne.buttonText,children:"Ch\u1ec9nh s\u1eeda"})}),(0,T.jsx)(k.default,{style:[ne.button,ne.deleteButton],onPress:()=>{G.alert("X\xe1c nh\u1eadn x\xf3a","B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a bu\u1ed5i \u0111\xe1nh c\u1ea7u n\xe0y kh\xf4ng?",[{text:"H\u1ee7y",style:"cancel"},{text:"X\xf3a",style:"destructive",onPress:async()=>{try{await(async e=>{try{const t=(await M()).filter((t=>t.id!==e));await V(t)}catch(t){throw console.error("L\u1ed7i khi x\xf3a session:",t),t}})(n),e.goBack()}catch(t){G.alert("L\u1ed7i","Kh\xf4ng th\u1ec3 x\xf3a bu\u1ed5i \u0111\xe1nh c\u1ea7u")}}}])},children:(0,T.jsx)(s.default,{style:ne.buttonText,children:"X\xf3a"})})]})]})}):(0,T.jsx)(l.default,{style:[ne.container,ne.center],children:(0,T.jsx)(s.default,{children:"Kh\xf4ng t\xecm th\u1ea5y th\xf4ng tin"})})};n(9162);const ae=d.default.create({container:{width:"100%",marginVertical:8},input:{height:40,width:"100%",borderWidth:1,borderColor:"#ccc",borderRadius:5,paddingHorizontal:10,fontSize:16}}),ie=({value:e,mode:t,display:n="default",onChange:o})=>{{const n="date"===t?"date":"time",a=()=>"date"===t?e.toISOString().split("T")[0]:`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`,i=n=>{const a=n.target.value;if(a){let n;if("date"===t)n=new Date(a),isNaN(n.getTime())?(n=new Date(e),console.warn("Kh\xf4ng th\u1ec3 parse ng\xe0y t\u1eeb input:",a)):n.setHours(e.getHours(),e.getMinutes(),0,0);else{const[t,o]=a.split(":");n=new Date(e),void 0!==t&&void 0!==o&&(n.setHours(parseInt(t,10)||0),n.setMinutes(parseInt(o,10)||0))}isNaN(n.getTime())?console.warn("T\u1ea1o date kh\xf4ng h\u1ee3p l\u1ec7 t\u1eeb input:",a):o({type:"set",nativeEvent:{timestamp:n.getTime()}},n)}};return(0,T.jsx)(l.default,{style:ae.container,children:(0,T.jsx)("input",{type:n,value:a(),onChange:i,style:ae.input})})}},re=d.default.create({container:{flex:1,padding:16,backgroundColor:"#fff"},section:{marginBottom:24},label:{fontSize:16,fontWeight:"bold",marginBottom:8},datePicker:{padding:12,borderWidth:1,borderColor:"#ccc",borderRadius:8,alignItems:"center"},dateText:{fontSize:16},input:{padding:12,borderWidth:1,borderColor:"#ccc",borderRadius:8,fontSize:16},playersContainer:{flexDirection:"row",flexWrap:"wrap",marginTop:8},playerButton:{padding:12,borderWidth:1,borderColor:"#007bff",borderRadius:8,marginRight:8,marginBottom:8,backgroundColor:"#f0f8ff"},selectedPlayer:{backgroundColor:"#007bff"},playerName:{fontSize:16,color:"#007bff"},selectedPlayerText:{color:"#fff"},addPlayerContainer:{flexDirection:"row",alignItems:"center",marginTop:16},addPlayerInput:{flex:1,padding:12,borderWidth:1,borderColor:"#007bff",borderRadius:8,fontSize:16,marginRight:8},addPlayerButton:{padding:12,backgroundColor:"#007bff",borderRadius:8,alignItems:"center",justifyContent:"center"},addPlayerButtonText:{color:"#fff",fontSize:16,fontWeight:"bold"},expenseItem:{padding:12,borderWidth:1,borderColor:"#ccc",borderRadius:8,marginBottom:8,flexDirection:"row",justifyContent:"space-between",alignItems:"center"},expenseText:{fontSize:16},removeExpenseButton:{padding:8,backgroundColor:"#ff4d4d",borderRadius:8},removeExpenseButtonText:{color:"#fff",fontWeight:"bold"},addExpenseContainer:{flexDirection:"column",width:"100%",marginTop:16},expenseTypeSelector:{marginBottom:16,width:"100%"},expenseTypeLabel:{fontSize:15,fontWeight:"bold",marginBottom:10,color:"#333"},expenseTypeOptions:{flexDirection:"column",width:"100%"},expenseTypeOption:{padding:12,borderWidth:1,borderColor:"#4caf50",borderRadius:8,marginBottom:8,backgroundColor:"#f0fff0",width:"100%",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},selectedExpenseType:{backgroundColor:"#4caf50"},expenseTypeText:{fontSize:15,color:"#4caf50",fontWeight:"500",flex:1},selectedExpenseTypeText:{color:"#fff",fontWeight:"bold"},expenseInput:{padding:12,borderWidth:1,borderColor:"#ccc",borderRadius:8,fontSize:16,marginBottom:12},playerSelectionContainer:{marginBottom:12},playerSelectionLabel:{fontSize:14,fontWeight:"bold",marginBottom:8},playerSelectionList:{flexDirection:"column",width:"100%"},playerSelectItem:{padding:10,borderWidth:1,borderColor:"#4caf50",borderRadius:8,marginBottom:8,backgroundColor:"#f0fff0",width:"100%",flexDirection:"row",alignItems:"center"},playerSelectItemSelected:{backgroundColor:"#4caf50"},playerSelectName:{fontSize:15,color:"#4caf50",flex:1,fontWeight:"500"},playerSelectNameSelected:{color:"#fff",fontWeight:"bold"},addExpenseButton:{backgroundColor:"#4caf50",padding:12,borderRadius:8,alignItems:"center",marginTop:8,marginBottom:12},addExpenseButtonText:{color:"#fff",fontSize:16,fontWeight:"bold"},checkboxContainer:{marginRight:10},checkbox:{width:20,height:20,borderWidth:1,borderColor:"#4caf50",borderRadius:4,justifyContent:"center",alignItems:"center",backgroundColor:"#fff"},checkboxSelected:{backgroundColor:"#4caf50"},checkmark:{color:"#fff",fontSize:12,fontWeight:"bold"},radioContainer:{marginLeft:10},radioOuter:{width:22,height:22,borderRadius:11,borderWidth:2,borderColor:"#4caf50",justifyContent:"center",alignItems:"center",backgroundColor:"#fff"},radioOuterSelected:{borderColor:"#4caf50",backgroundColor:"#f0fff0"},radioInner:{width:12,height:12,borderRadius:6,backgroundColor:"#4caf50"},courtFeeButton:{backgroundColor:"#2196f3"},submitButton:{backgroundColor:"#4caf50",padding:16,borderRadius:8,alignItems:"center",marginTop:24},submitButtonText:{color:"#fff",fontSize:16,fontWeight:"bold"}}),le=()=>{const e=(0,h.useNavigation)(),[t,n]=(0,a.useState)(new Date),[o,i]=(0,a.useState)(null),[r,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[f,m]=(0,a.useState)(""),[g,p]=(0,a.useState)(!1),[y,x]=(0,a.useState)(!1),[b,j]=(0,a.useState)([]),[C,w]=(0,a.useState)([]),[S,v]=(0,a.useState)(""),[B,R]=(0,a.useState)([]),[E,P]=(0,a.useState)({type:X.COURT_FEE,amount:"",description:"",divideAmong:[]});(0,a.useEffect)((()=>{D()}),[]);const D=async()=>{try{const e=await $();j(e)}catch(e){console.error("L\u1ed7i khi t\u1ea3i danh s\xe1ch ng\u01b0\u1eddi ch\u01a1i:",e)}},H=e=>{switch(e){case X.COURT_FEE:return"Ti\u1ec1n s\xe2n";case X.SHUTTLE:return"Ti\u1ec1n c\u1ea7u";case X.DRINK:return"Ti\u1ec1n n\u01b0\u1edbc";case X.EQUIPMENT:return"Ti\u1ec1n ph\u1ee5 ki\u1ec7n";case X.OTHER:return"Chi ph\xed kh\xe1c";default:return"Chi ph\xed"}},N=()=>{if(t&&o){const e=new Date(t),n=new Date(o);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n<e&&n.setDate(n.getDate()+1),Math.round((n.getTime()-e.getTime())/6e4)}},F=e=>[X.DRINK,X.EQUIPMENT,X.OTHER].includes(e);return(0,T.jsx)(l.default,{style:re.container,children:(0,T.jsxs)(z.default,{children:[(0,T.jsxs)(l.default,{style:re.section,children:[(0,T.jsx)(s.default,{style:re.label,children:"Ng\xe0y"}),(0,T.jsx)(k.default,{onPress:()=>p(!0),style:re.datePicker,children:(0,T.jsx)(s.default,{style:re.dateText,children:(0,O.format)(t,"dd/MM/yyyy",{locale:L.vi})})})," ",g&&(0,T.jsx)(ie,{value:t,mode:"date",display:"default",onChange:(e,t)=>{p(!1),t&&n(t)}})]}),(0,T.jsxs)(l.default,{style:re.section,children:[(0,T.jsx)(s.default,{style:re.label,children:"Th\u1eddi gian k\u1ebft th\xfac"}),(0,T.jsx)(k.default,{onPress:()=>x(!0),style:re.datePicker,children:(0,T.jsx)(s.default,{style:re.dateText,children:o?(0,O.format)(o,"HH:mm",{locale:L.vi}):"Ch\u01b0a ch\u1ecdn th\u1eddi gian"})})," ",y&&(0,T.jsx)(ie,{value:o||new Date,mode:"time",display:"default",onChange:(e,t)=>{x(!1),t&&i(t)}})]}),(0,T.jsxs)(l.default,{style:re.section,children:[(0,T.jsx)(s.default,{style:re.label,children:"\u0110\u1ecba \u0111i\u1ec3m"}),(0,T.jsx)(I.default,{style:re.input,value:r,onChangeText:d})]}),(0,T.jsxs)(l.default,{style:re.section,children:[(0,T.jsx)(s.default,{style:re.label,children:"Ghi ch\xfa"}),(0,T.jsx)(I.default,{style:re.input,value:c,onChangeText:u,multiline:!0})]}),(0,T.jsxs)(l.default,{style:re.section,children:[(0,T.jsx)(s.default,{style:re.label,children:"Gi\xe1 thu\xea s\xe2n (VN\u0110/gi\u1edd)"}),(0,T.jsx)(I.default,{style:re.input,value:f,onChangeText:m,keyboardType:"numeric"})]}),(0,T.jsxs)(l.default,{style:re.section,children:[(0,T.jsx)(s.default,{style:re.label,children:"Ng\u01b0\u1eddi ch\u01a1i"}),(0,T.jsx)(l.default,{style:re.playersContainer,children:b.map((e=>(0,T.jsx)(k.default,{onPress:()=>{return t=e.id,void(C.includes(t)?w(C.filter((e=>e!==t))):w([...C,t]));var t},style:[re.playerButton,C.includes(e.id)&&re.selectedPlayer],children:(0,T.jsx)(s.default,{style:[re.playerName,C.includes(e.id)&&re.selectedPlayerText],children:e.name})},e.id)))}),(0,T.jsxs)(l.default,{style:re.addPlayerContainer,children:[(0,T.jsx)(I.default,{style:re.addPlayerInput,value:S,onChangeText:v,placeholder:"Nh\u1eadp t\xean ng\u01b0\u1eddi ch\u01a1i m\u1edbi"}),(0,T.jsx)(k.default,{onPress:async()=>{if(S.trim())try{const e=await U(S.trim());j([...b,e]),w([...C,e.id]),v("")}catch(e){G.alert("L\u1ed7i","Kh\xf4ng th\u1ec3 th\xeam ng\u01b0\u1eddi ch\u01a1i m\u1edbi")}else G.alert("L\u1ed7i","Vui l\xf2ng nh\u1eadp t\xean ng\u01b0\u1eddi ch\u01a1i")},style:re.addPlayerButton,children:(0,T.jsx)(s.default,{style:re.addPlayerButtonText,children:(0,T.jsx)(s.default,{children:"Th\xeam"})})})]})]}),(0,T.jsxs)(l.default,{style:re.section,children:[(0,T.jsx)(s.default,{style:re.label,children:"Chi ph\xed"}),B.map((e=>(0,T.jsxs)(l.default,{style:re.expenseItem,children:[" ",(0,T.jsxs)(s.default,{style:re.expenseText,children:[(0,T.jsxs)(s.default,{children:[H(e.type),": "]}),(0,T.jsxs)(s.default,{children:[A(e.amount)," "]}),(0,T.jsx)(k.default,{onPress:()=>{return t=e.id,void R(B.filter((e=>e.id!==t)));var t},style:re.removeExpenseButton,children:(0,T.jsx)(s.default,{style:re.removeExpenseButtonText,children:(0,T.jsx)(s.default,{children:"X"})})})]})]},e.id))),(0,T.jsxs)(l.default,{style:re.addExpenseContainer,children:[" ",(0,T.jsxs)(l.default,{style:re.expenseTypeSelector,children:[(0,T.jsx)(s.default,{style:re.expenseTypeLabel,children:"Lo\u1ea1i chi ph\xed:"}),(0,T.jsx)(l.default,{style:re.expenseTypeOptions,children:Object.values(X).map((e=>(0,T.jsxs)(k.default,{style:[re.expenseTypeOption,E.type===e&&re.selectedExpenseType],onPress:()=>(e=>{P(Object.assign({},E,{type:e,divideAmong:F(e)&&E.divideAmong||[]}))})(e),children:[(0,T.jsx)(s.default,{style:[re.expenseTypeText,E.type===e&&re.selectedExpenseTypeText],children:H(e)}),(0,T.jsx)(l.default,{style:re.radioContainer,children:(0,T.jsx)(l.default,{style:[re.radioOuter,E.type===e&&re.radioOuterSelected],children:E.type===e&&(0,T.jsx)(l.default,{style:re.radioInner})})})]},e)))})]}),(0,T.jsx)(I.default,{style:re.expenseInput,placeholder:"S\u1ed1 ti\u1ec1n",value:E.amount,onChangeText:e=>P(Object.assign({},E,{amount:e.replace(/[^0-9]/g,"")})),keyboardType:"numeric"}),(0,T.jsx)(I.default,{style:re.expenseInput,placeholder:"M\xf4 t\u1ea3 (kh\xf4ng b\u1eaft bu\u1ed9c)",value:E.description,onChangeText:e=>P(Object.assign({},E,{description:e}))}),F(E.type)&&(0,T.jsxs)(l.default,{style:re.playerSelectionContainer,children:[(0,T.jsx)(s.default,{style:re.playerSelectionLabel,children:"Chia chi ph\xed cho:"}),(0,T.jsxs)(l.default,{style:re.playerSelectionList,children:[" ",b.map((e=>(0,T.jsxs)(k.default,{style:[re.playerSelectItem,E.divideAmong?.includes(e.id)&&re.playerSelectItemSelected],onPress:()=>(e=>{const t=E.divideAmong||[];t.includes(e)?P(Object.assign({},E,{divideAmong:t.filter((t=>t!==e))})):P(Object.assign({},E,{divideAmong:[...t,e]}))})(e.id),children:[(0,T.jsx)(l.default,{style:re.checkboxContainer,children:(0,T.jsx)(l.default,{style:[re.checkbox,E.divideAmong?.includes(e.id)&&re.checkboxSelected],children:E.divideAmong?.includes(e.id)&&(0,T.jsx)(s.default,{style:re.checkmark,children:"\u2713"})})}),(0,T.jsx)(s.default,{style:[re.playerSelectName,E.divideAmong?.includes(e.id)&&re.playerSelectNameSelected],children:e.name})]},e.id)))]})]}),(0,T.jsx)(k.default,{onPress:()=>{if(!E.amount||parseFloat(E.amount)<=0)return void G.alert("L\u1ed7i","Vui l\xf2ng nh\u1eadp s\u1ed1 ti\u1ec1n h\u1ee3p l\u1ec7");if(F(E.type)&&(!E.divideAmong||0===E.divideAmong.length))return void G.alert("Ch\u01b0a ch\u1ecdn ng\u01b0\u1eddi tham gia","Vui l\xf2ng ch\u1ecdn \xedt nh\u1ea5t m\u1ed9t ng\u01b0\u1eddi tham gia \u0111\u1ec3 chi tr\u1ea3 chi ph\xed n\xe0y.");const e={id:W(),type:E.type,amount:parseFloat(E.amount),description:E.description,divideAmong:E.divideAmong?.length?E.divideAmong:void 0};R([...B,e]),P({type:X.COURT_FEE,amount:"",description:"",divideAmong:[]})},style:re.addExpenseButton,children:(0,T.jsx)(s.default,{style:re.addExpenseButtonText,children:(0,T.jsx)(s.default,{children:"Th\xeam chi ph\xed"})})}),f&&o&&(0,T.jsxs)(k.default,{style:[re.addExpenseButton,re.courtFeeButton],onPress:()=>{if(!f||parseFloat(f)<=0)return void G.alert("L\u1ed7i","Vui l\xf2ng nh\u1eadp gi\xe1 thu\xea s\xe2n h\u1ee3p l\u1ec7");if(!o)return void G.alert("L\u1ed7i","Vui l\xf2ng ch\u1ecdn th\u1eddi gian k\u1ebft th\xfac \u0111\u1ec3 t\xednh chi ph\xed thu\xea s\xe2n");const e=(()=>{const e=N();if(e&&f){const t=parseFloat(f),n=e/60;return Math.round(t*n)}return 0})();if(e<=0)return void G.alert("L\u1ed7i","Kh\xf4ng th\u1ec3 t\xednh chi ph\xed thu\xea s\xe2n");const t=N();let n=0,a=0;t&&(n=Math.floor(t/60),a=t%60);const i="S\xe2n "+((n>0?n+" gi\u1edd ":"")+(a>0?a+" ph\xfat":""))+" ("+(A(parseFloat(f))+"/gi\u1edd")+")",r={id:W(),type:X.COURT_FEE,amount:e,description:i};R([...B,r]),G.alert("Th\xe0nh c\xf4ng","\u0110\xe3 th\xeam chi ph\xed thu\xea s\xe2n")},children:[" ",(0,T.jsx)(s.default,{style:re.addExpenseButtonText,children:(0,T.jsxs)(s.default,{children:["T\xednh ti\u1ec1n s\xe2n (",A(parseFloat(f)||0),"/gi\u1edd)"]})})]})]})]})," ",(0,T.jsx)(k.default,{onPress:async()=>{if(r.trim())if(0!==C.length)if(0!==B.length)try{const n=b.filter((e=>C.includes(e.id))),a=N(),i=f?parseFloat(f):void 0;await(async e=>{try{const t=await M(),n=Object.assign({},e,{id:W()});return t.push(n),await V(t),n}catch(t){throw console.error("L\u1ed7i khi th\xeam session:",t),t}})({date:t.toISOString(),endTime:o?o.toISOString():void 0,duration:a,courtFeePerHour:i,location:r.trim(),notes:c.trim()||void 0,players:n,expenses:B}),G.alert("Th\xe0nh c\xf4ng","\u0110\xe3 th\xeam bu\u1ed5i \u0111\xe1nh c\u1ea7u m\u1edbi",[{text:"OK",onPress:()=>e.goBack()}])}catch(n){G.alert("L\u1ed7i","Kh\xf4ng th\u1ec3 l\u01b0u bu\u1ed5i \u0111\xe1nh c\u1ea7u")}else G.alert("L\u1ed7i","Vui l\xf2ng th\xeam \xedt nh\u1ea5t m\u1ed9t kho\u1ea3n chi ph\xed");else G.alert("L\u1ed7i","Vui l\xf2ng ch\u1ecdn \xedt nh\u1ea5t m\u1ed9t ng\u01b0\u1eddi tham gia");else G.alert("L\u1ed7i","Vui l\xf2ng nh\u1eadp \u0111\u1ecba \u0111i\u1ec3m \u0111\xe1nh c\u1ea7u")},style:re.submitButton,children:(0,T.jsx)(s.default,{style:re.submitButtonText,children:(0,T.jsx)(s.default,{children:"L\u01b0u bu\u1ed5i \u0111\xe1nh c\u1ea7u"})})})]})})},se=d.default.create({container:{flex:1,padding:16,backgroundColor:"#fff"},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},loadingText:{marginTop:12,fontSize:16,color:"#555"},section:{marginBottom:24},sectionTitle:{fontSize:18,fontWeight:"bold",marginBottom:12,color:"#333"},dateInput:{backgroundColor:"#f0f0f0",paddingVertical:12,paddingHorizontal:16,borderRadius:8,marginBottom:12},dateText:{fontSize:16,color:"#333"},timeInputContainer:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:12},timeInputLabel:{fontSize:16,color:"#333",flex:1},timeInput:{backgroundColor:"#f0f0f0",paddingHorizontal:12,paddingVertical:10,borderRadius:8,flex:1,marginLeft:8},timeText:{fontSize:16,textAlign:"center",color:"#444"},input:{backgroundColor:"#f0f0f0",paddingVertical:12,paddingHorizontal:16,borderRadius:8,marginBottom:12,fontSize:16},multilineInput:{minHeight:80,textAlignVertical:"top"},playerList:{flexDirection:"row",flexWrap:"wrap",marginBottom:12},playerItem:{backgroundColor:"#f0f0f0",paddingVertical:8,paddingHorizontal:12,borderRadius:16,margin:4},playerItemSelected:{backgroundColor:"#4caf50"},playerName:{fontSize:14,color:"#444"},playerNameSelected:{color:"white"},newPlayerContainer:{flexDirection:"row"},newPlayerInput:{flex:1,backgroundColor:"#f0f0f0",paddingVertical:12,paddingHorizontal:16,borderRadius:8,marginRight:8,fontSize:16},addPlayerButton:{backgroundColor:"#2196f3",paddingHorizontal:16,justifyContent:"center",alignItems:"center",borderRadius:8},addPlayerButtonText:{color:"white",fontWeight:"bold"},expenseList:{marginBottom:16},expenseItem:{backgroundColor:"#f9f9f9",padding:12,borderRadius:8,marginBottom:8},expenseHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:4},expenseType:{fontSize:15,fontWeight:"500",color:"#444"},expenseAmount:{fontSize:15,fontWeight:"bold",color:"#2e7d32"},expenseDescription:{fontSize:14,color:"#777",marginBottom:8},removeButton:{alignSelf:"flex-end",paddingHorizontal:12,paddingVertical:4,backgroundColor:"#f44336",borderRadius:4},removeButtonText:{color:"white",fontSize:12},newExpenseContainer:{marginTop:8},selectContainer:{marginBottom:12},selectLabel:{fontSize:14,color:"#555",marginBottom:6},selectOptions:{flexDirection:"row",flexWrap:"wrap"},selectOption:{backgroundColor:"#f0f0f0",paddingHorizontal:12,paddingVertical:8,borderRadius:16,margin:4},selectOptionSelected:{backgroundColor:"#2196f3"},selectOptionText:{fontSize:14,color:"#444"},selectOptionTextSelected:{color:"white",fontWeight:"500"},addExpenseButton:{backgroundColor:"#4caf50",paddingVertical:12,borderRadius:8,alignItems:"center",marginTop:8},addExpenseButtonText:{color:"white",fontWeight:"bold",fontSize:16},buttonContainer:{marginTop:16,marginBottom:30},submitButton:{backgroundColor:"#2e7d32",paddingVertical:14,borderRadius:8,alignItems:"center"},submitButtonText:{color:"white",fontWeight:"bold",fontSize:18},feeContainer:{marginBottom:12},feeLabel:{fontSize:16,color:"#333",marginBottom:8},feeInput:{backgroundColor:"#f0f0f0",paddingVertical:12,paddingHorizontal:16,borderRadius:8,fontSize:16},courtFeeButton:{backgroundColor:"#2196f3",marginTop:8},playerSelectionContainer:{marginTop:12,padding:12,borderRadius:8,backgroundColor:"#f9f9f9",borderWidth:1,borderColor:"#ddd"},playerSelectionLabel:{fontSize:16,color:"#333",marginBottom:8},playerSelectionList:{flexDirection:"row",flexWrap:"wrap"},playerSelectItem:{backgroundColor:"#f0f0f0",paddingVertical:8,paddingHorizontal:12,borderRadius:16,margin:4},playerSelectItemSelected:{backgroundColor:"#4caf50"},playerSelectName:{fontSize:14,color:"#444"},playerSelectNameSelected:{color:"white"},expensePlayers:{marginTop:6,marginBottom:8},expensePlayersLabel:{fontSize:12,color:"#666",fontStyle:"italic"},expensePlayersList:{flexDirection:"row",flexWrap:"wrap",marginTop:4},expensePlayerName:{fontSize:12,color:"#4caf50",backgroundColor:"#f0fff0",borderWidth:1,borderColor:"#4caf50",borderRadius:4,paddingVertical:2,paddingHorizontal:6,marginRight:6,marginBottom:4}}),de=()=>{const e=(0,h.useNavigation)(),t=(0,h.useRoute)(),{sessionId:n}=t.params,[o,i]=(0,a.useState)(!0),[r,d]=(0,a.useState)(null),[c,f]=(0,a.useState)(new Date),[m,g]=(0,a.useState)(null),[p,y]=(0,a.useState)(""),[x,b]=(0,a.useState)(""),[j,C]=(0,a.useState)(""),[w,S]=(0,a.useState)(!1),[v,B]=(0,a.useState)(!1),[R,E]=(0,a.useState)([]),[P,D]=(0,a.useState)([]),[H,N]=(0,a.useState)(""),[F,U]=(0,a.useState)([]),[K,_]=(0,a.useState)({type:X.COURT_FEE,amount:"",description:"",divideAmong:[]});(0,a.useEffect)((()=>{Q(),q()}),[n]);const Q=async()=>{try{const t=(await M()).find((e=>e.id===n));t?(d(t),f(new Date(t.date)),y(t.location),b(t.notes||""),U([...t.expenses]),D(t.players.map((e=>e.id))),t.endTime&&g(new Date(t.endTime)),t.courtFeePerHour&&C(t.courtFeePerHour.toString())):(G.alert("L\u1ed7i","Kh\xf4ng t\xecm th\u1ea5y bu\u1ed5i \u0111\xe1nh c\u1ea7u"),e.goBack())}catch(t){console.error("L\u1ed7i khi t\u1ea3i th\xf4ng tin bu\u1ed5i \u0111\xe1nh c\u1ea7u:",t),G.alert("L\u1ed7i","Kh\xf4ng th\u1ec3 t\u1ea3i th\xf4ng tin bu\u1ed5i \u0111\xe1nh c\u1ea7u"),e.goBack()}finally{i(!1)}},q=async()=>{try{const e=await $();E(e)}catch(e){console.error("L\u1ed7i khi t\u1ea3i danh s\xe1ch ng\u01b0\u1eddi ch\u01a1i:",e)}},Y=()=>{if(c&&m){const e=new Date(c),t=new Date(m);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t<e&&t.setDate(t.getDate()+1),Math.round((t.getTime()-e.getTime())/6e4)}},J=e=>{switch(e){case X.COURT_FEE:return"Ti\u1ec1n s\xe2n";case X.SHUTTLE:return"Ti\u1ec1n c\u1ea7u";case X.DRINK:return"Ti\u1ec1n n\u01b0\u1edbc";case X.EQUIPMENT:return"Ti\u1ec1n ph\u1ee5 ki\u1ec7n";case X.OTHER:return"Chi ph\xed kh\xe1c";default:return"Chi ph\xed"}},Z=e=>[X.DRINK,X.EQUIPMENT,X.OTHER].includes(e);return o?(0,T.jsxs)(l.default,{style:se.loadingContainer,children:[(0,T.jsx)(u.default,{size:"large",color:"#4caf50"}),(0,T.jsx)(s.default,{style:se.loadingText,children:"\u0110ang t\u1ea3i..."})]}):(0,T.jsxs)(z.default,{style:se.container,children:[(0,T.jsxs)(l.default,{style:se.section,children:[(0,T.jsx)(s.default,{style:se.sectionTitle,children:"Th\xf4ng tin c\u01a1 b\u1ea3n"}),(0,T.jsx)(k.default,{style:se.dateInput,onPress:()=>S(!0),children:(0,T.jsx)(s.default,{style:se.dateText,children:(0,O.format)(c,"EEEE, dd/MM/yyyy",{locale:L.vi})})})," ",w&&(0,T.jsx)(ie,{value:c,mode:"date",display:"default",onChange:(e,t)=>{S(!1),t&&f(t)}}),(0,T.jsxs)(l.default,{style:se.timeInputContainer,children:[(0,T.jsx)(s.default,{style:se.timeInputLabel,children:"Th\u1eddi gian b\u1eaft \u0111\u1ea7u:"}),(0,T.jsx)(k.default,{style:se.timeInput,onPress:()=>{const e=new Date;f((t=>{const n=new Date(t);return n.setHours(e.getHours(),e.getMinutes(),0,0),n})),S(!0)},children:(0,T.jsx)(s.default,{style:se.timeText,children:(0,O.format)(c,"HH:mm")})})]}),(0,T.jsxs)(l.default,{style:se.timeInputContainer,children:[(0,T.jsx)(s.default,{style:se.timeInputLabel,children:"Th\u1eddi gian k\u1ebft th\xfac:"}),(0,T.jsx)(k.default,{style:se.timeInput,onPress:()=>B(!0),children:(0,T.jsx)(s.default,{style:se.timeText,children:m?(0,O.format)(m,"HH:mm"):"Ch\u1ecdn gi\u1edd k\u1ebft th\xfac"})})]})," ",v&&(0,T.jsx)(ie,{value:m||new Date,mode:"time",display:"default",onChange:(e,t)=>{B(!1),t&&g(t)}})," ",(0,T.jsx)(I.default,{style:se.input,placeholder:"\u0110\u1ecba \u0111i\u1ec3m",value:p,onChangeText:y}),(0,T.jsxs)(l.default,{style:se.feeContainer,children:[(0,T.jsx)(s.default,{style:se.feeLabel,children:"Gi\xe1 thu\xea s\xe2n (VN\u0110/1 gi\u1edd):"}),(0,T.jsx)(I.default,{style:se.feeInput,placeholder:"Nh\u1eadp gi\xe1 s\xe2n",value:j,onChangeText:e=>C(e.replace(/[^0-9]/g,"")),keyboardType:"numeric"})]}),(0,T.jsx)(I.default,{style:[se.input,se.multilineInput],placeholder:"Ghi ch\xfa (kh\xf4ng b\u1eaft bu\u1ed9c)",value:x,onChangeText:b,multiline:!0})]}),(0,T.jsxs)(l.default,{style:se.section,children:[(0,T.jsx)(s.default,{style:se.sectionTitle,children:"Ng\u01b0\u1eddi tham gia"}),(0,T.jsx)(l.default,{style:se.playerList,children:R.map((e=>(0,T.jsx)(k.default,{style:[se.playerItem,P.includes(e.id)&&se.playerItemSelected],onPress:()=>{return t=e.id,void(P.includes(t)?D(P.filter((e=>e!==t))):D([...P,t]));var t},children:(0,T.jsx)(s.default,{style:[se.playerName,P.includes(e.id)&&se.playerNameSelected],children:e.name})},e.id)))})]}),(0,T.jsxs)(l.default,{style:se.section,children:[(0,T.jsx)(s.default,{style:se.sectionTitle,children:"Chi ph\xed"}),F.length>0&&(0,T.jsx)(l.default,{style:se.expenseList,children:F.map((e=>(0,T.jsxs)(l.default,{style:se.expenseItem,children:[(0,T.jsxs)(l.default,{style:se.expenseHeader,children:[" ",(0,T.jsx)(s.default,{style:se.expenseType,children:(0,T.jsx)(s.default,{children:J(e.type)})})," ",(0,T.jsx)(s.default,{style:se.expenseAmount,children:(0,T.jsx)(s.default,{children:A(e.amount)})})]}),e.description&&(0,T.jsxs)(s.default,{style:se.expenseDescription,children:[" ",(0,T.jsx)(s.default,{children:e.description})]}),e.divideAmong&&e.divideAmong.length>0&&(0,T.jsxs)(l.default,{style:se.expensePlayers,children:[(0,T.jsx)(s.default,{style:se.expensePlayersLabel,children:"Chi ph\xed chia cho:"}),(0,T.jsx)(l.default,{style:se.expensePlayersList,children:e.divideAmong.map((e=>{const t=R.find((t=>t.id===e));return t?(0,T.jsx)(s.default,{style:se.expensePlayerName,children:(0,T.jsx)(s.default,{children:t.name})},e):null}))})]}),(0,T.jsx)(k.default,{style:se.removeButton,onPress:()=>{return t=e.id,void U(F.filter((e=>e.id!==t)));var t},children:(0,T.jsx)(s.default,{style:se.removeButtonText,children:"X\xf3a"})})]},e.id)))}),(0,T.jsxs)(l.default,{style:se.newExpenseContainer,children:[(0,T.jsxs)(l.default,{style:se.selectContainer,children:[(0,T.jsx)(s.default,{style:se.selectLabel,children:"Lo\u1ea1i chi ph\xed:"}),(0,T.jsx)(l.default,{style:se.selectOptions,children:Object.values(X).map((e=>(0,T.jsx)(k.default,{style:[se.selectOption,K.type===e&&se.selectOptionSelected],onPress:()=>(e=>{_(Object.assign({},K,{type:e,divideAmong:Z(e)&&K.divideAmong||[]}))})(e),children:(0,T.jsx)(s.default,{style:[se.selectOptionText,K.type===e&&se.selectOptionTextSelected],children:J(e)})},e)))})]}),(0,T.jsx)(I.default,{style:se.input,placeholder:"S\u1ed1 ti\u1ec1n",value:K.amount,onChangeText:e=>_(Object.assign({},K,{amount:e.replace(/[^0-9]/g,"")})),keyboardType:"numeric"}),(0,T.jsx)(I.default,{style:se.input,placeholder:"M\xf4 t\u1ea3 (kh\xf4ng b\u1eaft bu\u1ed9c)",value:K.description,onChangeText:e=>_(Object.assign({},K,{description:e}))})," ",Z(K.type)&&(0,T.jsxs)(l.default,{style:se.playerSelectionContainer,children:[(0,T.jsx)(s.default,{style:se.playerSelectionLabel,children:"Chia s\u1ebb chi ph\xed cho:"}),(0,T.jsx)(l.default,{style:se.playerSelectionList,children:R.map((e=>(0,T.jsx)(k.default,{style:[se.playerSelectItem,K.divideAmong?.includes(e.id)&&se.playerSelectItemSelected],onPress:()=>(e=>{const t=K.divideAmong||[];t.includes(e)?_(Object.assign({},K,{divideAmong:t.filter((t=>t!==e))})):_(Object.assign({},K,{divideAmong:[...t,e]}))})(e.id),children:(0,T.jsx)(s.default,{style:[se.playerSelectName,K.divideAmong?.includes(e.id)&&se.playerSelectNameSelected],children:e.name})},e.id)))})]}),(0,T.jsx)(k.default,{style:se.addExpenseButton,onPress:()=>{if(!K.amount||parseFloat(K.amount)<=0)return void G.alert("L\u1ed7i","Vui l\xf2ng nh\u1eadp s\u1ed1 ti\u1ec1n h\u1ee3p l\u1ec7");if(Z(K.type)&&(!K.divideAmong||0===K.divideAmong.length))return void G.alert("Ch\u01b0a ch\u1ecdn ng\u01b0\u1eddi tham gia","Vui l\xf2ng ch\u1ecdn \xedt nh\u1ea5t m\u1ed9t ng\u01b0\u1eddi tham gia \u0111\u1ec3 chi tr\u1ea3 chi ph\xed n\xe0y.");const e={id:W(),type:K.type,amount:parseFloat(K.amount),description:K.description,divideAmong:K.divideAmong?.length?K.divideAmong:void 0};U([...F,e]),_({type:X.COURT_FEE,amount:"",description:"",divideAmong:[]})},children:(0,T.jsx)(s.default,{style:se.addExpenseButtonText,children:"Th\xeam chi ph\xed"})}),j&&m&&(0,T.jsxs)(k.default,{style:[se.addExpenseButton,se.courtFeeButton],onPress:()=>{if(!j||parseFloat(j)<=0)return void G.alert("L\u1ed7i","Vui l\xf2ng nh\u1eadp gi\xe1 thu\xea s\xe2n h\u1ee3p l\u1ec7");if(!m)return void G.alert("L\u1ed7i","Vui l\xf2ng ch\u1ecdn th\u1eddi gian k\u1ebft th\xfac \u0111\u1ec3 t\xednh chi ph\xed thu\xea s\xe2n");const e=(()=>{const e=Y();if(e&&j){const t=parseFloat(j),n=e/60;return Math.round(t*n)}return 0})();if(e<=0)return void G.alert("L\u1ed7i","Kh\xf4ng th\u1ec3 t\xednh chi ph\xed thu\xea s\xe2n");const t=Y();let n=0,o=0;t&&(n=Math.floor(t/60),o=t%60);const a="S\xe2n "+((n>0?n+" gi\u1edd ":"")+(o>0?o+" ph\xfat":""))+" ("+(A(parseFloat(j))+"/gi\u1edd")+")",i={id:W(),type:X.COURT_FEE,amount:e,description:a};U([...F,i]),G.alert("Th\xe0nh c\xf4ng","\u0110\xe3 th\xeam chi ph\xed thu\xea s\xe2n")},children:[" ",(0,T.jsx)(s.default,{style:se.addExpenseButtonText,children:(0,T.jsxs)(s.default,{children:["T\xednh ti\u1ec1n s\xe2n (",A(parseFloat(j)||0),"/gi\u1edd)"]})})]})]})]}),(0,T.jsx)(l.default,{style:se.buttonContainer,children:(0,T.jsx)(k.default,{style:se.submitButton,onPress:async()=>{if(p.trim())if(0!==P.length)if(0!==F.length)if(r)try{const t=R.filter((e=>P.includes(e.id))),n=Y(),o=j?parseFloat(j):void 0;await(async e=>{try{const t=await M(),n=t.findIndex((t=>t.id===e.id));if(-1===n)throw new Error("Kh\xf4ng t\xecm th\u1ea5y bu\u1ed5i \u0111\xe1nh c\u1ea7u \u0111\u1ec3 c\u1eadp nh\u1eadt");t[n]=e,await V(t)}catch(t){throw console.error("L\u1ed7i khi c\u1eadp nh\u1eadt session:",t),t}})(Object.assign({},r,{date:c.toISOString(),endTime:m?m.toISOString():void 0,duration:n,courtFeePerHour:o,location:p.trim(),notes:x.trim()||void 0,players:t,expenses:F})),G.alert("Th\xe0nh c\xf4ng","\u0110\xe3 c\u1eadp nh\u1eadt bu\u1ed5i \u0111\xe1nh c\u1ea7u",[{text:"OK",onPress:()=>e.goBack()}])}catch(t){G.alert("L\u1ed7i","Kh\xf4ng th\u1ec3 c\u1eadp nh\u1eadt bu\u1ed5i \u0111\xe1nh c\u1ea7u")}else G.alert("L\u1ed7i","Kh\xf4ng t\xecm th\u1ea5y th\xf4ng tin g\u1ed1c c\u1ee7a bu\u1ed5i \u0111\xe1nh c\u1ea7u");else G.alert("L\u1ed7i","Vui l\xf2ng th\xeam \xedt nh\u1ea5t m\u1ed9t kho\u1ea3n chi ph\xed");else G.alert("L\u1ed7i","Vui l\xf2ng ch\u1ecdn \xedt nh\u1ea5t m\u1ed9t ng\u01b0\u1eddi tham gia");else G.alert("L\u1ed7i","Vui l\xf2ng nh\u1eadp \u0111\u1ecba \u0111i\u1ec3m \u0111\xe1nh c\u1ea7u")},children:(0,T.jsx)(s.default,{style:se.submitButtonText,children:(0,T.jsx)(s.default,{children:"C\u1eadp nh\u1eadt"})})})})]})},ce=d.default.create({container:{flex:1,backgroundColor:"#f5f5f5"},listContainer:{padding:16,paddingBottom:80},playerItem:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",backgroundColor:"white",padding:16,borderRadius:8,marginBottom:12,elevation:2,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.22,shadowRadius:2.22},playerName:{fontSize:16,color:"#333"},deleteButton:{backgroundColor:"#f44336",paddingHorizontal:12,paddingVertical:6,borderRadius:4},deleteButtonText:{color:"white",fontSize:14,fontWeight:"500"},emptyText:{textAlign:"center",marginTop:40,fontSize:16,color:"#666"},addButton:{position:"absolute",bottom:20,left:20,right:20,backgroundColor:"#4caf50",paddingVertical:14,borderRadius:8,alignItems:"center",elevation:4,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.23,shadowRadius:2.62},addButtonText:{color:"white",fontSize:16,fontWeight:"bold"}}),ue=()=>{const e=(0,h.useNavigation)(),[t,n]=(0,a.useState)([]),[o,i]=(0,a.useState)(!0);(0,a.useEffect)((()=>{r();return e.addListener("focus",(()=>{r()}))}),[e]);const r=async()=>{i(!0);try{const e=[...await $()].sort(((e,t)=>e.name.localeCompare(t.name)));n(e)}catch(e){console.error("L\u1ed7i khi t\u1ea3i danh s\xe1ch ng\u01b0\u1eddi ch\u01a1i:",e)}finally{i(!1)}},d=e=>{G.alert("X\xe1c nh\u1eadn x\xf3a",`B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a ng\u01b0\u1eddi ch\u01a1i "${e.name}" kh\xf4ng?`,[{text:"H\u1ee7y",style:"cancel"},{text:"X\xf3a",style:"destructive",onPress:async()=>{try{await(async e=>{try{const t=(await $()).filter((t=>t.id!==e));await F(t)}catch(t){throw console.error("L\u1ed7i khi x\xf3a ng\u01b0\u1eddi ch\u01a1i:",t),t}})(e.id),r()}catch(t){G.alert("L\u1ed7i","Kh\xf4ng th\u1ec3 x\xf3a ng\u01b0\u1eddi ch\u01a1i")}}}])};return(0,T.jsxs)(l.default,{style:ce.container,children:[(0,T.jsx)(B.default,{data:t,renderItem:({item:e})=>(0,T.jsxs)(l.default,{style:ce.playerItem,children:[(0,T.jsx)(s.default,{style:ce.playerName,children:e.name}),(0,T.jsx)(k.default,{style:ce.deleteButton,onPress:()=>d(e),children:(0,T.jsx)(s.default,{style:ce.deleteButtonText,children:"X\xf3a"})})]}),keyExtractor:e=>e.id,contentContainerStyle:ce.listContainer,ListEmptyComponent:(0,T.jsx)(s.default,{style:ce.emptyText,children:o?"\u0110ang t\u1ea3i...":"Ch\u01b0a c\xf3 ng\u01b0\u1eddi ch\u01a1i n\xe0o. H\xe3y th\xeam ng\u01b0\u1eddi ch\u01a1i m\u1edbi!"})}),(0,T.jsx)(k.default,{style:ce.addButton,onPress:()=>e.navigate("AddPlayer"),children:(0,T.jsx)(s.default,{style:ce.addButtonText,children:"+ Th\xeam ng\u01b0\u1eddi ch\u01a1i"})})]})},he=d.default.create({container:{flex:1,backgroundColor:"#f5f5f5",padding:16},formContainer:{backgroundColor:"white",borderRadius:10,padding:16,elevation:2,shadowColor:"#000",shadowOffset:{width:0,height:1},shadowOpacity:.22,shadowRadius:2.22},label:{fontSize:16,color:"#555",marginBottom:8},input:{borderWidth:1,borderColor:"#ddd",borderRadius:8,paddingHorizontal:12,paddingVertical:10,fontSize:16,marginBottom:20},saveButton:{backgroundColor:"#4caf50",paddingVertical:14,borderRadius:8,alignItems:"center"},saveButtonText:{color:"white",fontWeight:"bold",fontSize:16}}),fe=()=>{const e=(0,h.useNavigation)(),[t,n]=(0,a.useState)(""),[o,i]=(0,a.useState)(!1);return(0,T.jsx)(l.default,{style:he.container,children:(0,T.jsxs)(l.default,{style:he.formContainer,children:[(0,T.jsx)(s.default,{style:he.label,children:"T\xean ng\u01b0\u1eddi ch\u01a1i"}),(0,T.jsx)(I.default,{style:he.input,placeholder:"Nh\u1eadp t\xean ng\u01b0\u1eddi ch\u01a1i",value:t,onChangeText:n,autoCapitalize:"words",autoFocus:!0}),(0,T.jsx)(k.default,{style:he.saveButton,onPress:async()=>{if(t.trim()){i(!0);try{await U(t.trim()),e.goBack()}catch(n){G.alert("L\u1ed7i","Kh\xf4ng th\u1ec3 th\xeam ng\u01b0\u1eddi ch\u01a1i")}finally{i(!1)}}else G.alert("L\u1ed7i","Vui l\xf2ng nh\u1eadp t\xean ng\u01b0\u1eddi ch\u01a1i")},disabled:o,children:(0,T.jsx)(s.default,{style:he.saveButtonText,children:o?"\u0110ang l\u01b0u...":"L\u01b0u ng\u01b0\u1eddi ch\u01a1i"})})]})})};var me=n(1690);const ge=d.default.create({container:{flex:1,backgroundColor:"#fff"},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:20},loadingText:{marginTop:12,fontSize:16,color:"#555"},tabContainer:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:"#e0e0e0",backgroundColor:"#fff"},tab:{flex:1,paddingVertical:12,alignItems:"center"},activeTab:{borderBottomWidth:2,borderBottomColor:"#4caf50"},tabText:{fontSize:14,color:"#666"},activeTabText:{color:"#4caf50",fontWeight:"bold"},content:{flex:1,padding:16},emptyState:{flex:1,justifyContent:"center",alignItems:"center",padding:40},emptyText:{fontSize:16,color:"#888"},statsContainer:{paddingBottom:20},statsCard:{backgroundColor:"#f9f9f9",borderRadius:8,padding:16,marginBottom:12},statsTitle:{fontSize:18,fontWeight:"bold",color:"#333",marginBottom:4},statsSubtitle:{fontSize:14,color:"#666",marginBottom:12},statsAmount:{fontSize:20,fontWeight:"bold",color:"#2e7d32",marginBottom:4},statsAverage:{fontSize:14,color:"#666"},statsSummary:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:16},statsTotalLabel:{fontSize:16,color:"#333"},statsTotal:{fontSize:18,fontWeight:"bold",color:"#2e7d32"},statsRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingVertical:12,borderBottomWidth:1,borderBottomColor:"#f0f0f0"},statsTypeInfo:{flex:1},statsTypeLabel:{fontSize:16,color:"#333"},statsTypePercentage:{fontSize:14,color:"#888",marginTop:2},statsTypeAmount:{fontSize:16,fontWeight:"500",color:"#2e7d32"}}),pe=()=>{const[e,t]=(0,a.useState)(!0),[n,o]=(0,a.useState)([]),[i,r]=(0,a.useState)("byMonth");(0,a.useEffect)((()=>{d()}),[]);const d=async()=>{try{t(!0);const e=(await M()).sort(((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()));o(e)}catch(e){console.error("L\u1ed7i khi t\u1ea3i d\u1eef li\u1ec7u phi\xean:",e),me.default.alert("L\u1ed7i","Kh\xf4ng th\u1ec3 t\u1ea3i d\u1eef li\u1ec7u th\u1ed1ng k\xea")}finally{t(!1)}},c=e=>{const[t,n]=e.split("/");return`Th\xe1ng ${t}/${n}`},h=()=>{const e={};return n.forEach((t=>{const n=(e=>{const t=new Date(e);return`${t.getMonth()+1}/${t.getFullYear()}`})(t.date);e[n]||(e[n]={total:0,sessions:0}),t.expenses.forEach((t=>{e[n].total+=t.amount})),e[n].sessions+=1})),Object.keys(e).sort(((e,t)=>{const[n,o]=e.split("/").map(Number),[a,i]=t.split("/").map(Number);return o!==i?i-o:a-n})).map((t=>({label:c(t),total:e[t].total,sessions:e[t].sessions})))},f=e=>{switch(e){case X.COURT_FEE:return"Ti\u1ec1n s\xe2n";case X.SHUTTLE:return"Ti\u1ec1n c\u1ea7u";case X.DRINK:return"Ti\u1ec1n n\u01b0\u1edbc";case X.EQUIPMENT:return"Ti\u1ec1n ph\u1ee5 ki\u1ec7n";case X.OTHER:return"Chi ph\xed kh\xe1c";default:return"Chi ph\xed"}};return(0,T.jsxs)(l.default,{style:ge.container,children:[(0,T.jsxs)(l.default,{style:ge.tabContainer,children:[(0,T.jsx)(k.default,{style:[ge.tab,"byMonth"===i&&ge.activeTab],onPress:()=>r("byMonth"),children:(0,T.jsx)(s.default,{style:[ge.tabText,"byMonth"===i&&ge.activeTabText],children:"Theo th\xe1ng"})}),(0,T.jsx)(k.default,{style:[ge.tab,"byType"===i&&ge.activeTab],onPress:()=>r("byType"),children:(0,T.jsx)(s.default,{style:[ge.tabText,"byType"===i&&ge.activeTabText],children:"Theo lo\u1ea1i"})}),(0,T.jsx)(k.default,{style:[ge.tab,"byPlayer"===i&&ge.activeTab],onPress:()=>r("byPlayer"),children:(0,T.jsx)(s.default,{style:[ge.tabText,"byPlayer"===i&&ge.activeTabText],children:"Theo ng\u01b0\u1eddi ch\u01a1i"})})]}),(0,T.jsx)(z.default,{style:ge.content,children:e?(0,T.jsxs)(l.default,{style:ge.loadingContainer,children:[(0,T.jsx)(u.default,{size:"large",color:"#4caf50"}),(0,T.jsx)(s.default,{style:ge.loadingText,children:"\u0110ang t\u1ea3i..."})]}):(0,T.jsxs)(T.Fragment,{children:["byMonth"===i&&(()=>{const e=h();return 0===e.length?(0,T.jsx)(l.default,{style:ge.emptyState,children:(0,T.jsx)(s.default,{style:ge.emptyText,children:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u"})}):(0,T.jsx)(l.default,{style:ge.statsContainer,children:e.map(((e,t)=>(0,T.jsxs)(l.default,{style:ge.statsCard,children:[(0,T.jsx)(s.default,{style:ge.statsTitle,children:e.label}),(0,T.jsxs)(s.default,{style:ge.statsSubtitle,children:[e.sessions," bu\u1ed5i ch\u01a1i"]}),(0,T.jsx)(s.default,{style:ge.statsAmount,children:A(e.total)})," ",(0,T.jsxs)(s.default,{style:ge.statsAverage,children:[(0,T.jsx)(s.default,{children:"Trung b\xecnh: "}),(0,T.jsxs)(s.default,{children:[A(e.total/e.sessions)," / bu\u1ed5i"]})]})]},t)))})})(),"byType"===i&&(()=>{const e=(()=>{const e={[X.COURT_FEE]:0,[X.SHUTTLE]:0,[X.DRINK]:0,[X.EQUIPMENT]:0,[X.OTHER]:0};return n.forEach((t=>{t.expenses.forEach((t=>{e[t.type]+=t.amount}))})),Object.entries(e).map((([e,t])=>({type:e,amount:t}))).sort(((e,t)=>t.amount-e.amount))})(),t=e.reduce(((e,t)=>e+t.amount),0);return 0===t?(0,T.jsx)(l.default,{style:ge.emptyState,children:(0,T.jsx)(s.default,{style:ge.emptyText,children:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u"})}):(0,T.jsxs)(l.default,{style:ge.statsContainer,children:[(0,T.jsxs)(l.default,{style:ge.statsSummary,children:[(0,T.jsx)(s.default,{style:ge.statsTotalLabel,children:"T\u1ed5ng chi ph\xed:"}),(0,T.jsx)(s.default,{style:ge.statsTotal,children:A(t)})]}),e.map(((e,n)=>(0,T.jsxs)(l.default,{style:ge.statsRow,children:[(0,T.jsxs)(l.default,{style:ge.statsTypeInfo,children:[(0,T.jsx)(s.default,{style:ge.statsTypeLabel,children:f(e.type)}),(0,T.jsxs)(s.default,{style:ge.statsTypePercentage,children:[Math.round(e.amount/t*100),"%"]})]}),(0,T.jsx)(s.default,{style:ge.statsTypeAmount,children:A(e.amount)})]},n)))]})})(),"byPlayer"===i&&(()=>{const e=(()=>{const e={};return n.forEach((t=>{let n=0;t.expenses.forEach((e=>{n+=e.amount}));const o=t.players.length;if(0===o)return;const a=n/o;t.players.forEach((t=>{e[t.id]||(e[t.id]={name:t.name,sessions:0,totalPaid:0}),e[t.id].sessions+=1,e[t.id].totalPaid+=a}))})),Object.values(e).sort(((e,t)=>t.totalPaid-e.totalPaid))})();return 0===e.length?(0,T.jsx)(l.default,{style:ge.emptyState,children:(0,T.jsx)(s.default,{style:ge.emptyText,children:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u"})}):(0,T.jsx)(l.default,{style:ge.statsContainer,children:e.map(((e,t)=>(0,T.jsxs)(l.default,{style:ge.statsCard,children:[(0,T.jsx)(s.default,{style:ge.statsTitle,children:e.name}),(0,T.jsxs)(s.default,{style:ge.statsSubtitle,children:[e.sessions," l\u1ea7n tham gia"]}),(0,T.jsx)(s.default,{style:ge.statsAmount,children:A(e.totalPaid)})," ",(0,T.jsxs)(s.default,{style:ge.statsAverage,children:[(0,T.jsx)(s.default,{children:"Trung b\xecnh: "}),(0,T.jsxs)(s.default,{children:[A(e.totalPaid/e.sessions)," / l\u1ea7n"]})]})]},t)))})})()]})})]})},ye=(0,f.createNativeStackNavigator)(),xe=(0,m.createBottomTabNavigator)(),be=()=>(0,T.jsxs)(xe.Navigator,{id:void 0,screenOptions:({route:e})=>({headerShown:!0,tabBarActiveTintColor:"#4caf50",tabBarInactiveTintColor:"gray",tabBarStyle:{paddingBottom:5,height:60},tabBarIcon:({focused:t,color:n,size:o})=>{let a;a="Home"===e.name?t?"home":"home-outline":"Players"===e.name?t?"people":"people-outline":"Stats"===e.name?t?"stats-chart":"stats-chart-outline":"help-outline";const i=1.2*o;return(0,T.jsx)(l.default,{style:{width:o,height:o,alignItems:"center",justifyContent:"center"},children:(0,T.jsx)(v,{name:a,size:i,color:n})})}}),children:[(0,T.jsx)(xe.Screen,{name:"Home",component:_,options:{title:"Trang ch\u1ee7"}}),(0,T.jsx)(xe.Screen,{name:"Players",component:ue,options:{title:"Ng\u01b0\u1eddi ch\u01a1i"}}),(0,T.jsx)(xe.Screen,{name:"Stats",component:pe,options:{title:"Th\u1ed1ng k\xea"}})]}),je=()=>(0,T.jsx)(h.NavigationContainer,{children:(0,T.jsxs)(ye.Navigator,{id:void 0,initialRouteName:"MainTabs",screenOptions:{headerStyle:{backgroundColor:"#4caf50"},headerTintColor:"#fff",headerTitleStyle:{fontWeight:"bold"}},children:[(0,T.jsx)(ye.Screen,{name:"MainTabs",component:be,options:{headerShown:!1}}),(0,T.jsx)(ye.Screen,{name:"SessionDetail",component:oe,options:{title:"Chi ti\u1ebft bu\u1ed5i \u0111\xe1nh c\u1ea7u"}}),(0,T.jsx)(ye.Screen,{name:"NewSession",component:le,options:{title:"Th\xeam bu\u1ed5i \u0111\xe1nh c\u1ea7u m\u1edbi"}}),(0,T.jsx)(ye.Screen,{name:"EditSession",component:de,options:{title:"Ch\u1ec9nh s\u1eeda bu\u1ed5i \u0111\xe1nh c\u1ea7u"}}),(0,T.jsx)(ye.Screen,{name:"AddPlayer",component:fe,options:{title:"Th\xeam ng\u01b0\u1eddi ch\u01a1i m\u1edbi"}})]})});var Te=n(2562),Ce=n(7792);Te.library.add(b.fas,j.far,Ce.fab);{Te.dom.watch();const e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode("\n    .svg-inline--fa {\n      display: inline-block;\n      width: 1em;\n      height: 1em;\n      overflow: visible;\n      vertical-align: -0.125em;\n    }\n  ")),document.head.appendChild(e)}const we=d.default.create({splashContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#ffffff"},splashImage:{width:120,height:120,resizeMode:"contain",marginBottom:20},splashTitle:{fontSize:28,fontWeight:"bold",color:"#4caf50",marginBottom:8},splashSubtitle:{fontSize:16,color:"#666",marginBottom:40},loader:{marginTop:20}});"undefined"!==typeof document&&n.e(49).then(n.t.bind(n,4049,23)).catch((e=>console.error("Error loading service worker:",e))),(0,o.default)((function(){const[e,t]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{setTimeout((()=>{t(!1)}),2e3)}),[]),e?(0,T.jsxs)(l.default,{style:we.splashContainer,children:[(0,T.jsx)(c.default,{source:n(9812),style:we.splashImage}),(0,T.jsx)(s.default,{style:we.splashTitle,children:"CauLongApp"}),(0,T.jsx)(s.default,{style:we.splashSubtitle,children:"Qu\u1ea3n l\xfd chi ph\xed \u0111\xe1nh c\u1ea7u l\xf4ng"}),(0,T.jsx)(u.default,{size:"large",color:"#4caf50",style:we.loader})]}):(0,T.jsxs)(r.SafeAreaProvider,{children:[(0,T.jsx)(i.StatusBar,{style:"auto"}),(0,T.jsx)(je,{})]})}))},9812:(e,t,n)=>{e.exports=n.p+"static/media/icon.608e4d9dafd9fd3d79c3.png"}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.m=e,(()=>{var e=[];n.O=(t,o,a,i)=>{if(!o){var r=1/0;for(c=0;c<e.length;c++){for(var[o,a,i]=e[c],l=!0,s=0;s<o.length;s++)(!1&i||r>=i)&&Object.keys(n.O).every((e=>n.O[e](o[s])))?o.splice(s--,1):(l=!1,i<r&&(r=i));if(l){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,a,i]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(o,a){if(1&a&&(o=this(o)),8&a)return o;if("object"===typeof o&&o){if(4&a&&o.__esModule)return o;if(16&a&&"function"===typeof o.then)return o}var i=Object.create(null);n.r(i);var r={};e=e||[null,t({}),t([]),t(t)];for(var l=2&a&&o;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((e=>r[e]=()=>o[e]));return r.default=()=>o,n.d(i,r),i}})(),n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,o)=>(n.f[o](e,t),t)),[])),n.u=e=>"static/js/"+e+".6b0745a1.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="web:";n.l=(o,a,i,r)=>{if(e[o])e[o].push(a);else{var l,s;if(void 0!==i)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==t+i){l=u;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+i),l.src=o),e[o]=[a];var h=(t,n)=>{l.onerror=l.onload=null,clearTimeout(f);var a=e[o];if(delete e[o],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=h.bind(null,l.onerror),l.onload=h.bind(null,l.onload),s&&document.head.appendChild(l)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,o)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)o.push(a[2]);else{var i=new Promise(((n,o)=>a=e[t]=[n,o]));o.push(a[2]=i);var r=n.p+n.u(t),l=new Error;n.l(r,(o=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=o&&("load"===o.type?"missing":o.type),r=o&&o.target&&o.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",l.name="ChunkLoadError",l.type=i,l.request=r,a[1](l)}}),"chunk-"+t,t)}},n.O.j=t=>0===e[t];var t=(t,o)=>{var a,i,[r,l,s]=o,d=0;if(r.some((t=>0!==e[t]))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(s)var c=s(n)}for(t&&t(o);d<r.length;d++)i=r[d],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},o=self.webpackChunkweb=self.webpackChunkweb||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=n.O(void 0,[76],(()=>n(8699)));o=n.O(o)})();
//# sourceMappingURL=main.ab13fce5.js.map